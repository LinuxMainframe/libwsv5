<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libwsv5: library.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libwsv5<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">A simple C library for OBS WebSocket v5 protocol communication with async request/response handling</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/d27/library_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">library.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dd/d08/library_8h_source.html">library.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;sys/select.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;poll.h&gt;</code><br />
<code>#include &lt;libwebsockets.h&gt;</code><br />
<code>#include &lt;openssl/sha.h&gt;</code><br />
<code>#include &lt;openssl/evp.h&gt;</code><br />
<code>#include &lt;openssl/bio.h&gt;</code><br />
<code>#include &lt;openssl/buffer.h&gt;</code><br />
<code>#include &lt;cjson/cJSON.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for library.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da8/library_8c__incl.svg" width="2534" height="187"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="../../d5/d27/library_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d45/structpending__request.html">pending_request</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d88/structobsws__connection.html">obsws_connection</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3024ccd4a9af5109d24e6c57565d74a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a3024ccd4a9af5109d24e6c57565d74a1">_POSIX_C_SOURCE</a>&#160;&#160;&#160;200809L</td></tr>
<tr class="separator:a3024ccd4a9af5109d24e6c57565d74a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad27c3919151c76f6e69c502c7ece4065"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ad27c3919151c76f6e69c502c7ece4065">OBSWS_VERSION</a>&#160;&#160;&#160;&quot;1.0.0&quot;                   /* Library version string */</td></tr>
<tr class="separator:ad27c3919151c76f6e69c502c7ece4065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af132d6e679351e32e25e03f0446b9a79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af132d6e679351e32e25e03f0446b9a79">OBSWS_PROTOCOL_VERSION</a>&#160;&#160;&#160;1                /* OBS WebSocket protocol version (v5 uses RPC version 1) */</td></tr>
<tr class="separator:af132d6e679351e32e25e03f0446b9a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a665c5272405e81329a26d2db1a7d5d97"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a665c5272405e81329a26d2db1a7d5d97">OBSWS_DEFAULT_BUFFER_SIZE</a>&#160;&#160;&#160;65536         /* 64KB buffer for WebSocket messages */</td></tr>
<tr class="separator:a665c5272405e81329a26d2db1a7d5d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad466175cd00abd451ceb9a2c4c82a355"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ad466175cd00abd451ceb9a2c4c82a355">OBSWS_MAX_PENDING_REQUESTS</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:ad466175cd00abd451ceb9a2c4c82a355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b13264018fd1dc7b1f2bbd93bdc7cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a25b13264018fd1dc7b1f2bbd93bdc7cc">OBSWS_UUID_LENGTH</a>&#160;&#160;&#160;37</td></tr>
<tr class="separator:a25b13264018fd1dc7b1f2bbd93bdc7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28228f50fc25972b87ebb3c5ca36104a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a28228f50fc25972b87ebb3c5ca36104a">OBSWS_OPCODE_HELLO</a>&#160;&#160;&#160;0                    /* Server: Initial greeting with auth info */</td></tr>
<tr class="separator:a28228f50fc25972b87ebb3c5ca36104a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac9adf7323ec0e886fa7294ef8c387c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a9ac9adf7323ec0e886fa7294ef8c387c">OBSWS_OPCODE_IDENTIFY</a>&#160;&#160;&#160;1                 /* Client: Authentication and protocol agreement */</td></tr>
<tr class="separator:a9ac9adf7323ec0e886fa7294ef8c387c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35815ef87e52f4956dcc02be7a3a7d95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a35815ef87e52f4956dcc02be7a3a7d95">OBSWS_OPCODE_IDENTIFIED</a>&#160;&#160;&#160;2               /* Server: Auth successful, ready for commands */</td></tr>
<tr class="separator:a35815ef87e52f4956dcc02be7a3a7d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6d50cc88d56174d2cd1ba02b98a02e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aca6d50cc88d56174d2cd1ba02b98a02e">OBSWS_OPCODE_REIDENTIFY</a>&#160;&#160;&#160;3               /* Client: Re-authenticate after reconnect */</td></tr>
<tr class="separator:aca6d50cc88d56174d2cd1ba02b98a02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60741575bd0daca62cfc088a7d3908c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a60741575bd0daca62cfc088a7d3908c6">OBSWS_OPCODE_EVENT</a>&#160;&#160;&#160;5                    /* Server: Something happened in OBS */</td></tr>
<tr class="separator:a60741575bd0daca62cfc088a7d3908c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c2c324c3b2c49b7febe0b376d6c1045"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a6c2c324c3b2c49b7febe0b376d6c1045">OBSWS_OPCODE_REQUEST</a>&#160;&#160;&#160;6                  /* Client: Execute an operation in OBS */</td></tr>
<tr class="separator:a6c2c324c3b2c49b7febe0b376d6c1045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ce9e236045c545c7786292abb8bed2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ae6ce9e236045c545c7786292abb8bed2">OBSWS_OPCODE_REQUEST_RESPONSE</a>&#160;&#160;&#160;7         /* Server: Result of a client request */</td></tr>
<tr class="separator:ae6ce9e236045c545c7786292abb8bed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae139b9522240dea875467adad42804ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ae139b9522240dea875467adad42804ed">OBSWS_OPCODE_REQUEST_BATCH</a>&#160;&#160;&#160;8            /* Client: Multiple requests at once (unused) */</td></tr>
<tr class="separator:ae139b9522240dea875467adad42804ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2cda5fb13a230acc6a977ec4f1b99c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a4d2cda5fb13a230acc6a977ec4f1b99c">OBSWS_OPCODE_REQUEST_BATCH_RESPONSE</a>&#160;&#160;&#160;9   /* Server: Responses to batch (unused) */</td></tr>
<tr class="separator:a4d2cda5fb13a230acc6a977ec4f1b99c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3122cbbc4a26632925db9b9ed14de9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af3122cbbc4a26632925db9b9ed14de9d">OBSWS_EVENT_GENERAL</a>&#160;&#160;&#160;(1 &lt;&lt; 0)        /* General OBS events (startup, shutdown) */</td></tr>
<tr class="separator:af3122cbbc4a26632925db9b9ed14de9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ac38fd80c288fe304251a707957d43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ac8ac38fd80c288fe304251a707957d43">OBSWS_EVENT_CONFIG</a>&#160;&#160;&#160;(1 &lt;&lt; 1)         /* Configuration change events */</td></tr>
<tr class="separator:ac8ac38fd80c288fe304251a707957d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcabd4a44ea5f015970b39563cb2f5d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#abcabd4a44ea5f015970b39563cb2f5d9">OBSWS_EVENT_SCENES</a>&#160;&#160;&#160;(1 &lt;&lt; 2)         /* Scene-related events (scene switched, etc) */</td></tr>
<tr class="separator:abcabd4a44ea5f015970b39563cb2f5d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d42f737fdba0a16d9db361107d4ccf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a34d42f737fdba0a16d9db361107d4ccf">OBSWS_EVENT_INPUTS</a>&#160;&#160;&#160;(1 &lt;&lt; 3)         /* Input source events (muted, volume changed) */</td></tr>
<tr class="separator:a34d42f737fdba0a16d9db361107d4ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb991cf70fbb060bbf2577c00a1e525"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a6bb991cf70fbb060bbf2577c00a1e525">OBSWS_EVENT_TRANSITIONS</a>&#160;&#160;&#160;(1 &lt;&lt; 4)    /* Transition events (transition started) */</td></tr>
<tr class="separator:a6bb991cf70fbb060bbf2577c00a1e525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a845a57bdbd1f3308da42b51d1e0cc074"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a845a57bdbd1f3308da42b51d1e0cc074">OBSWS_EVENT_FILTERS</a>&#160;&#160;&#160;(1 &lt;&lt; 5)        /* Filter events (filter added, removed) */</td></tr>
<tr class="separator:a845a57bdbd1f3308da42b51d1e0cc074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2ef7f5c168273a4af4fc255189d007"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a4e2ef7f5c168273a4af4fc255189d007">OBSWS_EVENT_OUTPUTS</a>&#160;&#160;&#160;(1 &lt;&lt; 6)        /* Output events (recording started, streaming stopped) */</td></tr>
<tr class="separator:a4e2ef7f5c168273a4af4fc255189d007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968abe18bf7a7df97110b636dab78710"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a968abe18bf7a7df97110b636dab78710">OBSWS_EVENT_SCENE_ITEMS</a>&#160;&#160;&#160;(1 &lt;&lt; 7)    /* Scene item events (source added to scene) */</td></tr>
<tr class="separator:a968abe18bf7a7df97110b636dab78710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd53c6b169bf03951321c0635a865a8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a9dd53c6b169bf03951321c0635a865a8">OBSWS_EVENT_MEDIA_INPUTS</a>&#160;&#160;&#160;(1 &lt;&lt; 8)   /* Media playback events (media finished) */</td></tr>
<tr class="separator:a9dd53c6b169bf03951321c0635a865a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af20dd880c769d5a295f408d7ba3a4878"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af20dd880c769d5a295f408d7ba3a4878">OBSWS_EVENT_VENDORS</a>&#160;&#160;&#160;(1 &lt;&lt; 9)        /* Vendor-specific extensions */</td></tr>
<tr class="separator:af20dd880c769d5a295f408d7ba3a4878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269a8756f372f31aab63847a67a1f448"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a269a8756f372f31aab63847a67a1f448">OBSWS_EVENT_UI</a>&#160;&#160;&#160;(1 &lt;&lt; 10)            /* UI events (Studio Mode toggled) */</td></tr>
<tr class="separator:a269a8756f372f31aab63847a67a1f448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c0214b5dafa0c23d7c7fe4c0686f7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a22c0214b5dafa0c23d7c7fe4c0686f7c">OBSWS_EVENT_ALL</a>&#160;&#160;&#160;0x7FF               /* Subscribe to all event types */</td></tr>
<tr class="separator:a22c0214b5dafa0c23d7c7fe4c0686f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac1fd81bac0d2473d54e2c9a03e393453"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../da/d45/structpending__request.html">pending_request</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a></td></tr>
<tr class="separator:ac1fd81bac0d2473d54e2c9a03e393453"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1d8529feb33753ebb45d896c4c125642"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9">obsws_log_level_t</a> level, const char *format,...)</td></tr>
<tr class="separator:a1d8529feb33753ebb45d896c4c125642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3682ffd7f6175dbc796f5750172c99bf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a> min_level, const char *format,...)</td></tr>
<tr class="separator:a3682ffd7f6175dbc796f5750172c99bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79be0fed07182761c923170f4211089"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af79be0fed07182761c923170f4211089">generate_uuid</a> (char *uuid_out)</td></tr>
<tr class="separator:af79be0fed07182761c923170f4211089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5c2995d6518ef254538795c00afdbb"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aab5c2995d6518ef254538795c00afdbb">base64_encode</a> (const unsigned char *input, size_t length)</td></tr>
<tr class="separator:aab5c2995d6518ef254538795c00afdbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa872a3d93d0ce3d5d4346f4b1c763e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aaaa872a3d93d0ce3d5d4346f4b1c763e">sha256_hash</a> (const char *input, unsigned char *output)</td></tr>
<tr class="separator:aaaa872a3d93d0ce3d5d4346f4b1c763e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab761db577bf6b074b4e9be8be845b5"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#acab761db577bf6b074b4e9be8be845b5">generate_auth_response</a> (const char *password, const char *salt, const char *challenge)</td></tr>
<tr class="separator:acab761db577bf6b074b4e9be8be845b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f13308e49322d01e479cbe14da7b575"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a> new_state)</td></tr>
<tr class="separator:a2f13308e49322d01e479cbe14da7b575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc3d1ce3debddcb8e3888c9806e044a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aafc3d1ce3debddcb8e3888c9806e044a">create_pending_request</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, const char *request_id)</td></tr>
<tr class="separator:aafc3d1ce3debddcb8e3888c9806e044a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7f5f47389b537c9dce9f1b328b7f06"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a6f7f5f47389b537c9dce9f1b328b7f06">find_pending_request</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, const char *request_id)</td></tr>
<tr class="separator:a6f7f5f47389b537c9dce9f1b328b7f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700c8a9baa87a3827b399776e811f328"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a700c8a9baa87a3827b399776e811f328">remove_pending_request</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a> *target)</td></tr>
<tr class="separator:a700c8a9baa87a3827b399776e811f328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885f22656ee8ca3170a50df0e0d85a4d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a885f22656ee8ca3170a50df0e0d85a4d">cleanup_old_requests</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn)</td></tr>
<tr class="separator:a885f22656ee8ca3170a50df0e0d85a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af183411517ec69b1d59f875fbb0245bd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af183411517ec69b1d59f875fbb0245bd">handle_hello_message</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, cJSON *data)</td></tr>
<tr class="memdesc:af183411517ec69b1d59f875fbb0245bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the initial HELLO handshake message from OBS.  <a href="../../d5/d27/library_8c.html#af183411517ec69b1d59f875fbb0245bd">More...</a><br /></td></tr>
<tr class="separator:af183411517ec69b1d59f875fbb0245bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad4174fe2c4665d21ae49896fc25be9e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aad4174fe2c4665d21ae49896fc25be9e">handle_identified_message</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, cJSON *data)</td></tr>
<tr class="memdesc:aad4174fe2c4665d21ae49896fc25be9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the IDENTIFIED confirmation message from OBS.  <a href="../../d5/d27/library_8c.html#aad4174fe2c4665d21ae49896fc25be9e">More...</a><br /></td></tr>
<tr class="separator:aad4174fe2c4665d21ae49896fc25be9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c18bfa245d7a8582c6e5536cf46532"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ac7c18bfa245d7a8582c6e5536cf46532">handle_event_message</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, cJSON *data)</td></tr>
<tr class="memdesc:ac7c18bfa245d7a8582c6e5536cf46532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle EVENT messages from OBS (real-time notifications).  <a href="../../d5/d27/library_8c.html#ac7c18bfa245d7a8582c6e5536cf46532">More...</a><br /></td></tr>
<tr class="separator:ac7c18bfa245d7a8582c6e5536cf46532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a046a86e7ba13a054663021594755d54b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a046a86e7ba13a054663021594755d54b">handle_request_response_message</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, cJSON *data)</td></tr>
<tr class="memdesc:a046a86e7ba13a054663021594755d54b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle REQUEST_RESPONSE messages from OBS (responses to our commands).  <a href="../../d5/d27/library_8c.html#a046a86e7ba13a054663021594755d54b">More...</a><br /></td></tr>
<tr class="separator:a046a86e7ba13a054663021594755d54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0672da971c7e38224df11c34ef612f02"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a0672da971c7e38224df11c34ef612f02">handle_websocket_message</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, const char *message, size_t len)</td></tr>
<tr class="memdesc:a0672da971c7e38224df11c34ef612f02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Route incoming WebSocket messages to appropriate handlers based on opcode.  <a href="../../d5/d27/library_8c.html#a0672da971c7e38224df11c34ef612f02">More...</a><br /></td></tr>
<tr class="separator:a0672da971c7e38224df11c34ef612f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5c31c457dc3042f85a620d7998ebeee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ac5c31c457dc3042f85a620d7998ebeee">lws_callback</a> (struct lws *wsi, enum lws_callback_reasons reason, void *user, void *in, size_t len)</td></tr>
<tr class="memdesc:ac5c31c457dc3042f85a620d7998ebeee"><td class="mdescLeft">&#160;</td><td class="mdescRight">libwebsockets callback - routes WebSocket events to our handlers.  <a href="../../d5/d27/library_8c.html#ac5c31c457dc3042f85a620d7998ebeee">More...</a><br /></td></tr>
<tr class="separator:ac5c31c457dc3042f85a620d7998ebeee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27739efcea1287611c82ff3e8c88d7b7"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a27739efcea1287611c82ff3e8c88d7b7">event_thread_func</a> (void *arg)</td></tr>
<tr class="memdesc:a27739efcea1287611c82ff3e8c88d7b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Background thread function that continuously processes WebSocket events.  <a href="../../d5/d27/library_8c.html#a27739efcea1287611c82ff3e8c88d7b7">More...</a><br /></td></tr>
<tr class="separator:a27739efcea1287611c82ff3e8c88d7b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3d6c035330741df84552800c0d0124"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aff3d6c035330741df84552800c0d0124">obsws_init</a> (void)</td></tr>
<tr class="memdesc:aff3d6c035330741df84552800c0d0124"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the libwsv5 library.  <a href="../../d5/d27/library_8c.html#aff3d6c035330741df84552800c0d0124">More...</a><br /></td></tr>
<tr class="separator:aff3d6c035330741df84552800c0d0124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3afe1c77e8b8f26a8281186379790a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ad3afe1c77e8b8f26a8281186379790a1">obsws_cleanup</a> (void)</td></tr>
<tr class="memdesc:ad3afe1c77e8b8f26a8281186379790a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up library resources.  <a href="../../d5/d27/library_8c.html#ad3afe1c77e8b8f26a8281186379790a1">More...</a><br /></td></tr>
<tr class="separator:ad3afe1c77e8b8f26a8281186379790a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3afc203f99395c187faf3fba0477bf9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af3afc203f99395c187faf3fba0477bf9">obsws_version</a> (void)</td></tr>
<tr class="memdesc:af3afc203f99395c187faf3fba0477bf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the library version string.  <a href="../../d5/d27/library_8c.html#af3afc203f99395c187faf3fba0477bf9">More...</a><br /></td></tr>
<tr class="separator:af3afc203f99395c187faf3fba0477bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6720460e577d2afe3c0691a2d6e055e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a6720460e577d2afe3c0691a2d6e055e9">obsws_set_log_level</a> (<a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9">obsws_log_level_t</a> level)</td></tr>
<tr class="memdesc:a6720460e577d2afe3c0691a2d6e055e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the global log level threshold.  <a href="../../d5/d27/library_8c.html#a6720460e577d2afe3c0691a2d6e055e9">More...</a><br /></td></tr>
<tr class="separator:a6720460e577d2afe3c0691a2d6e055e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adde8bcb270d34f560ae99047e0524a1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#adde8bcb270d34f560ae99047e0524a1d">obsws_set_debug_level</a> (<a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a> level)</td></tr>
<tr class="memdesc:adde8bcb270d34f560ae99047e0524a1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the global debug level.  <a href="../../d5/d27/library_8c.html#adde8bcb270d34f560ae99047e0524a1d">More...</a><br /></td></tr>
<tr class="separator:adde8bcb270d34f560ae99047e0524a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17d68299d8070c22f5cb04e2c4af28a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a17d68299d8070c22f5cb04e2c4af28a1">obsws_get_debug_level</a> (void)</td></tr>
<tr class="memdesc:a17d68299d8070c22f5cb04e2c4af28a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current debug level.  <a href="../../d5/d27/library_8c.html#a17d68299d8070c22f5cb04e2c4af28a1">More...</a><br /></td></tr>
<tr class="separator:a17d68299d8070c22f5cb04e2c4af28a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1c69172bbf706ac225b718797d30c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a1f1c69172bbf706ac225b718797d30c6">obsws_config_init</a> (<a class="el" href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a> *config)</td></tr>
<tr class="memdesc:a1f1c69172bbf706ac225b718797d30c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a connection configuration structure with safe defaults.  <a href="../../d5/d27/library_8c.html#a1f1c69172bbf706ac225b718797d30c6">More...</a><br /></td></tr>
<tr class="separator:a1f1c69172bbf706ac225b718797d30c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed7225961f0989acb31ebbd9c099626"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a7ed7225961f0989acb31ebbd9c099626">obsws_connect</a> (const <a class="el" href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a> *config)</td></tr>
<tr class="memdesc:a7ed7225961f0989acb31ebbd9c099626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establish a connection to OBS.  <a href="../../d5/d27/library_8c.html#a7ed7225961f0989acb31ebbd9c099626">More...</a><br /></td></tr>
<tr class="separator:a7ed7225961f0989acb31ebbd9c099626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8389ba6731e01a9426bd921180b7195"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#aa8389ba6731e01a9426bd921180b7195">obsws_disconnect</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn)</td></tr>
<tr class="memdesc:aa8389ba6731e01a9426bd921180b7195"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect from OBS and clean up connection resources.  <a href="../../d5/d27/library_8c.html#aa8389ba6731e01a9426bd921180b7195">More...</a><br /></td></tr>
<tr class="separator:aa8389ba6731e01a9426bd921180b7195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9894e72ee8510f4eaf7d42feaf0cf9a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ad9894e72ee8510f4eaf7d42feaf0cf9a">obsws_is_connected</a> (const <a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn)</td></tr>
<tr class="memdesc:ad9894e72ee8510f4eaf7d42feaf0cf9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a connection is actively connected to OBS.  <a href="../../d5/d27/library_8c.html#ad9894e72ee8510f4eaf7d42feaf0cf9a">More...</a><br /></td></tr>
<tr class="separator:ad9894e72ee8510f4eaf7d42feaf0cf9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a10e31041532a9da0c1c1993f84a79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a61a10e31041532a9da0c1c1993f84a79">obsws_get_state</a> (const <a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn)</td></tr>
<tr class="memdesc:a61a10e31041532a9da0c1c1993f84a79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current connection state.  <a href="../../d5/d27/library_8c.html#a61a10e31041532a9da0c1c1993f84a79">More...</a><br /></td></tr>
<tr class="separator:a61a10e31041532a9da0c1c1993f84a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cce41cb6c70229eaab8b1b3afba57a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a5cce41cb6c70229eaab8b1b3afba57a9">obsws_get_stats</a> (const <a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../d6/d5c/structobsws__stats__t.html">obsws_stats_t</a> *stats)</td></tr>
<tr class="memdesc:a5cce41cb6c70229eaab8b1b3afba57a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve performance and connectivity statistics.  <a href="../../d5/d27/library_8c.html#a5cce41cb6c70229eaab8b1b3afba57a9">More...</a><br /></td></tr>
<tr class="separator:a5cce41cb6c70229eaab8b1b3afba57a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2fd7f8dd928e03b38a3e2c5b5745417"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, const char *request_type, const char *request_data, <a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **response, uint32_t timeout_ms)</td></tr>
<tr class="memdesc:af2fd7f8dd928e03b38a3e2c5b5745417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a synchronous request to OBS and wait for the response.  <a href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">More...</a><br /></td></tr>
<tr class="separator:af2fd7f8dd928e03b38a3e2c5b5745417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb91bbce42b458f267f79b9a7b293bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a7cb91bbce42b458f267f79b9a7b293bf">obsws_set_current_scene</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, const char *scene_name, <a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **response)</td></tr>
<tr class="memdesc:a7cb91bbce42b458f267f79b9a7b293bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch OBS to a specific scene.  <a href="../../d5/d27/library_8c.html#a7cb91bbce42b458f267f79b9a7b293bf">More...</a><br /></td></tr>
<tr class="separator:a7cb91bbce42b458f267f79b9a7b293bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91bd5ceb5878431131513cb4624e935a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a91bd5ceb5878431131513cb4624e935a">obsws_get_current_scene</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, char *scene_name, size_t buffer_size)</td></tr>
<tr class="memdesc:a91bd5ceb5878431131513cb4624e935a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the currently active scene in OBS.  <a href="../../d5/d27/library_8c.html#a91bd5ceb5878431131513cb4624e935a">More...</a><br /></td></tr>
<tr class="separator:a91bd5ceb5878431131513cb4624e935a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8643e2027afb1907122ce4d3bfe65c6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a8643e2027afb1907122ce4d3bfe65c6e">obsws_start_recording</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **response)</td></tr>
<tr class="memdesc:a8643e2027afb1907122ce4d3bfe65c6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start recording in OBS.  <a href="../../d5/d27/library_8c.html#a8643e2027afb1907122ce4d3bfe65c6e">More...</a><br /></td></tr>
<tr class="separator:a8643e2027afb1907122ce4d3bfe65c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30001811f4cf8501e006ca46bcb8b329"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a30001811f4cf8501e006ca46bcb8b329">obsws_stop_recording</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **response)</td></tr>
<tr class="memdesc:a30001811f4cf8501e006ca46bcb8b329"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop recording in OBS.  <a href="../../d5/d27/library_8c.html#a30001811f4cf8501e006ca46bcb8b329">More...</a><br /></td></tr>
<tr class="separator:a30001811f4cf8501e006ca46bcb8b329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a35ee2d7aef7a0569b4111bd663d22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a86a35ee2d7aef7a0569b4111bd663d22">obsws_start_streaming</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **response)</td></tr>
<tr class="memdesc:a86a35ee2d7aef7a0569b4111bd663d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start streaming in OBS.  <a href="../../d5/d27/library_8c.html#a86a35ee2d7aef7a0569b4111bd663d22">More...</a><br /></td></tr>
<tr class="separator:a86a35ee2d7aef7a0569b4111bd663d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cfe9b46f435aa7986b5e772b99c464e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a2cfe9b46f435aa7986b5e772b99c464e">obsws_stop_streaming</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, <a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **response)</td></tr>
<tr class="memdesc:a2cfe9b46f435aa7986b5e772b99c464e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop streaming in OBS.  <a href="../../d5/d27/library_8c.html#a2cfe9b46f435aa7986b5e772b99c464e">More...</a><br /></td></tr>
<tr class="separator:a2cfe9b46f435aa7986b5e772b99c464e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53067e61dc0ddcf1134d46b275d7ce6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a> (<a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *response)</td></tr>
<tr class="memdesc:a53067e61dc0ddcf1134d46b275d7ce6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a response object previously allocated by <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a>.  <a href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b">More...</a><br /></td></tr>
<tr class="separator:a53067e61dc0ddcf1134d46b275d7ce6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39534944f30eaed9a0f2d7de19be0c3e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a39534944f30eaed9a0f2d7de19be0c3e">obsws_error_string</a> (<a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> error)</td></tr>
<tr class="memdesc:a39534944f30eaed9a0f2d7de19be0c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an error code to a human-readable string.  <a href="../../d5/d27/library_8c.html#a39534944f30eaed9a0f2d7de19be0c3e">More...</a><br /></td></tr>
<tr class="separator:a39534944f30eaed9a0f2d7de19be0c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69f8fcc1732533a2ebe573ac65effa04"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a69f8fcc1732533a2ebe573ac65effa04">obsws_state_string</a> (<a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a> state)</td></tr>
<tr class="memdesc:a69f8fcc1732533a2ebe573ac65effa04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a connection state to a human-readable string.  <a href="../../d5/d27/library_8c.html#a69f8fcc1732533a2ebe573ac65effa04">More...</a><br /></td></tr>
<tr class="separator:a69f8fcc1732533a2ebe573ac65effa04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe53062a781ca1cd537f799c075b3e2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#abe53062a781ca1cd537f799c075b3e2e">obsws_process_events</a> (<a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *conn, uint32_t timeout_ms)</td></tr>
<tr class="memdesc:abe53062a781ca1cd537f799c075b3e2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process pending WebSocket events (compatibility function).  <a href="../../d5/d27/library_8c.html#abe53062a781ca1cd537f799c075b3e2e">More...</a><br /></td></tr>
<tr class="separator:abe53062a781ca1cd537f799c075b3e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5c573cf80a65ed908b966420c4a5d7d2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a> = false</td></tr>
<tr class="separator:a5c573cf80a65ed908b966420c4a5d7d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaccf3944be55af2f72ebbb713c77706"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9">obsws_log_level_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#abaccf3944be55af2f72ebbb713c77706">g_log_level</a> = <a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a></td></tr>
<tr class="separator:abaccf3944be55af2f72ebbb713c77706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3a9f2c8c4082f1e6b67daddd8a5931"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#abf3a9f2c8c4082f1e6b67daddd8a5931">g_debug_level</a> = <a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a0f96dd454f8efb9a755ebda2e81919aa">OBSWS_DEBUG_NONE</a></td></tr>
<tr class="separator:abf3a9f2c8c4082f1e6b67daddd8a5931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f633670e2eea3285c1867570a33cbc"><td class="memItemLeft" align="right" valign="top">static pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:ad5f633670e2eea3285c1867570a33cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34f3c7a416fe0d9311efdc5715410e1"><td class="memItemLeft" align="right" valign="top">static const struct lws_protocols&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d27/library_8c.html#ad34f3c7a416fe0d9311efdc5715410e1">protocols</a> []</td></tr>
<tr class="separator:ad34f3c7a416fe0d9311efdc5715410e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3024ccd4a9af5109d24e6c57565d74a1" name="a3024ccd4a9af5109d24e6c57565d74a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3024ccd4a9af5109d24e6c57565d74a1">&#9670;&nbsp;</a></span>_POSIX_C_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _POSIX_C_SOURCE&#160;&#160;&#160;200809L</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00001">1</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a665c5272405e81329a26d2db1a7d5d97" name="a665c5272405e81329a26d2db1a7d5d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a665c5272405e81329a26d2db1a7d5d97">&#9670;&nbsp;</a></span>OBSWS_DEFAULT_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_DEFAULT_BUFFER_SIZE&#160;&#160;&#160;65536         /* 64KB buffer for WebSocket messages */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00039">39</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a22c0214b5dafa0c23d7c7fe4c0686f7c" name="a22c0214b5dafa0c23d7c7fe4c0686f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c0214b5dafa0c23d7c7fe4c0686f7c">&#9670;&nbsp;</a></span>OBSWS_EVENT_ALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_ALL&#160;&#160;&#160;0x7FF               /* Subscribe to all event types */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00101">101</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ac8ac38fd80c288fe304251a707957d43" name="ac8ac38fd80c288fe304251a707957d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ac38fd80c288fe304251a707957d43">&#9670;&nbsp;</a></span>OBSWS_EVENT_CONFIG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_CONFIG&#160;&#160;&#160;(1 &lt;&lt; 1)         /* Configuration change events */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00091">91</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a845a57bdbd1f3308da42b51d1e0cc074" name="a845a57bdbd1f3308da42b51d1e0cc074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a845a57bdbd1f3308da42b51d1e0cc074">&#9670;&nbsp;</a></span>OBSWS_EVENT_FILTERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_FILTERS&#160;&#160;&#160;(1 &lt;&lt; 5)        /* Filter events (filter added, removed) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00095">95</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="af3122cbbc4a26632925db9b9ed14de9d" name="af3122cbbc4a26632925db9b9ed14de9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3122cbbc4a26632925db9b9ed14de9d">&#9670;&nbsp;</a></span>OBSWS_EVENT_GENERAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_GENERAL&#160;&#160;&#160;(1 &lt;&lt; 0)        /* General OBS events (startup, shutdown) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00090">90</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a34d42f737fdba0a16d9db361107d4ccf" name="a34d42f737fdba0a16d9db361107d4ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d42f737fdba0a16d9db361107d4ccf">&#9670;&nbsp;</a></span>OBSWS_EVENT_INPUTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_INPUTS&#160;&#160;&#160;(1 &lt;&lt; 3)         /* Input source events (muted, volume changed) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00093">93</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a9dd53c6b169bf03951321c0635a865a8" name="a9dd53c6b169bf03951321c0635a865a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd53c6b169bf03951321c0635a865a8">&#9670;&nbsp;</a></span>OBSWS_EVENT_MEDIA_INPUTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_MEDIA_INPUTS&#160;&#160;&#160;(1 &lt;&lt; 8)   /* Media playback events (media finished) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00098">98</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a4e2ef7f5c168273a4af4fc255189d007" name="a4e2ef7f5c168273a4af4fc255189d007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e2ef7f5c168273a4af4fc255189d007">&#9670;&nbsp;</a></span>OBSWS_EVENT_OUTPUTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_OUTPUTS&#160;&#160;&#160;(1 &lt;&lt; 6)        /* Output events (recording started, streaming stopped) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00096">96</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a968abe18bf7a7df97110b636dab78710" name="a968abe18bf7a7df97110b636dab78710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968abe18bf7a7df97110b636dab78710">&#9670;&nbsp;</a></span>OBSWS_EVENT_SCENE_ITEMS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_SCENE_ITEMS&#160;&#160;&#160;(1 &lt;&lt; 7)    /* Scene item events (source added to scene) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00097">97</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="abcabd4a44ea5f015970b39563cb2f5d9" name="abcabd4a44ea5f015970b39563cb2f5d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcabd4a44ea5f015970b39563cb2f5d9">&#9670;&nbsp;</a></span>OBSWS_EVENT_SCENES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_SCENES&#160;&#160;&#160;(1 &lt;&lt; 2)         /* Scene-related events (scene switched, etc) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00092">92</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a6bb991cf70fbb060bbf2577c00a1e525" name="a6bb991cf70fbb060bbf2577c00a1e525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb991cf70fbb060bbf2577c00a1e525">&#9670;&nbsp;</a></span>OBSWS_EVENT_TRANSITIONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_TRANSITIONS&#160;&#160;&#160;(1 &lt;&lt; 4)    /* Transition events (transition started) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00094">94</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a269a8756f372f31aab63847a67a1f448" name="a269a8756f372f31aab63847a67a1f448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a269a8756f372f31aab63847a67a1f448">&#9670;&nbsp;</a></span>OBSWS_EVENT_UI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_UI&#160;&#160;&#160;(1 &lt;&lt; 10)            /* UI events (Studio Mode toggled) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00100">100</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="af20dd880c769d5a295f408d7ba3a4878" name="af20dd880c769d5a295f408d7ba3a4878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af20dd880c769d5a295f408d7ba3a4878">&#9670;&nbsp;</a></span>OBSWS_EVENT_VENDORS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_EVENT_VENDORS&#160;&#160;&#160;(1 &lt;&lt; 9)        /* Vendor-specific extensions */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00099">99</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ad466175cd00abd451ceb9a2c4c82a355" name="ad466175cd00abd451ceb9a2c4c82a355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad466175cd00abd451ceb9a2c4c82a355">&#9670;&nbsp;</a></span>OBSWS_MAX_PENDING_REQUESTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_MAX_PENDING_REQUESTS&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00045">45</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a60741575bd0daca62cfc088a7d3908c6" name="a60741575bd0daca62cfc088a7d3908c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60741575bd0daca62cfc088a7d3908c6">&#9670;&nbsp;</a></span>OBSWS_OPCODE_EVENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_EVENT&#160;&#160;&#160;5                    /* Server: Something happened in OBS */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00072">72</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a28228f50fc25972b87ebb3c5ca36104a" name="a28228f50fc25972b87ebb3c5ca36104a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28228f50fc25972b87ebb3c5ca36104a">&#9670;&nbsp;</a></span>OBSWS_OPCODE_HELLO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_HELLO&#160;&#160;&#160;0                    /* Server: Initial greeting with auth info */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00068">68</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a35815ef87e52f4956dcc02be7a3a7d95" name="a35815ef87e52f4956dcc02be7a3a7d95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35815ef87e52f4956dcc02be7a3a7d95">&#9670;&nbsp;</a></span>OBSWS_OPCODE_IDENTIFIED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_IDENTIFIED&#160;&#160;&#160;2               /* Server: Auth successful, ready for commands */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00070">70</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a9ac9adf7323ec0e886fa7294ef8c387c" name="a9ac9adf7323ec0e886fa7294ef8c387c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ac9adf7323ec0e886fa7294ef8c387c">&#9670;&nbsp;</a></span>OBSWS_OPCODE_IDENTIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_IDENTIFY&#160;&#160;&#160;1                 /* Client: Authentication and protocol agreement */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00069">69</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="aca6d50cc88d56174d2cd1ba02b98a02e" name="aca6d50cc88d56174d2cd1ba02b98a02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca6d50cc88d56174d2cd1ba02b98a02e">&#9670;&nbsp;</a></span>OBSWS_OPCODE_REIDENTIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_REIDENTIFY&#160;&#160;&#160;3               /* Client: Re-authenticate after reconnect */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00071">71</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a6c2c324c3b2c49b7febe0b376d6c1045" name="a6c2c324c3b2c49b7febe0b376d6c1045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c2c324c3b2c49b7febe0b376d6c1045">&#9670;&nbsp;</a></span>OBSWS_OPCODE_REQUEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_REQUEST&#160;&#160;&#160;6                  /* Client: Execute an operation in OBS */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00073">73</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ae139b9522240dea875467adad42804ed" name="ae139b9522240dea875467adad42804ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae139b9522240dea875467adad42804ed">&#9670;&nbsp;</a></span>OBSWS_OPCODE_REQUEST_BATCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_REQUEST_BATCH&#160;&#160;&#160;8            /* Client: Multiple requests at once (unused) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00075">75</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a4d2cda5fb13a230acc6a977ec4f1b99c" name="a4d2cda5fb13a230acc6a977ec4f1b99c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d2cda5fb13a230acc6a977ec4f1b99c">&#9670;&nbsp;</a></span>OBSWS_OPCODE_REQUEST_BATCH_RESPONSE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_REQUEST_BATCH_RESPONSE&#160;&#160;&#160;9   /* Server: Responses to batch (unused) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00076">76</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ae6ce9e236045c545c7786292abb8bed2" name="ae6ce9e236045c545c7786292abb8bed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ce9e236045c545c7786292abb8bed2">&#9670;&nbsp;</a></span>OBSWS_OPCODE_REQUEST_RESPONSE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_OPCODE_REQUEST_RESPONSE&#160;&#160;&#160;7         /* Server: Result of a client request */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00074">74</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="af132d6e679351e32e25e03f0446b9a79" name="af132d6e679351e32e25e03f0446b9a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af132d6e679351e32e25e03f0446b9a79">&#9670;&nbsp;</a></span>OBSWS_PROTOCOL_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_PROTOCOL_VERSION&#160;&#160;&#160;1                /* OBS WebSocket protocol version (v5 uses RPC version 1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00033">33</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a25b13264018fd1dc7b1f2bbd93bdc7cc" name="a25b13264018fd1dc7b1f2bbd93bdc7cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25b13264018fd1dc7b1f2bbd93bdc7cc">&#9670;&nbsp;</a></span>OBSWS_UUID_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_UUID_LENGTH&#160;&#160;&#160;37</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00049">49</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ad27c3919151c76f6e69c502c7ece4065" name="ad27c3919151c76f6e69c502c7ece4065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad27c3919151c76f6e69c502c7ece4065">&#9670;&nbsp;</a></span>OBSWS_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBSWS_VERSION&#160;&#160;&#160;&quot;1.0.0&quot;                   /* Library version string */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00032">32</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ac1fd81bac0d2473d54e2c9a03e393453" name="ac1fd81bac0d2473d54e2c9a03e393453"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1fd81bac0d2473d54e2c9a03e393453">&#9670;&nbsp;</a></span>pending_request_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../da/d45/structpending__request.html">pending_request</a> <a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aab5c2995d6518ef254538795c00afdbb" name="aab5c2995d6518ef254538795c00afdbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5c2995d6518ef254538795c00afdbb">&#9670;&nbsp;</a></span>base64_encode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * base64_encode </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00369">369</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  369</span>                                                                      {</div>
<div class="line"><span class="lineno">  370</span>    BIO *bio, *b64;</div>
<div class="line"><span class="lineno">  371</span>    BUF_MEM *buffer_ptr;</div>
<div class="line"><span class="lineno">  372</span>    </div>
<div class="line"><span class="lineno">  373</span>    <span class="comment">/* Set up OpenSSL base64 encoder: b64 filter pushing to memory buffer */</span></div>
<div class="line"><span class="lineno">  374</span>    b64 = BIO_new(BIO_f_base64());</div>
<div class="line"><span class="lineno">  375</span>    bio = BIO_new(BIO_s_mem());</div>
<div class="line"><span class="lineno">  376</span>    bio = BIO_push(b64, bio);</div>
<div class="line"><span class="lineno">  377</span>    </div>
<div class="line"><span class="lineno">  378</span>    <span class="comment">/* Disable newlines in output (OpenSSL adds them by default for readability) */</span></div>
<div class="line"><span class="lineno">  379</span>    BIO_set_flags(bio, BIO_FLAGS_BASE64_NO_NL);</div>
<div class="line"><span class="lineno">  380</span>    </div>
<div class="line"><span class="lineno">  381</span>    <span class="comment">/* Encode the data */</span></div>
<div class="line"><span class="lineno">  382</span>    BIO_write(bio, input, length);</div>
<div class="line"><span class="lineno">  383</span>    BIO_flush(bio);</div>
<div class="line"><span class="lineno">  384</span>    BIO_get_mem_ptr(bio, &amp;buffer_ptr);</div>
<div class="line"><span class="lineno">  385</span>    </div>
<div class="line"><span class="lineno">  386</span>    <span class="comment">/* Copy result to our own allocated buffer and null-terminate */</span></div>
<div class="line"><span class="lineno">  387</span>    <span class="keywordtype">char</span> *result = malloc(buffer_ptr-&gt;length + 1);</div>
<div class="line"><span class="lineno">  388</span>    memcpy(result, buffer_ptr-&gt;data, buffer_ptr-&gt;length);</div>
<div class="line"><span class="lineno">  389</span>    result[buffer_ptr-&gt;length] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  390</span>    </div>
<div class="line"><span class="lineno">  391</span>    BIO_free_all(bio);</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  393</span>}</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aab5c2995d6518ef254538795c00afdbb_icgraph.svg" width="992" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a885f22656ee8ca3170a50df0e0d85a4d" name="a885f22656ee8ca3170a50df0e0d85a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a885f22656ee8ca3170a50df0e0d85a4d">&#9670;&nbsp;</a></span>cleanup_old_requests()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cleanup_old_requests </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00572">572</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  572</span>                                                           {</div>
<div class="line"><span class="lineno">  573</span>    time_t now = time(NULL);</div>
<div class="line"><span class="lineno">  574</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  575</span>    </div>
<div class="line"><span class="lineno">  576</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> **req = &amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">pending_requests</a>;</div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">while</span> (*req) {</div>
<div class="line"><span class="lineno">  578</span>        <span class="comment">/* Check if request has timed out (30 seconds) */</span></div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">if</span> (now - (*req)-&gt;timestamp &gt; 30) {</div>
<div class="line"><span class="lineno">  580</span>            <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *old = *req;</div>
<div class="line"><span class="lineno">  581</span>            *req = old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a>;</div>
<div class="line"><span class="lineno">  582</span>            </div>
<div class="line"><span class="lineno">  583</span>            <span class="comment">/* Mark as completed with timeout error */</span></div>
<div class="line"><span class="lineno">  584</span>            pthread_mutex_lock(&amp;old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno">  585</span>            old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#af74dd3c97a064175b9dcf3dbfe3665cc">completed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  586</span>            old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  587</span>            old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#ab2b3055a84989889d3de28c2ccfd0dac">error_message</a> = strdup(<span class="stringliteral">&quot;Request timeout&quot;</span>);</div>
<div class="line"><span class="lineno">  588</span>            pthread_cond_broadcast(&amp;old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">cond</a>);  <span class="comment">/* Wake waiting threads */</span></div>
<div class="line"><span class="lineno">  589</span>            pthread_mutex_unlock(&amp;old-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno">  590</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  591</span>            req = &amp;(*req)-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a>;</div>
<div class="line"><span class="lineno">  592</span>        }</div>
<div class="line"><span class="lineno">  593</span>    }</div>
<div class="line"><span class="lineno">  594</span>    </div>
<div class="line"><span class="lineno">  595</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  596</span>}</div>
<div class="ttc" id="astructobsws__connection_html_a5be49ce76c72f09948fdf9c520eb133c"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">obsws_connection::requests_mutex</a></div><div class="ttdeci">pthread_mutex_t requests_mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00203">library.c:203</a></div></div>
<div class="ttc" id="astructobsws__connection_html_acc0664cafa773ffe211ffe993c6ac8af"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">obsws_connection::pending_requests</a></div><div class="ttdeci">pending_request_t * pending_requests</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00202">library.c:202</a></div></div>
<div class="ttc" id="astructobsws__response__t_html_ab2b3055a84989889d3de28c2ccfd0dac"><div class="ttname"><a href="../../d2/d1f/structobsws__response__t.html#ab2b3055a84989889d3de28c2ccfd0dac">obsws_response_t::error_message</a></div><div class="ttdeci">char * error_message</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00312">library.h:312</a></div></div>
<div class="ttc" id="astructobsws__response__t_html_abbf2e99faa8fdef1c94bbd174470c821"><div class="ttname"><a href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">obsws_response_t::success</a></div><div class="ttdeci">bool success</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00310">library.h:310</a></div></div>
<div class="ttc" id="astructpending__request_html"><div class="ttname"><a href="../../da/d45/structpending__request.html">pending_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00127">library.c:127</a></div></div>
<div class="ttc" id="astructpending__request_html_a30b4636ccd06e4f775ee0dcc29ba3a69"><div class="ttname"><a href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">pending_request::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00131">library.c:131</a></div></div>
<div class="ttc" id="astructpending__request_html_a49161e43ef29129c11fe643e85338df2"><div class="ttname"><a href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">pending_request::next</a></div><div class="ttdeci">struct pending_request * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00134">library.c:134</a></div></div>
<div class="ttc" id="astructpending__request_html_a4b37104673cb81e3f2825c8f6df372ba"><div class="ttname"><a href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">pending_request::response</a></div><div class="ttdeci">obsws_response_t * response</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00129">library.c:129</a></div></div>
<div class="ttc" id="astructpending__request_html_a619500d05293ec1f654ea803139941de"><div class="ttname"><a href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">pending_request::cond</a></div><div class="ttdeci">pthread_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00132">library.c:132</a></div></div>
<div class="ttc" id="astructpending__request_html_af74dd3c97a064175b9dcf3dbfe3665cc"><div class="ttname"><a href="../../da/d45/structpending__request.html#af74dd3c97a064175b9dcf3dbfe3665cc">pending_request::completed</a></div><div class="ttdeci">bool completed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00130">library.c:130</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a885f22656ee8ca3170a50df0e0d85a4d_icgraph.svg" width="534" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aafc3d1ce3debddcb8e3888c9806e044a" name="aafc3d1ce3debddcb8e3888c9806e044a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafc3d1ce3debddcb8e3888c9806e044a">&#9670;&nbsp;</a></span>create_pending_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a> * create_pending_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>request_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00506">506</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  506</span>                                                                                                   {</div>
<div class="line"><span class="lineno">  507</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *req = calloc(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a>));</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">if</span> (!req) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  509</span>    </div>
<div class="line"><span class="lineno">  510</span>    <span class="comment">/* Copy request ID and ensure null termination */</span></div>
<div class="line"><span class="lineno">  511</span>    strncpy(req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#ae33cc3402bf8463415de7e57eac346af">request_id</a>, request_id, <a class="code hl_define" href="../../d5/d27/library_8c.html#a25b13264018fd1dc7b1f2bbd93bdc7cc">OBSWS_UUID_LENGTH</a> - 1);</div>
<div class="line"><span class="lineno">  512</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#ae33cc3402bf8463415de7e57eac346af">request_id</a>[<a class="code hl_define" href="../../d5/d27/library_8c.html#a25b13264018fd1dc7b1f2bbd93bdc7cc">OBSWS_UUID_LENGTH</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  513</span>    </div>
<div class="line"><span class="lineno">  514</span>    <span class="comment">/* Initialize request structure */</span></div>
<div class="line"><span class="lineno">  515</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a> = calloc(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a>));</div>
<div class="line"><span class="lineno">  516</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#af74dd3c97a064175b9dcf3dbfe3665cc">completed</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  517</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a0fab8de980618cc4e6cea21fbed2eef4">timestamp</a> = time(NULL);</div>
<div class="line"><span class="lineno">  518</span>    pthread_mutex_init(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>, NULL);</div>
<div class="line"><span class="lineno">  519</span>    pthread_cond_init(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">cond</a>, NULL);</div>
<div class="line"><span class="lineno">  520</span>    </div>
<div class="line"><span class="lineno">  521</span>    <span class="comment">/* Add to linked list of pending requests */</span></div>
<div class="line"><span class="lineno">  522</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  523</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a> = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">pending_requests</a>;</div>
<div class="line"><span class="lineno">  524</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">pending_requests</a> = req;</div>
<div class="line"><span class="lineno">  525</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  526</span>    </div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordflow">return</span> req;</div>
<div class="line"><span class="lineno">  528</span>}</div>
<div class="ttc" id="alibrary_8c_html_a25b13264018fd1dc7b1f2bbd93bdc7cc"><div class="ttname"><a href="../../d5/d27/library_8c.html#a25b13264018fd1dc7b1f2bbd93bdc7cc">OBSWS_UUID_LENGTH</a></div><div class="ttdeci">#define OBSWS_UUID_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00049">library.c:49</a></div></div>
<div class="ttc" id="astructobsws__response__t_html"><div class="ttname"><a href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a></div><div class="ttdoc">Response structure for requests to OBS.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00309">library.h:309</a></div></div>
<div class="ttc" id="astructpending__request_html_a0fab8de980618cc4e6cea21fbed2eef4"><div class="ttname"><a href="../../da/d45/structpending__request.html#a0fab8de980618cc4e6cea21fbed2eef4">pending_request::timestamp</a></div><div class="ttdeci">time_t timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00133">library.c:133</a></div></div>
<div class="ttc" id="astructpending__request_html_ae33cc3402bf8463415de7e57eac346af"><div class="ttname"><a href="../../da/d45/structpending__request.html#ae33cc3402bf8463415de7e57eac346af">pending_request::request_id</a></div><div class="ttdeci">char request_id[OBSWS_UUID_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00128">library.c:128</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aafc3d1ce3debddcb8e3888c9806e044a_icgraph.svg" width="632" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a27739efcea1287611c82ff3e8c88d7b7" name="a27739efcea1287611c82ff3e8c88d7b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27739efcea1287611c82ff3e8c88d7b7">&#9670;&nbsp;</a></span>event_thread_func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * event_thread_func </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Background thread function that continuously processes WebSocket events. </p>
<p >Each connection has one background thread dedicated to processing WebSocket messages and timers. The main application thread remains free to make requests and do application work without blocking.</p>
<p >This thread:</p><ol type="1">
<li>Calls lws_service() to pump the libwebsockets event loop (typically blocks for 50ms waiting for events, then processes them and returns)</li>
<li>Periodically cleans up old/timed-out requests</li>
<li>Sends keep-alive pings if configured (to detect dead connections)</li>
<li>Exits gracefully when should_exit flag is set</li>
</ol>
<p >Lifetime: This thread is created in <a class="el" href="../../d5/d27/library_8c.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect()</a> and destroyed in <a class="el" href="../../d5/d27/library_8c.html#aa8389ba6731e01a9426bd921180b7195" title="Disconnect from OBS and clean up connection resources.">obsws_disconnect()</a> using pthread_join(). The should_exit flag is used to signal the thread to stop, which it checks at the start of each loop.</p>
<p >The lws_service() call is the core of this loop. It:</p><ul>
<li>Waits up to 50ms for data from the network using select/poll</li>
<li>If data arrives, invokes lws_callback to notify us</li>
<li>Returns after ~50ms even if no data (so we stay responsive to should_exit)</li>
</ul>
<p >This asynchronous design has several advantages:</p><ul>
<li>App thread isn't blocked waiting for responses</li>
<li>Multiple requests can be in-flight simultaneously</li>
<li>Events can be delivered to callbacks instantly (no polling delay)</li>
<li>Automatic keep-alive pings keep the connection alive through firewalls</li>
</ul>
<p >Memory note: Callbacks invoked from this thread have access to the same connection object as the main thread, hence all the mutexes protecting critical sections. The pending_request_t condition variables synchronize request responses between this thread and application threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>The obsws_connection_t* that this thread services </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always NULL (threads don't return values)</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01131">1131</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1131</span>                                          {</div>
<div class="line"><span class="lineno"> 1132</span>    <a class="code hl_struct" href="../../d5/d88/structobsws__connection.html">obsws_connection_t</a> *conn = (<a class="code hl_struct" href="../../d5/d88/structobsws__connection.html">obsws_connection_t</a> *)arg;</div>
<div class="line"><span class="lineno"> 1133</span>    </div>
<div class="line"><span class="lineno"> 1134</span>    <span class="keywordtype">bool</span> should_continue = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1135</span>    <span class="keywordflow">while</span> (should_continue) {</div>
<div class="line"><span class="lineno"> 1136</span>        <span class="comment">/* Check exit flag with mutex protection */</span></div>
<div class="line"><span class="lineno"> 1137</span>        pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1138</span>        should_continue = !conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a6aa5a0ce7b42fc1cd72385181ca43454">should_exit</a>;</div>
<div class="line"><span class="lineno"> 1139</span>        pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1140</span>        </div>
<div class="line"><span class="lineno"> 1141</span>        <span class="keywordflow">if</span> (!should_continue) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1142</span>        </div>
<div class="line"><span class="lineno"> 1143</span>        <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>) {</div>
<div class="line"><span class="lineno"> 1144</span>            lws_service(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>, 50);</div>
<div class="line"><span class="lineno"> 1145</span>            </div>
<div class="line"><span class="lineno"> 1146</span>            <span class="comment">/* Cleanup old requests periodically */</span></div>
<div class="line"><span class="lineno"> 1147</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a885f22656ee8ca3170a50df0e0d85a4d">cleanup_old_requests</a>(conn);</div>
<div class="line"><span class="lineno"> 1148</span>            </div>
<div class="line"><span class="lineno"> 1149</span>            <span class="comment">/* Handle keep-alive pings */</span></div>
<div class="line"><span class="lineno"> 1150</span>            <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a74ee702373489ff1ea1289e87d50e469">ping_interval_ms</a> &gt; 0 &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a> == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a>) {</div>
<div class="line"><span class="lineno"> 1151</span>                time_t now = time(NULL);</div>
<div class="line"><span class="lineno"> 1152</span>                <span class="keywordflow">if</span> (now - conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a940373a69db859ebc424eb555c86a24c">last_ping_sent</a> &gt;= conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a74ee702373489ff1ea1289e87d50e469">ping_interval_ms</a> / 1000) {</div>
<div class="line"><span class="lineno"> 1153</span>                    <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>) {</div>
<div class="line"><span class="lineno"> 1154</span>                        lws_callback_on_writable(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>);</div>
<div class="line"><span class="lineno"> 1155</span>                    }</div>
<div class="line"><span class="lineno"> 1156</span>                    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a940373a69db859ebc424eb555c86a24c">last_ping_sent</a> = now;</div>
<div class="line"><span class="lineno"> 1157</span>                }</div>
<div class="line"><span class="lineno"> 1158</span>            }</div>
<div class="line"><span class="lineno"> 1159</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1160</span>            <span class="keyword">struct </span>timespec ts = {0, 50000000};  <span class="comment">/* 50ms = 50,000,000 nanoseconds */</span></div>
<div class="line"><span class="lineno"> 1161</span>            nanosleep(&amp;ts, NULL);</div>
<div class="line"><span class="lineno"> 1162</span>        }</div>
<div class="line"><span class="lineno"> 1163</span>    }</div>
<div class="line"><span class="lineno"> 1164</span>    </div>
<div class="line"><span class="lineno"> 1165</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1166</span>}</div>
<div class="ttc" id="alibrary_8c_html_a885f22656ee8ca3170a50df0e0d85a4d"><div class="ttname"><a href="../../d5/d27/library_8c.html#a885f22656ee8ca3170a50df0e0d85a4d">cleanup_old_requests</a></div><div class="ttdeci">static void cleanup_old_requests(obsws_connection_t *conn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00572">library.c:572</a></div></div>
<div class="ttc" id="alibrary_8h_html_a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8"><div class="ttname"><a href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a></div><div class="ttdeci">@ OBSWS_STATE_CONNECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00102">library.h:102</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a74ee702373489ff1ea1289e87d50e469"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a74ee702373489ff1ea1289e87d50e469">obsws_config_t::ping_interval_ms</a></div><div class="ttdeci">uint32_t ping_interval_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00254">library.h:254</a></div></div>
<div class="ttc" id="astructobsws__connection_html"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html">obsws_connection</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00169">library.c:169</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a2f876a0ab0ad0e5e012444a806aa3490"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">obsws_connection::lws_context</a></div><div class="ttdeci">struct lws_context * lws_context</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00178">library.c:178</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a6aa5a0ce7b42fc1cd72385181ca43454"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a6aa5a0ce7b42fc1cd72385181ca43454">obsws_connection::should_exit</a></div><div class="ttdeci">bool should_exit</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00197">library.c:197</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a940373a69db859ebc424eb555c86a24c"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a940373a69db859ebc424eb555c86a24c">obsws_connection::last_ping_sent</a></div><div class="ttdeci">time_t last_ping_sent</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00212">library.c:212</a></div></div>
<div class="ttc" id="astructobsws__connection_html_aa2752abaf5b201277fae73b42c78c8e6"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">obsws_connection::state_mutex</a></div><div class="ttdeci">pthread_mutex_t state_mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00175">library.c:175</a></div></div>
<div class="ttc" id="astructobsws__connection_html_aaa5cf000b991e623632977c379314d89"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">obsws_connection::config</a></div><div class="ttdeci">obsws_config_t config</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00171">library.c:171</a></div></div>
<div class="ttc" id="astructobsws__connection_html_aaf49ac1578fc794ee4b01ccbf9edc35a"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">obsws_connection::wsi</a></div><div class="ttdeci">struct lws * wsi</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00179">library.c:179</a></div></div>
<div class="ttc" id="astructobsws__connection_html_adad7d0fb4880543b1f5b5e897010d814"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">obsws_connection::state</a></div><div class="ttdeci">obsws_state_t state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00174">library.c:174</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a27739efcea1287611c82ff3e8c88d7b7_cgraph.svg" width="364" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a27739efcea1287611c82ff3e8c88d7b7_icgraph.svg" width="323" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6f7f5f47389b537c9dce9f1b328b7f06" name="a6f7f5f47389b537c9dce9f1b328b7f06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f7f5f47389b537c9dce9f1b328b7f06">&#9670;&nbsp;</a></span>find_pending_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a> * find_pending_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>request_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00531">531</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  531</span>                                                                                                 {</div>
<div class="line"><span class="lineno">  532</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  533</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *req = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">pending_requests</a>;</div>
<div class="line"><span class="lineno">  534</span>    </div>
<div class="line"><span class="lineno">  535</span>    <span class="comment">/* Search linked list for matching request ID */</span></div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">while</span> (req) {</div>
<div class="line"><span class="lineno">  537</span>        <span class="keywordflow">if</span> (strcmp(req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#ae33cc3402bf8463415de7e57eac346af">request_id</a>, request_id) == 0) {</div>
<div class="line"><span class="lineno">  538</span>            pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  539</span>            <span class="keywordflow">return</span> req;</div>
<div class="line"><span class="lineno">  540</span>        }</div>
<div class="line"><span class="lineno">  541</span>        req = req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a>;</div>
<div class="line"><span class="lineno">  542</span>    }</div>
<div class="line"><span class="lineno">  543</span>    </div>
<div class="line"><span class="lineno">  544</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  545</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  546</span>}</div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a6f7f5f47389b537c9dce9f1b328b7f06_icgraph.svg" width="818" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="acab761db577bf6b074b4e9be8be845b5" name="acab761db577bf6b074b4e9be8be845b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acab761db577bf6b074b4e9be8be845b5">&#9670;&nbsp;</a></span>generate_auth_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * generate_auth_response </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>salt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>challenge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00437">437</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  437</span>                                                                                                   {</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> secret_hash[SHA256_DIGEST_LENGTH];</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> auth_hash[SHA256_DIGEST_LENGTH];</div>
<div class="line"><span class="lineno">  440</span>    </div>
<div class="line"><span class="lineno">  441</span>    <span class="comment">/* Step 1: Compute secret = base64(sha256(password + salt)) */</span></div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordtype">char</span> *password_salt = malloc(strlen(password) + strlen(salt) + 1);</div>
<div class="line"><span class="lineno">  443</span>    sprintf(password_salt, <span class="stringliteral">&quot;%s%s&quot;</span>, password, salt);</div>
<div class="line"><span class="lineno">  444</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#aaaa872a3d93d0ce3d5d4346f4b1c763e">sha256_hash</a>(password_salt, secret_hash);</div>
<div class="line"><span class="lineno">  445</span>    free(password_salt);</div>
<div class="line"><span class="lineno">  446</span>    </div>
<div class="line"><span class="lineno">  447</span>    <span class="keywordtype">char</span> *secret = <a class="code hl_function" href="../../d5/d27/library_8c.html#aab5c2995d6518ef254538795c00afdbb">base64_encode</a>(secret_hash, SHA256_DIGEST_LENGTH);</div>
<div class="line"><span class="lineno">  448</span>    </div>
<div class="line"><span class="lineno">  449</span>    <span class="comment">/* Step 2: Compute auth response = base64(sha256(secret + challenge)) */</span></div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordtype">char</span> *secret_challenge = malloc(strlen(secret) + strlen(challenge) + 1);</div>
<div class="line"><span class="lineno">  451</span>    sprintf(secret_challenge, <span class="stringliteral">&quot;%s%s&quot;</span>, secret, challenge);</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#aaaa872a3d93d0ce3d5d4346f4b1c763e">sha256_hash</a>(secret_challenge, auth_hash);</div>
<div class="line"><span class="lineno">  453</span>    free(secret_challenge);</div>
<div class="line"><span class="lineno">  454</span>    free(secret);</div>
<div class="line"><span class="lineno">  455</span>    </div>
<div class="line"><span class="lineno">  456</span>    <span class="comment">/* Return the final response, base64-encoded */</span></div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordtype">char</span> *auth_response = <a class="code hl_function" href="../../d5/d27/library_8c.html#aab5c2995d6518ef254538795c00afdbb">base64_encode</a>(auth_hash, SHA256_DIGEST_LENGTH);</div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">return</span> auth_response;</div>
<div class="line"><span class="lineno">  459</span>}</div>
<div class="ttc" id="alibrary_8c_html_aaaa872a3d93d0ce3d5d4346f4b1c763e"><div class="ttname"><a href="../../d5/d27/library_8c.html#aaaa872a3d93d0ce3d5d4346f4b1c763e">sha256_hash</a></div><div class="ttdeci">static void sha256_hash(const char *input, unsigned char *output)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00411">library.c:411</a></div></div>
<div class="ttc" id="alibrary_8c_html_aab5c2995d6518ef254538795c00afdbb"><div class="ttname"><a href="../../d5/d27/library_8c.html#aab5c2995d6518ef254538795c00afdbb">base64_encode</a></div><div class="ttdeci">static char * base64_encode(const unsigned char *input, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00369">library.c:369</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_acab761db577bf6b074b4e9be8be845b5_cgraph.svg" width="364" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_acab761db577bf6b074b4e9be8be845b5_icgraph.svg" width="822" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af79be0fed07182761c923170f4211089" name="af79be0fed07182761c923170f4211089"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79be0fed07182761c923170f4211089">&#9670;&nbsp;</a></span>generate_uuid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void generate_uuid </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uuid_out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00344">344</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  344</span>                                          {</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r1 = rand();</div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r2 = rand();</div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r3 = rand();</div>
<div class="line"><span class="lineno">  348</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r4 = rand();</div>
<div class="line"><span class="lineno">  349</span>    </div>
<div class="line"><span class="lineno">  350</span>    sprintf(uuid_out, <span class="stringliteral">&quot;%08x-%04x-%04x-%04x-%04x%08x&quot;</span>,</div>
<div class="line"><span class="lineno">  351</span>            r1,                          <span class="comment">/* 8 hex digits */</span></div>
<div class="line"><span class="lineno">  352</span>            r2 &amp; 0xFFFF,                <span class="comment">/* 4 hex digits */</span></div>
<div class="line"><span class="lineno">  353</span>            (r3 &amp; 0x0FFF) | 0x4000,     <span class="comment">/* 4 hex digits (set version 4) */</span></div>
<div class="line"><span class="lineno">  354</span>            (r4 &amp; 0x3FFF) | 0x8000,     <span class="comment">/* 4 hex digits (set variant bits) */</span></div>
<div class="line"><span class="lineno">  355</span>            rand() &amp; 0xFFFF,            <span class="comment">/* 4 hex digits */</span></div>
<div class="line"><span class="lineno">  356</span>            (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)rand());       <span class="comment">/* 8 hex digits */</span></div>
<div class="line"><span class="lineno">  357</span>}</div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_af79be0fed07182761c923170f4211089_icgraph.svg" width="568" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac7c18bfa245d7a8582c6e5536cf46532" name="ac7c18bfa245d7a8582c6e5536cf46532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c18bfa245d7a8582c6e5536cf46532">&#9670;&nbsp;</a></span>handle_event_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_event_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cJSON *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle EVENT messages from OBS (real-time notifications). </p>
<p >OBS continuously sends EVENT messages whenever something happens in the application (scene changes, source muted/unmuted, recording started, etc.). These events are only delivered if we subscribed to them in the IDENTIFY message using the eventSubscriptions bitmask.</p>
<p >This function:</p><ol type="1">
<li>Extracts the event type and event data from the JSON</li>
<li>Calls the user's event_callback if one was configured (async event loop)</li>
<li>Updates internal caches (e.g., current scene name on SceneChanged)</li>
</ol>
<p >Important threading note: This is called from the background event_thread, NOT from the main application thread. Therefore:</p><ul>
<li>The event_callback is executed in the event thread context</li>
<li>The callback should not block (keep processing fast)</li>
<li>The callback should not make blocking library calls</li>
<li>The event_data_str parameter is temporary and freed after callback returns</li>
<li>If the callback needs to keep the data, it must copy it</li>
</ul>
<p >Scene caching optimization: We maintain a cache of the currently active scene name in the connection structure. When we see a CurrentProgramSceneChanged event, we update this cache immediately. This avoids the need for the application to call obsws_send_request(..., "GetCurrentProgramScene", ...) repeatedly. The cache is protected by scene_mutex for thread safety.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection that received the event </td></tr>
    <tr><td class="paramname">data</td><td>The parsed JSON "d" field containing eventType and eventData </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 if the event data is malformed</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00786">786</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  786</span>                                                                       {</div>
<div class="line"><span class="lineno">  787</span>    cJSON *event_type = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;eventType&quot;</span>);</div>
<div class="line"><span class="lineno">  788</span>    cJSON *event_data = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;eventData&quot;</span>);</div>
<div class="line"><span class="lineno">  789</span>    </div>
<div class="line"><span class="lineno">  790</span>    <span class="comment">/* DEBUG_MEDIUM: Show event type */</span></div>
<div class="line"><span class="lineno">  791</span>    <span class="keywordflow">if</span> (event_type) {</div>
<div class="line"><span class="lineno">  792</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a>, <span class="stringliteral">&quot;Event received: %s&quot;</span>, event_type-&gt;valuestring);</div>
<div class="line"><span class="lineno">  793</span>    }</div>
<div class="line"><span class="lineno">  794</span>    </div>
<div class="line"><span class="lineno">  795</span>    <span class="keywordflow">if</span> (event_type &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a11caeff695d6174de08bd0ff0e196cd3">event_callback</a>) {</div>
<div class="line"><span class="lineno">  796</span>        <span class="keywordtype">char</span> *event_data_str = event_data ? cJSON_PrintUnformatted(event_data) : NULL;</div>
<div class="line"><span class="lineno">  797</span>        <span class="comment">/* DEBUG_HIGH: Show full event data */</span></div>
<div class="line"><span class="lineno">  798</span>        <span class="keywordflow">if</span> (event_data_str) {</div>
<div class="line"><span class="lineno">  799</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a>, <span class="stringliteral">&quot;Event data: %s&quot;</span>, event_data_str);</div>
<div class="line"><span class="lineno">  800</span>        }</div>
<div class="line"><span class="lineno">  801</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a11caeff695d6174de08bd0ff0e196cd3">event_callback</a>(conn, event_type-&gt;valuestring, event_data_str, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af272f38a8f4ca535939766cebacf0b8f">user_data</a>);</div>
<div class="line"><span class="lineno">  802</span>        <span class="keywordflow">if</span> (event_data_str) free(event_data_str);</div>
<div class="line"><span class="lineno">  803</span>    }</div>
<div class="line"><span class="lineno">  804</span>    </div>
<div class="line"><span class="lineno">  805</span>    <span class="comment">/* Update current scene cache if scene changed */</span></div>
<div class="line"><span class="lineno">  806</span>    <span class="keywordflow">if</span> (event_type &amp;&amp; strcmp(event_type-&gt;valuestring, <span class="stringliteral">&quot;CurrentProgramSceneChanged&quot;</span>) == 0) {</div>
<div class="line"><span class="lineno">  807</span>        cJSON *scene_name = cJSON_GetObjectItem(event_data, <span class="stringliteral">&quot;sceneName&quot;</span>);</div>
<div class="line"><span class="lineno">  808</span>        <span class="keywordflow">if</span> (scene_name) {</div>
<div class="line"><span class="lineno">  809</span>            pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno">  810</span>            free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a>);</div>
<div class="line"><span class="lineno">  811</span>            conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a> = strdup(scene_name-&gt;valuestring);</div>
<div class="line"><span class="lineno">  812</span>            pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno">  813</span>            <span class="comment">/* DEBUG_LOW: Scene changes are important */</span></div>
<div class="line"><span class="lineno">  814</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a50fd66057e634b5bd51441ba3fdeaf50">OBSWS_DEBUG_LOW</a>, <span class="stringliteral">&quot;Scene changed to: %s&quot;</span>, scene_name-&gt;valuestring);</div>
<div class="line"><span class="lineno">  815</span>        }</div>
<div class="line"><span class="lineno">  816</span>    }</div>
<div class="line"><span class="lineno">  817</span>    </div>
<div class="line"><span class="lineno">  818</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  819</span>}</div>
<div class="ttc" id="alibrary_8c_html_a3682ffd7f6175dbc796f5750172c99bf"><div class="ttname"><a href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a></div><div class="ttdeci">static void obsws_debug(obsws_connection_t *conn, obsws_debug_level_t min_level, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00302">library.c:302</a></div></div>
<div class="ttc" id="alibrary_8h_html_a1997a985daa6bfb4117e885d9bb81668a50fd66057e634b5bd51441ba3fdeaf50"><div class="ttname"><a href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a50fd66057e634b5bd51441ba3fdeaf50">OBSWS_DEBUG_LOW</a></div><div class="ttdeci">@ OBSWS_DEBUG_LOW</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00136">library.h:136</a></div></div>
<div class="ttc" id="alibrary_8h_html_a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1"><div class="ttname"><a href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a></div><div class="ttdeci">@ OBSWS_DEBUG_MEDIUM</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00137">library.h:137</a></div></div>
<div class="ttc" id="alibrary_8h_html_a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd"><div class="ttname"><a href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a></div><div class="ttdeci">@ OBSWS_DEBUG_HIGH</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00139">library.h:138</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a11caeff695d6174de08bd0ff0e196cd3"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a11caeff695d6174de08bd0ff0e196cd3">obsws_config_t::event_callback</a></div><div class="ttdeci">obsws_event_callback_t event_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00270">library.h:270</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_af272f38a8f4ca535939766cebacf0b8f"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#af272f38a8f4ca535939766cebacf0b8f">obsws_config_t::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00272">library.h:272</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a4343875c5de5530580e13fb1b528cf35"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">obsws_connection::scene_mutex</a></div><div class="ttdeci">pthread_mutex_t scene_mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00232">library.c:232</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a887874891a0026e6ad2a2ee2c3c7390a"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">obsws_connection::current_scene</a></div><div class="ttdeci">char * current_scene</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00231">library.c:231</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_ac7c18bfa245d7a8582c6e5536cf46532_cgraph.svg" width="346" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_ac7c18bfa245d7a8582c6e5536cf46532_icgraph.svg" width="596" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af183411517ec69b1d59f875fbb0245bd" name="af183411517ec69b1d59f875fbb0245bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af183411517ec69b1d59f875fbb0245bd">&#9670;&nbsp;</a></span>handle_hello_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_hello_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cJSON *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle the initial HELLO handshake message from OBS. </p>
<p >When we first connect to OBS, the server sends a HELLO message containing protocol version information and, if required, an authentication challenge and salt. This function extracts that information and immediately responds with an IDENTIFY message.</p>
<p >The authentication flow (if enabled) works as follows:</p><ol type="1">
<li>Server sends HELLO with a random challenge string and a salt</li>
<li>We compute: secret = base64(SHA256(password + salt))</li>
<li>We compute: response = base64(SHA256(secret + challenge))</li>
<li>We send this response in the IDENTIFY message</li>
<li>If it matches what the server computed, auth succeeds</li>
</ol>
<p >This challenge-response approach has several advantages over sending the raw password:</p><ul>
<li>Password never travels across the network (only the computed response)</li>
<li>If someone captures the network traffic, they can't replay the captured response because it's specific to this challenge (which was random)</li>
<li>Similar to HTTP Digest Authentication (RFC 2617) but simpler</li>
</ul>
<p >The function transitions the connection state from CONNECTING to AUTHENTICATING, sends the IDENTIFY message, and logs any authentication requirements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection structure containing buffers, config, and state </td></tr>
    <tr><td class="paramname">data</td><td>The parsed JSON "d" field from the HELLO message, containing authentication info if auth is required </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error (though errors are logged and connection continues - failure to authenticate will be detected by the server refusing to transition to IDENTIFIED state)</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00636">636</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  636</span>                                                                       {</div>
<div class="line"><span class="lineno">  637</span>    <span class="comment">/* DEBUG_LOW: Basic connection event */</span></div>
<div class="line"><span class="lineno">  638</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a50fd66057e634b5bd51441ba3fdeaf50">OBSWS_DEBUG_LOW</a>, <span class="stringliteral">&quot;Received Hello message from OBS&quot;</span>);</div>
<div class="line"><span class="lineno">  639</span>    </div>
<div class="line"><span class="lineno">  640</span>    cJSON *auth = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;authentication&quot;</span>);</div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordflow">if</span> (auth) {</div>
<div class="line"><span class="lineno">  642</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5ed1411f28d7eb3a4dfaff28096fb2fd">auth_required</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  643</span>        </div>
<div class="line"><span class="lineno">  644</span>        cJSON *challenge = cJSON_GetObjectItem(auth, <span class="stringliteral">&quot;challenge&quot;</span>);</div>
<div class="line"><span class="lineno">  645</span>        cJSON *salt = cJSON_GetObjectItem(auth, <span class="stringliteral">&quot;salt&quot;</span>);</div>
<div class="line"><span class="lineno">  646</span>        </div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordflow">if</span> (challenge &amp;&amp; salt) {</div>
<div class="line"><span class="lineno">  648</span>            conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a99dd8596f842d976297c91a7e101b9f4">challenge</a> = strdup(challenge-&gt;valuestring);</div>
<div class="line"><span class="lineno">  649</span>            conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a172b9304975dc52f9c962e0592f20330">salt</a> = strdup(salt-&gt;valuestring);</div>
<div class="line"><span class="lineno">  650</span>            <span class="comment">/* DEBUG_MEDIUM: Show auth parameters */</span></div>
<div class="line"><span class="lineno">  651</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a>, <span class="stringliteral">&quot;Authentication required - salt: %s, challenge: %s&quot;</span>, </div>
<div class="line"><span class="lineno">  652</span>                     conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a172b9304975dc52f9c962e0592f20330">salt</a>, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a99dd8596f842d976297c91a7e101b9f4">challenge</a>);</div>
<div class="line"><span class="lineno">  653</span>        }</div>
<div class="line"><span class="lineno">  654</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  655</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5ed1411f28d7eb3a4dfaff28096fb2fd">auth_required</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  656</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a50fd66057e634b5bd51441ba3fdeaf50">OBSWS_DEBUG_LOW</a>, <span class="stringliteral">&quot;No authentication required&quot;</span>);</div>
<div class="line"><span class="lineno">  657</span>    }</div>
<div class="line"><span class="lineno">  658</span>    </div>
<div class="line"><span class="lineno">  659</span>    <span class="comment">/* Send Identify message */</span></div>
<div class="line"><span class="lineno">  660</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991ac9c5d9c3aab50d7e6d1d38b1bb7d6d0f">OBSWS_STATE_AUTHENTICATING</a>);</div>
<div class="line"><span class="lineno">  661</span>    </div>
<div class="line"><span class="lineno">  662</span>    cJSON *identify = cJSON_CreateObject();</div>
<div class="line"><span class="lineno">  663</span>    cJSON_AddNumberToObject(identify, <span class="stringliteral">&quot;op&quot;</span>, <a class="code hl_define" href="../../d5/d27/library_8c.html#a9ac9adf7323ec0e886fa7294ef8c387c">OBSWS_OPCODE_IDENTIFY</a>);</div>
<div class="line"><span class="lineno">  664</span>    </div>
<div class="line"><span class="lineno">  665</span>    cJSON *identify_data = cJSON_CreateObject();</div>
<div class="line"><span class="lineno">  666</span>    cJSON_AddNumberToObject(identify_data, <span class="stringliteral">&quot;rpcVersion&quot;</span>, <a class="code hl_define" href="../../d5/d27/library_8c.html#af132d6e679351e32e25e03f0446b9a79">OBSWS_PROTOCOL_VERSION</a>);</div>
<div class="line"><span class="lineno">  667</span>    cJSON_AddNumberToObject(identify_data, <span class="stringliteral">&quot;eventSubscriptions&quot;</span>, <a class="code hl_define" href="../../d5/d27/library_8c.html#a22c0214b5dafa0c23d7c7fe4c0686f7c">OBSWS_EVENT_ALL</a>);</div>
<div class="line"><span class="lineno">  668</span>    </div>
<div class="line"><span class="lineno">  669</span>    <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5ed1411f28d7eb3a4dfaff28096fb2fd">auth_required</a> &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a>) {</div>
<div class="line"><span class="lineno">  670</span>        <span class="comment">/* DEBUG_HIGH: Show password being used */</span></div>
<div class="line"><span class="lineno">  671</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a>, <span class="stringliteral">&quot;Generating auth response with password: &#39;%s&#39;&quot;</span>, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a>);</div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordtype">char</span> *auth_response = <a class="code hl_function" href="../../d5/d27/library_8c.html#acab761db577bf6b074b4e9be8be845b5">generate_auth_response</a>(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a>, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a172b9304975dc52f9c962e0592f20330">salt</a>, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a99dd8596f842d976297c91a7e101b9f4">challenge</a>);</div>
<div class="line"><span class="lineno">  673</span>        <span class="comment">/* DEBUG_MEDIUM: Show generated auth string */</span></div>
<div class="line"><span class="lineno">  674</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a>, <span class="stringliteral">&quot;Generated auth response: &#39;%s&#39;&quot;</span>, auth_response);</div>
<div class="line"><span class="lineno">  675</span>        cJSON_AddStringToObject(identify_data, <span class="stringliteral">&quot;authentication&quot;</span>, auth_response);</div>
<div class="line"><span class="lineno">  676</span>        free(auth_response);</div>
<div class="line"><span class="lineno">  677</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  678</span>        <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5ed1411f28d7eb3a4dfaff28096fb2fd">auth_required</a>) {</div>
<div class="line"><span class="lineno">  679</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Authentication required but no password provided!&quot;</span>);</div>
<div class="line"><span class="lineno">  680</span>        }</div>
<div class="line"><span class="lineno">  681</span>    }</div>
<div class="line"><span class="lineno">  682</span>    </div>
<div class="line"><span class="lineno">  683</span>    cJSON_AddItemToObject(identify, <span class="stringliteral">&quot;d&quot;</span>, identify_data);</div>
<div class="line"><span class="lineno">  684</span>    </div>
<div class="line"><span class="lineno">  685</span>    <span class="keywordtype">char</span> *message = cJSON_PrintUnformatted(identify);</div>
<div class="line"><span class="lineno">  686</span>    cJSON_Delete(identify);</div>
<div class="line"><span class="lineno">  687</span>    </div>
<div class="line"><span class="lineno">  688</span>    <span class="comment">/* DEBUG_HIGH: Show full Identify message */</span></div>
<div class="line"><span class="lineno">  689</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a>, <span class="stringliteral">&quot;Sending Identify message: %s&quot;</span>, message);</div>
<div class="line"><span class="lineno">  690</span>    </div>
<div class="line"><span class="lineno">  691</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">send_mutex</a>);</div>
<div class="line"><span class="lineno">  692</span>    <span class="keywordtype">size_t</span> len = strlen(message);</div>
<div class="line"><span class="lineno">  693</span>    <span class="keywordflow">if</span> (len &lt; conn-&gt;send_buffer_size - LWS_PRE) {</div>
<div class="line"><span class="lineno">  694</span>        memcpy(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a> + LWS_PRE, message, len);</div>
<div class="line"><span class="lineno">  695</span>        <span class="keywordtype">int</span> written = lws_write(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a> + LWS_PRE), len, LWS_WRITE_TEXT);</div>
<div class="line"><span class="lineno">  696</span>        <span class="comment">/* DEBUG_HIGH: Show bytes sent */</span></div>
<div class="line"><span class="lineno">  697</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a>, <span class="stringliteral">&quot;Sent %d bytes (requested %zu)&quot;</span>, written, len);</div>
<div class="line"><span class="lineno">  698</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  699</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Message too large for send buffer: %zu bytes&quot;</span>, len);</div>
<div class="line"><span class="lineno">  700</span>    }</div>
<div class="line"><span class="lineno">  701</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">send_mutex</a>);</div>
<div class="line"><span class="lineno">  702</span>    </div>
<div class="line"><span class="lineno">  703</span>    free(message);</div>
<div class="line"><span class="lineno">  704</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  705</span>}</div>
<div class="ttc" id="alibrary_8c_html_a1d8529feb33753ebb45d896c4c125642"><div class="ttname"><a href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a></div><div class="ttdeci">static void obsws_log(obsws_connection_t *conn, obsws_log_level_t level, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00270">library.c:270</a></div></div>
<div class="ttc" id="alibrary_8c_html_a22c0214b5dafa0c23d7c7fe4c0686f7c"><div class="ttname"><a href="../../d5/d27/library_8c.html#a22c0214b5dafa0c23d7c7fe4c0686f7c">OBSWS_EVENT_ALL</a></div><div class="ttdeci">#define OBSWS_EVENT_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00101">library.c:101</a></div></div>
<div class="ttc" id="alibrary_8c_html_a2f13308e49322d01e479cbe14da7b575"><div class="ttname"><a href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a></div><div class="ttdeci">static void set_connection_state(obsws_connection_t *conn, obsws_state_t new_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00477">library.c:477</a></div></div>
<div class="ttc" id="alibrary_8c_html_a9ac9adf7323ec0e886fa7294ef8c387c"><div class="ttname"><a href="../../d5/d27/library_8c.html#a9ac9adf7323ec0e886fa7294ef8c387c">OBSWS_OPCODE_IDENTIFY</a></div><div class="ttdeci">#define OBSWS_OPCODE_IDENTIFY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00069">library.c:69</a></div></div>
<div class="ttc" id="alibrary_8c_html_acab761db577bf6b074b4e9be8be845b5"><div class="ttname"><a href="../../d5/d27/library_8c.html#acab761db577bf6b074b4e9be8be845b5">generate_auth_response</a></div><div class="ttdeci">static char * generate_auth_response(const char *password, const char *salt, const char *challenge)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00437">library.c:437</a></div></div>
<div class="ttc" id="alibrary_8c_html_af132d6e679351e32e25e03f0446b9a79"><div class="ttname"><a href="../../d5/d27/library_8c.html#af132d6e679351e32e25e03f0446b9a79">OBSWS_PROTOCOL_VERSION</a></div><div class="ttdeci">#define OBSWS_PROTOCOL_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00033">library.c:33</a></div></div>
<div class="ttc" id="alibrary_8h_html_a2fb4e7d7196f39a5ce0e9c71b2d78991ac9c5d9c3aab50d7e6d1d38b1bb7d6d0f"><div class="ttname"><a href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991ac9c5d9c3aab50d7e6d1d38b1bb7d6d0f">OBSWS_STATE_AUTHENTICATING</a></div><div class="ttdeci">@ OBSWS_STATE_AUTHENTICATING</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00101">library.h:101</a></div></div>
<div class="ttc" id="alibrary_8h_html_afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e"><div class="ttname"><a href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a></div><div class="ttdeci">@ OBSWS_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00118">library.h:118</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a53ed762a113bb2a27b3ffab06a5c02ee"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">obsws_config_t::password</a></div><div class="ttdeci">const char * password</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00241">library.h:241</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a14a61d0e27a8cac772ce173dd31d4fb7"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">obsws_connection::send_buffer</a></div><div class="ttdeci">char * send_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00188">library.c:188</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a172b9304975dc52f9c962e0592f20330"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a172b9304975dc52f9c962e0592f20330">obsws_connection::salt</a></div><div class="ttdeci">char * salt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00226">library.c:226</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a5ed1411f28d7eb3a4dfaff28096fb2fd"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a5ed1411f28d7eb3a4dfaff28096fb2fd">obsws_connection::auth_required</a></div><div class="ttdeci">bool auth_required</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00224">library.c:224</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a99dd8596f842d976297c91a7e101b9f4"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a99dd8596f842d976297c91a7e101b9f4">obsws_connection::challenge</a></div><div class="ttdeci">char * challenge</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00225">library.c:225</a></div></div>
<div class="ttc" id="astructobsws__connection_html_afc665d5d6864f038f551e4e7d4aae679"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">obsws_connection::send_mutex</a></div><div class="ttdeci">pthread_mutex_t send_mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00195">library.c:195</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_af183411517ec69b1d59f875fbb0245bd_cgraph.svg" width="607" height="215"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_af183411517ec69b1d59f875fbb0245bd_icgraph.svg" width="591" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aad4174fe2c4665d21ae49896fc25be9e" name="aad4174fe2c4665d21ae49896fc25be9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad4174fe2c4665d21ae49896fc25be9e">&#9670;&nbsp;</a></span>handle_identified_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_identified_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cJSON *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle the IDENTIFIED confirmation message from OBS. </p>
<p >After we send an IDENTIFY message with authentication (or without if auth isn't required), OBS responds with an IDENTIFIED message to confirm that the connection is established and ready for commands. This function marks the connection as fully established, records connection statistics, and resets the reconnection state.</p>
<p >Receiving this message means:</p><ul>
<li>Authentication succeeded (if it was required)</li>
<li>The server has accepted our protocol version</li>
<li>We can now send REQUEST messages and receive EVENT messages</li>
<li>The connection is in a healthy state</li>
</ul>
<p >We take this opportunity to:</p><ol type="1">
<li>Log successful authentication</li>
<li>Transition state to CONNECTED (the only valid way to enter this state)</li>
<li>Record the timestamp of successful connection (for statistics)</li>
<li>Reset the reconnection attempt counter and delay (we're connected!)</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection structure to mark as identified </td></tr>
    <tr><td class="paramname">data</td><td>Unused (the IDENTIFIED message typically has no data payload) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always 0 (this message type should never fail)</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00734">734</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  734</span>                                                                            {</div>
<div class="line"><span class="lineno">  735</span>    (void)data;  <span class="comment">/* Unused parameter */</span></div>
<div class="line"><span class="lineno">  736</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;Successfully authenticated with OBS&quot;</span>);</div>
<div class="line"><span class="lineno">  737</span>    <span class="comment">/* DEBUG_LOW: Authentication success */</span></div>
<div class="line"><span class="lineno">  738</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a50fd66057e634b5bd51441ba3fdeaf50">OBSWS_DEBUG_LOW</a>, <span class="stringliteral">&quot;Identified message received - authentication successful&quot;</span>);</div>
<div class="line"><span class="lineno">  739</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a>);</div>
<div class="line"><span class="lineno">  740</span>    </div>
<div class="line"><span class="lineno">  741</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno">  742</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#a7beeb77349c34e8aee20d09df550f8fb">connected_since</a> = time(NULL);</div>
<div class="line"><span class="lineno">  743</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#a156bc64dad480c853539be79f2276654">reconnect_count</a> = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a3a5cd4d0f5a72d53df87306e5c697377">reconnect_attempts</a>;</div>
<div class="line"><span class="lineno">  744</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno">  745</span>    </div>
<div class="line"><span class="lineno">  746</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a3a5cd4d0f5a72d53df87306e5c697377">reconnect_attempts</a> = 0;</div>
<div class="line"><span class="lineno">  747</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a32b971d76cdd4c2b166ff19135601776">current_reconnect_delay</a> = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a5ccd3a828a3fcad6d6ebedc0324c4aee">reconnect_delay_ms</a>;</div>
<div class="line"><span class="lineno">  748</span>    </div>
<div class="line"><span class="lineno">  749</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  750</span>}</div>
<div class="ttc" id="alibrary_8h_html_afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421"><div class="ttname"><a href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a></div><div class="ttdeci">@ OBSWS_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00120">library.h:120</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a5ccd3a828a3fcad6d6ebedc0324c4aee"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a5ccd3a828a3fcad6d6ebedc0324c4aee">obsws_config_t::reconnect_delay_ms</a></div><div class="ttdeci">uint32_t reconnect_delay_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00262">library.h:262</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a10b9da03b3a1cb3a6ee0e72387915740"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">obsws_connection::stats</a></div><div class="ttdeci">obsws_stats_t stats</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00206">library.c:206</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a32b971d76cdd4c2b166ff19135601776"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a32b971d76cdd4c2b166ff19135601776">obsws_connection::current_reconnect_delay</a></div><div class="ttdeci">uint32_t current_reconnect_delay</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00219">library.c:219</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a3a5cd4d0f5a72d53df87306e5c697377"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a3a5cd4d0f5a72d53df87306e5c697377">obsws_connection::reconnect_attempts</a></div><div class="ttdeci">uint32_t reconnect_attempts</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00218">library.c:218</a></div></div>
<div class="ttc" id="astructobsws__connection_html_ab29e2a357e95b536a2c79b0990614bc5"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">obsws_connection::stats_mutex</a></div><div class="ttdeci">pthread_mutex_t stats_mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00207">library.c:207</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html_a156bc64dad480c853539be79f2276654"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html#a156bc64dad480c853539be79f2276654">obsws_stats_t::reconnect_count</a></div><div class="ttdeci">uint64_t reconnect_count</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00288">library.h:288</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html_a7beeb77349c34e8aee20d09df550f8fb"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html#a7beeb77349c34e8aee20d09df550f8fb">obsws_stats_t::connected_since</a></div><div class="ttdeci">time_t connected_since</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00291">library.h:291</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aad4174fe2c4665d21ae49896fc25be9e_cgraph.svg" width="614" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aad4174fe2c4665d21ae49896fc25be9e_icgraph.svg" width="620" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a046a86e7ba13a054663021594755d54b" name="a046a86e7ba13a054663021594755d54b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046a86e7ba13a054663021594755d54b">&#9670;&nbsp;</a></span>handle_request_response_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_request_response_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cJSON *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle REQUEST_RESPONSE messages from OBS (responses to our commands). </p>
<p >When we send a REQUEST message (via obsws_send_request), OBS processes it and sends back a REQUEST_RESPONSE message with the same requestId that we used. This function matches the response to the pending request, populates the response data, and wakes up the waiting thread.</p>
<p >The async request/response pattern allows the application to send multiple requests without waiting for each response. The flow is:</p><ol type="1">
<li>Application calls obsws_send_request("GetScenes", ...) -&gt; returns immediately</li>
<li>The request is created with a unique UUID and added to pending_requests list</li>
<li>Background thread sends the request to OBS</li>
<li>Background thread waits for response (on condition variable, not busy-polling)</li>
<li>OBS responds with REQUEST_RESPONSE containing the requestId</li>
<li>This function matches it to the pending request</li>
<li>Function sets response-&gt;success, response-&gt;status_code, response-&gt;response_data</li>
<li>Function signals the condition variable to wake the waiting thread</li>
<li>Application thread wakes up with the response ready</li>
</ol>
<p >This is far more efficient than synchronous request/response because:</p><ul>
<li>No blocking wait in the background thread</li>
<li>Multiple requests can be in-flight simultaneously</li>
<li>Doesn't freeze the application while waiting for OBS</li>
<li>Condition variables are more efficient than polling</li>
</ul>
<p >Response structure contains:</p><ul>
<li>success: Did the operation succeed? (not the HTTP status, but "was it valid?")</li>
<li>status_code: The OBS response code (0 = success, &gt;0 = error)</li>
<li>response_data: JSON string with the actual result (e.g., scene list)</li>
<li>error_message: If something failed, what was the reason?</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection that received the response </td></tr>
    <tr><td class="paramname">data</td><td>The parsed JSON "d" field containing requestId, requestStatus, etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 if the response is malformed (e.g., missing requestId)</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00859">859</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  859</span>                                                                                  {</div>
<div class="line"><span class="lineno">  860</span>    cJSON *request_id = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;requestId&quot;</span>);</div>
<div class="line"><span class="lineno">  861</span>    <span class="keywordflow">if</span> (!request_id) <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  862</span>    </div>
<div class="line"><span class="lineno">  863</span>    <span class="comment">/* DEBUG_MEDIUM: Show request ID being processed */</span></div>
<div class="line"><span class="lineno">  864</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a>, <span class="stringliteral">&quot;Response received for request: %s&quot;</span>, request_id-&gt;valuestring);</div>
<div class="line"><span class="lineno">  865</span>    </div>
<div class="line"><span class="lineno">  866</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *req = <a class="code hl_function" href="../../d5/d27/library_8c.html#a6f7f5f47389b537c9dce9f1b328b7f06">find_pending_request</a>(conn, request_id-&gt;valuestring);</div>
<div class="line"><span class="lineno">  867</span>    <span class="keywordflow">if</span> (!req) {</div>
<div class="line"><span class="lineno">  868</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a7db7d387859c4786d8eb303e5bbafef7">OBSWS_LOG_WARNING</a>, <span class="stringliteral">&quot;Received response for unknown request: %s&quot;</span>, request_id-&gt;valuestring);</div>
<div class="line"><span class="lineno">  869</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  870</span>    }</div>
<div class="line"><span class="lineno">  871</span>    </div>
<div class="line"><span class="lineno">  872</span>    pthread_mutex_lock(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno">  873</span>    </div>
<div class="line"><span class="lineno">  874</span>    cJSON *request_status = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;requestStatus&quot;</span>);</div>
<div class="line"><span class="lineno">  875</span>    <span class="keywordflow">if</span> (request_status) {</div>
<div class="line"><span class="lineno">  876</span>        cJSON *result = cJSON_GetObjectItem(request_status, <span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><span class="lineno">  877</span>        cJSON *code = cJSON_GetObjectItem(request_status, <span class="stringliteral">&quot;code&quot;</span>);</div>
<div class="line"><span class="lineno">  878</span>        cJSON *comment = cJSON_GetObjectItem(request_status, <span class="stringliteral">&quot;comment&quot;</span>);</div>
<div class="line"><span class="lineno">  879</span>        </div>
<div class="line"><span class="lineno">  880</span>        req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a> = result ? result-&gt;valueint : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  881</span>        req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#a1221f1002dd30535f6d4fdda1ba6abd0">status_code</a> = code ? code-&gt;valueint : -1;</div>
<div class="line"><span class="lineno">  882</span>        </div>
<div class="line"><span class="lineno">  883</span>        <span class="keywordflow">if</span> (comment) {</div>
<div class="line"><span class="lineno">  884</span>            req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#ab2b3055a84989889d3de28c2ccfd0dac">error_message</a> = strdup(comment-&gt;valuestring);</div>
<div class="line"><span class="lineno">  885</span>        }</div>
<div class="line"><span class="lineno">  886</span>    }</div>
<div class="line"><span class="lineno">  887</span>    </div>
<div class="line"><span class="lineno">  888</span>    cJSON *response_data = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;responseData&quot;</span>);</div>
<div class="line"><span class="lineno">  889</span>    <span class="keywordflow">if</span> (response_data) {</div>
<div class="line"><span class="lineno">  890</span>        req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#a696a1179e1d40c6c31136999846d5902">response_data</a> = cJSON_PrintUnformatted(response_data);</div>
<div class="line"><span class="lineno">  891</span>    }</div>
<div class="line"><span class="lineno">  892</span>    </div>
<div class="line"><span class="lineno">  893</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#af74dd3c97a064175b9dcf3dbfe3665cc">completed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  894</span>    pthread_cond_broadcast(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">cond</a>);</div>
<div class="line"><span class="lineno">  895</span>    pthread_mutex_unlock(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno">  896</span>    </div>
<div class="line"><span class="lineno">  897</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  898</span>}</div>
<div class="ttc" id="alibrary_8c_html_a6f7f5f47389b537c9dce9f1b328b7f06"><div class="ttname"><a href="../../d5/d27/library_8c.html#a6f7f5f47389b537c9dce9f1b328b7f06">find_pending_request</a></div><div class="ttdeci">static pending_request_t * find_pending_request(obsws_connection_t *conn, const char *request_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00531">library.c:531</a></div></div>
<div class="ttc" id="alibrary_8h_html_afbee3b6b991e705309ea19fd5fb0bff9a7db7d387859c4786d8eb303e5bbafef7"><div class="ttname"><a href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a7db7d387859c4786d8eb303e5bbafef7">OBSWS_LOG_WARNING</a></div><div class="ttdeci">@ OBSWS_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00119">library.h:119</a></div></div>
<div class="ttc" id="astructobsws__response__t_html_a1221f1002dd30535f6d4fdda1ba6abd0"><div class="ttname"><a href="../../d2/d1f/structobsws__response__t.html#a1221f1002dd30535f6d4fdda1ba6abd0">obsws_response_t::status_code</a></div><div class="ttdeci">int status_code</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00311">library.h:311</a></div></div>
<div class="ttc" id="astructobsws__response__t_html_a696a1179e1d40c6c31136999846d5902"><div class="ttname"><a href="../../d2/d1f/structobsws__response__t.html#a696a1179e1d40c6c31136999846d5902">obsws_response_t::response_data</a></div><div class="ttdeci">char * response_data</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00313">library.h:313</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a046a86e7ba13a054663021594755d54b_cgraph.svg" width="408" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a046a86e7ba13a054663021594755d54b_icgraph.svg" width="608" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0672da971c7e38224df11c34ef612f02" name="a0672da971c7e38224df11c34ef612f02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0672da971c7e38224df11c34ef612f02">&#9670;&nbsp;</a></span>handle_websocket_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_websocket_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Route incoming WebSocket messages to appropriate handlers based on opcode. </p>
<p >Every message from OBS contains an "op" field (opcode) that identifies the message type. This function:</p><ol type="1">
<li>Parses the JSON to extract the opcode and data</li>
<li>Routes to the appropriate handler function based on the opcode</li>
<li>Updates statistics (messages_received, bytes_received)</li>
</ol>
<p >The OBS WebSocket protocol uses these opcodes:</p><ul>
<li>HELLO (0): Server greeting with auth info - handled by handle_hello_message</li>
<li>IDENTIFY (1): Client auth - we send this, don't receive it</li>
<li>IDENTIFIED (2): Auth success - handled by handle_identified_message</li>
<li>EVENT (5): Real-time notifications - handled by handle_event_message</li>
<li>REQUEST_RESPONSE (7): Command responses - handled by handle_request_response_message</li>
<li>Other opcodes like REIDENTIFY, batch operations: not currently handled</li>
</ul>
<p >This is one of the most critical functions in the library because it's in the hot path of message processing. Performance matters here. We keep it lightweight and defer heavy processing to the specific handlers.</p>
<p >Error handling is conservative: malformed JSON or missing opcode doesn't crash the connection, it just logs and continues. This allows us to be resilient to protocol variations or corruption.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection that received the message </td></tr>
    <tr><td class="paramname">message</td><td>Pointer to the raw message data (not null-terminated) </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes in the message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on parse error (does not disconnect)</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00932">932</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  932</span>                                                                                               {</div>
<div class="line"><span class="lineno">  933</span>    <span class="comment">/* DEBUG_HIGH: Show full message content */</span></div>
<div class="line"><span class="lineno">  934</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a>, <span class="stringliteral">&quot;Received message (%zu bytes): %.*s&quot;</span>, len, (<span class="keywordtype">int</span>)len, message);</div>
<div class="line"><span class="lineno">  935</span>    </div>
<div class="line"><span class="lineno">  936</span>    cJSON *json = cJSON_ParseWithLength(message, len);</div>
<div class="line"><span class="lineno">  937</span>    <span class="keywordflow">if</span> (!json) {</div>
<div class="line"><span class="lineno">  938</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to parse JSON message&quot;</span>);</div>
<div class="line"><span class="lineno">  939</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  940</span>    }</div>
<div class="line"><span class="lineno">  941</span>    </div>
<div class="line"><span class="lineno">  942</span>    cJSON *op = cJSON_GetObjectItem(json, <span class="stringliteral">&quot;op&quot;</span>);</div>
<div class="line"><span class="lineno">  943</span>    cJSON *data = cJSON_GetObjectItem(json, <span class="stringliteral">&quot;d&quot;</span>);</div>
<div class="line"><span class="lineno">  944</span>    </div>
<div class="line"><span class="lineno">  945</span>    <span class="keywordflow">if</span> (!op) {</div>
<div class="line"><span class="lineno">  946</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Message missing &#39;op&#39; field&quot;</span>);</div>
<div class="line"><span class="lineno">  947</span>        cJSON_Delete(json);</div>
<div class="line"><span class="lineno">  948</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  949</span>    }</div>
<div class="line"><span class="lineno">  950</span>    </div>
<div class="line"><span class="lineno">  951</span>    <span class="comment">/* DEBUG_MEDIUM: Show opcode being processed */</span></div>
<div class="line"><span class="lineno">  952</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a>, <span class="stringliteral">&quot;Processing opcode: %d&quot;</span>, op-&gt;valueint);</div>
<div class="line"><span class="lineno">  953</span>    </div>
<div class="line"><span class="lineno">  954</span>    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><span class="lineno">  955</span>    <span class="keywordflow">switch</span> (op-&gt;valueint) {</div>
<div class="line"><span class="lineno">  956</span>        <span class="keywordflow">case</span> <a class="code hl_define" href="../../d5/d27/library_8c.html#a28228f50fc25972b87ebb3c5ca36104a">OBSWS_OPCODE_HELLO</a>:</div>
<div class="line"><span class="lineno">  957</span>            result = <a class="code hl_function" href="../../d5/d27/library_8c.html#af183411517ec69b1d59f875fbb0245bd">handle_hello_message</a>(conn, data);</div>
<div class="line"><span class="lineno">  958</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  959</span>        <span class="keywordflow">case</span> <a class="code hl_define" href="../../d5/d27/library_8c.html#a35815ef87e52f4956dcc02be7a3a7d95">OBSWS_OPCODE_IDENTIFIED</a>:</div>
<div class="line"><span class="lineno">  960</span>            result = <a class="code hl_function" href="../../d5/d27/library_8c.html#aad4174fe2c4665d21ae49896fc25be9e">handle_identified_message</a>(conn, data);</div>
<div class="line"><span class="lineno">  961</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  962</span>        <span class="keywordflow">case</span> <a class="code hl_define" href="../../d5/d27/library_8c.html#a60741575bd0daca62cfc088a7d3908c6">OBSWS_OPCODE_EVENT</a>:</div>
<div class="line"><span class="lineno">  963</span>            result = <a class="code hl_function" href="../../d5/d27/library_8c.html#ac7c18bfa245d7a8582c6e5536cf46532">handle_event_message</a>(conn, data);</div>
<div class="line"><span class="lineno">  964</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  965</span>        <span class="keywordflow">case</span> <a class="code hl_define" href="../../d5/d27/library_8c.html#ae6ce9e236045c545c7786292abb8bed2">OBSWS_OPCODE_REQUEST_RESPONSE</a>:</div>
<div class="line"><span class="lineno">  966</span>            result = <a class="code hl_function" href="../../d5/d27/library_8c.html#a046a86e7ba13a054663021594755d54b">handle_request_response_message</a>(conn, data);</div>
<div class="line"><span class="lineno">  967</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  968</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  969</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9aa69cfac4b3acbd5968bfab9ef5759cd2">OBSWS_LOG_DEBUG</a>, <span class="stringliteral">&quot;Unhandled opcode: %d&quot;</span>, op-&gt;valueint);</div>
<div class="line"><span class="lineno">  970</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  971</span>    }</div>
<div class="line"><span class="lineno">  972</span>    </div>
<div class="line"><span class="lineno">  973</span>    cJSON_Delete(json);</div>
<div class="line"><span class="lineno">  974</span>    </div>
<div class="line"><span class="lineno">  975</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno">  976</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#acbd2023849f8049c705c4cbff567119b">messages_received</a>++;</div>
<div class="line"><span class="lineno">  977</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#ae29f4f06b24960c6802aefd3f1627b4f">bytes_received</a> += len;</div>
<div class="line"><span class="lineno">  978</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno">  979</span>    </div>
<div class="line"><span class="lineno">  980</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  981</span>}</div>
<div class="ttc" id="alibrary_8c_html_a046a86e7ba13a054663021594755d54b"><div class="ttname"><a href="../../d5/d27/library_8c.html#a046a86e7ba13a054663021594755d54b">handle_request_response_message</a></div><div class="ttdeci">static int handle_request_response_message(obsws_connection_t *conn, cJSON *data)</div><div class="ttdoc">Handle REQUEST_RESPONSE messages from OBS (responses to our commands).</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00859">library.c:859</a></div></div>
<div class="ttc" id="alibrary_8c_html_a28228f50fc25972b87ebb3c5ca36104a"><div class="ttname"><a href="../../d5/d27/library_8c.html#a28228f50fc25972b87ebb3c5ca36104a">OBSWS_OPCODE_HELLO</a></div><div class="ttdeci">#define OBSWS_OPCODE_HELLO</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00068">library.c:68</a></div></div>
<div class="ttc" id="alibrary_8c_html_a35815ef87e52f4956dcc02be7a3a7d95"><div class="ttname"><a href="../../d5/d27/library_8c.html#a35815ef87e52f4956dcc02be7a3a7d95">OBSWS_OPCODE_IDENTIFIED</a></div><div class="ttdeci">#define OBSWS_OPCODE_IDENTIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00070">library.c:70</a></div></div>
<div class="ttc" id="alibrary_8c_html_a60741575bd0daca62cfc088a7d3908c6"><div class="ttname"><a href="../../d5/d27/library_8c.html#a60741575bd0daca62cfc088a7d3908c6">OBSWS_OPCODE_EVENT</a></div><div class="ttdeci">#define OBSWS_OPCODE_EVENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00072">library.c:72</a></div></div>
<div class="ttc" id="alibrary_8c_html_aad4174fe2c4665d21ae49896fc25be9e"><div class="ttname"><a href="../../d5/d27/library_8c.html#aad4174fe2c4665d21ae49896fc25be9e">handle_identified_message</a></div><div class="ttdeci">static int handle_identified_message(obsws_connection_t *conn, cJSON *data)</div><div class="ttdoc">Handle the IDENTIFIED confirmation message from OBS.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00734">library.c:734</a></div></div>
<div class="ttc" id="alibrary_8c_html_ac7c18bfa245d7a8582c6e5536cf46532"><div class="ttname"><a href="../../d5/d27/library_8c.html#ac7c18bfa245d7a8582c6e5536cf46532">handle_event_message</a></div><div class="ttdeci">static int handle_event_message(obsws_connection_t *conn, cJSON *data)</div><div class="ttdoc">Handle EVENT messages from OBS (real-time notifications).</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00786">library.c:786</a></div></div>
<div class="ttc" id="alibrary_8c_html_ae6ce9e236045c545c7786292abb8bed2"><div class="ttname"><a href="../../d5/d27/library_8c.html#ae6ce9e236045c545c7786292abb8bed2">OBSWS_OPCODE_REQUEST_RESPONSE</a></div><div class="ttdeci">#define OBSWS_OPCODE_REQUEST_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00074">library.c:74</a></div></div>
<div class="ttc" id="alibrary_8c_html_af183411517ec69b1d59f875fbb0245bd"><div class="ttname"><a href="../../d5/d27/library_8c.html#af183411517ec69b1d59f875fbb0245bd">handle_hello_message</a></div><div class="ttdeci">static int handle_hello_message(obsws_connection_t *conn, cJSON *data)</div><div class="ttdoc">Handle the initial HELLO handshake message from OBS.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00636">library.c:636</a></div></div>
<div class="ttc" id="alibrary_8h_html_afbee3b6b991e705309ea19fd5fb0bff9aa69cfac4b3acbd5968bfab9ef5759cd2"><div class="ttname"><a href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9aa69cfac4b3acbd5968bfab9ef5759cd2">OBSWS_LOG_DEBUG</a></div><div class="ttdeci">@ OBSWS_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00122">library.h:121</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html_acbd2023849f8049c705c4cbff567119b"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html#acbd2023849f8049c705c4cbff567119b">obsws_stats_t::messages_received</a></div><div class="ttdeci">uint64_t messages_received</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00285">library.h:285</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html_ae29f4f06b24960c6802aefd3f1627b4f"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html#ae29f4f06b24960c6802aefd3f1627b4f">obsws_stats_t::bytes_received</a></div><div class="ttdeci">uint64_t bytes_received</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00287">library.h:287</a></div></div>
</div><!-- fragment --><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a0672da971c7e38224df11c34ef612f02_cgraph.svg" width="892" height="436"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a0672da971c7e38224df11c34ef612f02_icgraph.svg" width="372" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac5c31c457dc3042f85a620d7998ebeee" name="ac5c31c457dc3042f85a620d7998ebeee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5c31c457dc3042f85a620d7998ebeee">&#9670;&nbsp;</a></span>lws_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lws_callback </td>
          <td>(</td>
          <td class="paramtype">struct lws *&#160;</td>
          <td class="paramname"><em>wsi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum lws_callback_reasons&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>libwebsockets callback - routes WebSocket events to our handlers. </p>
<p >libwebsockets is an event-driven WebSocket library. It calls this callback function whenever something happens (connection established, data received, connection closed, etc.). The "reason" parameter identifies what happened.</p>
<p >We handle these key reasons:</p><ul>
<li>LWS_CALLBACK_CLIENT_ESTABLISHED: TCP/WebSocket handshake complete, ready for messages</li>
<li>LWS_CALLBACK_CLIENT_RECEIVE: Data arrived from OBS</li>
<li>LWS_CALLBACK_CLIENT_WRITEABLE: Socket is writable (less common with our design)</li>
<li>LWS_CALLBACK_CLIENT_CONNECTION_ERROR: Connection failed (network error, bad host, etc.)</li>
<li>LWS_CALLBACK_CLIENT_CLOSED: Connection closed normally</li>
<li>LWS_CALLBACK_WSI_DESTROY: Cleanup callback</li>
</ul>
<p >Important: This callback is called from the background event_thread, not the main application thread. So it must be thread-safe and not block.</p>
<p >Message assembly: OBS WebSocket messages might arrive fragmented (multiple packets). We accumulate them in recv_buffer and check lws_is_final_fragment() to know when a complete message has arrived. Only then do we parse it.</p>
<p >Error handling: Connection errors and receive buffer overflows are logged but don't crash. We just transition to ERROR state and let the connection cleanup/reconnection logic handle recovery.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wsi</td><td>The WebSocket instance (provided by libwebsockets) </td></tr>
    <tr><td class="paramname">reason</td><td>The callback reason (LWS_CALLBACK_*) </td></tr>
    <tr><td class="paramname">user</td><td>Our connection pointer (registered at context creation) </td></tr>
    <tr><td class="paramname">in</td><td>Incoming data (for LWS_CALLBACK_CLIENT_RECEIVE) </td></tr>
    <tr><td class="paramname">len</td><td>Size of incoming data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, -1 for error (affects connection handling)</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01022">1022</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1023</span>                                                         {</div>
<div class="line"><span class="lineno"> 1024</span>    <a class="code hl_struct" href="../../d5/d88/structobsws__connection.html">obsws_connection_t</a> *conn = (<a class="code hl_struct" href="../../d5/d88/structobsws__connection.html">obsws_connection_t</a> *)user;</div>
<div class="line"><span class="lineno"> 1025</span>    </div>
<div class="line"><span class="lineno"> 1026</span>    <span class="keywordflow">switch</span> (reason) {</div>
<div class="line"><span class="lineno"> 1027</span>        <span class="keywordflow">case</span> LWS_CALLBACK_CLIENT_ESTABLISHED:</div>
<div class="line"><span class="lineno"> 1028</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;WebSocket connection established&quot;</span>);</div>
<div class="line"><span class="lineno"> 1029</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991a88276a1a9f595735a2b242f0eab1524a">OBSWS_STATE_CONNECTING</a>);</div>
<div class="line"><span class="lineno"> 1030</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1031</span>            </div>
<div class="line"><span class="lineno"> 1032</span>        <span class="keywordflow">case</span> LWS_CALLBACK_CLIENT_RECEIVE:</div>
<div class="line"><span class="lineno"> 1033</span>            <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">recv_buffer_used</a> + len &lt; conn-&gt;recv_buffer_size) {</div>
<div class="line"><span class="lineno"> 1034</span>                memcpy(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">recv_buffer</a> + conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">recv_buffer_used</a>, in, len);</div>
<div class="line"><span class="lineno"> 1035</span>                conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">recv_buffer_used</a> += len;</div>
<div class="line"><span class="lineno"> 1036</span>                </div>
<div class="line"><span class="lineno"> 1037</span>                <span class="keywordflow">if</span> (lws_is_final_fragment(wsi)) {</div>
<div class="line"><span class="lineno"> 1038</span>                    <a class="code hl_function" href="../../d5/d27/library_8c.html#a0672da971c7e38224df11c34ef612f02">handle_websocket_message</a>(conn, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">recv_buffer</a>, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">recv_buffer_used</a>);</div>
<div class="line"><span class="lineno"> 1039</span>                    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">recv_buffer_used</a> = 0;</div>
<div class="line"><span class="lineno"> 1040</span>                }</div>
<div class="line"><span class="lineno"> 1041</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1042</span>                <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Receive buffer overflow&quot;</span>);</div>
<div class="line"><span class="lineno"> 1043</span>                conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">recv_buffer_used</a> = 0;</div>
<div class="line"><span class="lineno"> 1044</span>            }</div>
<div class="line"><span class="lineno"> 1045</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1046</span>            </div>
<div class="line"><span class="lineno"> 1047</span>        <span class="keywordflow">case</span> LWS_CALLBACK_CLIENT_WRITEABLE:</div>
<div class="line"><span class="lineno"> 1048</span>            <span class="comment">/* Handle queued sends if needed */</span></div>
<div class="line"><span class="lineno"> 1049</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1050</span>            </div>
<div class="line"><span class="lineno"> 1051</span>        <span class="keywordflow">case</span> LWS_CALLBACK_CLIENT_CONNECTION_ERROR:</div>
<div class="line"><span class="lineno"> 1052</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Connection error: %s&quot;</span>, in ? (<span class="keywordtype">char</span> *)in : <span class="stringliteral">&quot;unknown&quot;</span>);</div>
<div class="line"><span class="lineno"> 1053</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991ae13bce21841139a7510b1c8b10a694ac">OBSWS_STATE_ERROR</a>);</div>
<div class="line"><span class="lineno"> 1054</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1055</span>            </div>
<div class="line"><span class="lineno"> 1056</span>        <span class="keywordflow">case</span> LWS_CALLBACK_CLIENT_CLOSED:</div>
<div class="line"><span class="lineno"> 1057</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;WebSocket connection closed (reason in &#39;in&#39; param)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1058</span>            <span class="keywordflow">if</span> (in &amp;&amp; len &gt; 0) {</div>
<div class="line"><span class="lineno"> 1059</span>                <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;Close reason: %.*s&quot;</span>, (<span class="keywordtype">int</span>)len, (<span class="keywordtype">char</span>*)in);</div>
<div class="line"><span class="lineno"> 1060</span>            }</div>
<div class="line"><span class="lineno"> 1061</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a2f13308e49322d01e479cbe14da7b575">set_connection_state</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991af973d2b8b0a498d0bbffb40ccab1ef2d">OBSWS_STATE_DISCONNECTED</a>);</div>
<div class="line"><span class="lineno"> 1062</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1063</span>            </div>
<div class="line"><span class="lineno"> 1064</span>        <span class="keywordflow">case</span> LWS_CALLBACK_WSI_DESTROY:</div>
<div class="line"><span class="lineno"> 1065</span>            conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a> = NULL;</div>
<div class="line"><span class="lineno"> 1066</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1067</span>            </div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1069</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1070</span>    }</div>
<div class="line"><span class="lineno"> 1071</span>    </div>
<div class="line"><span class="lineno"> 1072</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1073</span>}</div>
<div class="ttc" id="alibrary_8c_html_a0672da971c7e38224df11c34ef612f02"><div class="ttname"><a href="../../d5/d27/library_8c.html#a0672da971c7e38224df11c34ef612f02">handle_websocket_message</a></div><div class="ttdeci">static int handle_websocket_message(obsws_connection_t *conn, const char *message, size_t len)</div><div class="ttdoc">Route incoming WebSocket messages to appropriate handlers based on opcode.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00932">library.c:932</a></div></div>
<div class="ttc" id="alibrary_8h_html_a2fb4e7d7196f39a5ce0e9c71b2d78991a88276a1a9f595735a2b242f0eab1524a"><div class="ttname"><a href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991a88276a1a9f595735a2b242f0eab1524a">OBSWS_STATE_CONNECTING</a></div><div class="ttdeci">@ OBSWS_STATE_CONNECTING</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00100">library.h:100</a></div></div>
<div class="ttc" id="alibrary_8h_html_a2fb4e7d7196f39a5ce0e9c71b2d78991ae13bce21841139a7510b1c8b10a694ac"><div class="ttname"><a href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991ae13bce21841139a7510b1c8b10a694ac">OBSWS_STATE_ERROR</a></div><div class="ttdeci">@ OBSWS_STATE_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00104">library.h:103</a></div></div>
<div class="ttc" id="alibrary_8h_html_a2fb4e7d7196f39a5ce0e9c71b2d78991af973d2b8b0a498d0bbffb40ccab1ef2d"><div class="ttname"><a href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991af973d2b8b0a498d0bbffb40ccab1ef2d">OBSWS_STATE_DISCONNECTED</a></div><div class="ttdeci">@ OBSWS_STATE_DISCONNECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00099">library.h:99</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a74838edd16f7d8d3d75c772f85d9f7df"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a74838edd16f7d8d3d75c772f85d9f7df">obsws_connection::recv_buffer_used</a></div><div class="ttdeci">size_t recv_buffer_used</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00186">library.c:186</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a89f2bbc96729ab308290da8959534d18"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">obsws_connection::recv_buffer</a></div><div class="ttdeci">char * recv_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00184">library.c:184</a></div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_ac5c31c457dc3042f85a620d7998ebeee_cgraph.svg" width="1046" height="500"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad3afe1c77e8b8f26a8281186379790a1" name="ad3afe1c77e8b8f26a8281186379790a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3afe1c77e8b8f26a8281186379790a1">&#9670;&nbsp;</a></span>obsws_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obsws_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean up library resources. </p>
<p >Cleanup the OBS WebSocket library.</p>
<p >Call this when you're done with the library to deallocate OpenSSL resources. This is a counterpart to <a class="el" href="../../dd/d08/library_8h.html#aff3d6c035330741df84552800c0d0124" title="Initialize the OBS WebSocket library.">obsws_init()</a>.</p>
<p >Important: Make sure all obsws_connection_t objects have been disconnected and freed via <a class="el" href="../../dd/d08/library_8h.html#aa8389ba6731e01a9426bd921180b7195" title="Disconnect and destroy a connection.">obsws_disconnect()</a> before calling this. If not, you might have dangling references and resource leaks.</p>
<p >Thread safety: This function is thread-safe and idempotent (safe to call multiple times). It checks g_library_initialized before doing anything.</p>
<p >Note: This is optional on program exit because the OS will clean up memory anyway. But it's good practice for:</p><ul>
<li>Library consumers that need clean shutdown</li>
<li>Memory leak detectors / Valgrind tests</li>
<li>Programs that unload the library</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#aff3d6c035330741df84552800c0d0124" title="Initialize the OBS WebSocket library.">obsws_init</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01237">1237</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1237</span>                         {</div>
<div class="line"><span class="lineno"> 1238</span>    pthread_mutex_lock(&amp;<a class="code hl_variable" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a>);</div>
<div class="line"><span class="lineno"> 1239</span>    </div>
<div class="line"><span class="lineno"> 1240</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a>) {</div>
<div class="line"><span class="lineno"> 1241</span>        pthread_mutex_unlock(&amp;<a class="code hl_variable" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a>);</div>
<div class="line"><span class="lineno"> 1242</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1243</span>    }</div>
<div class="line"><span class="lineno"> 1244</span>    </div>
<div class="line"><span class="lineno"> 1245</span>    EVP_cleanup();</div>
<div class="line"><span class="lineno"> 1246</span>    <a class="code hl_variable" href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1247</span>    </div>
<div class="line"><span class="lineno"> 1248</span>    pthread_mutex_unlock(&amp;<a class="code hl_variable" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a>);</div>
<div class="line"><span class="lineno"> 1249</span>}</div>
<div class="ttc" id="alibrary_8c_html_a5c573cf80a65ed908b966420c4a5d7d2"><div class="ttname"><a href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a></div><div class="ttdeci">static bool g_library_initialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00251">library.c:251</a></div></div>
<div class="ttc" id="alibrary_8c_html_ad5f633670e2eea3285c1867570a33cbc"><div class="ttname"><a href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a></div><div class="ttdeci">static pthread_mutex_t g_init_mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00254">library.c:254</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f1c69172bbf706ac225b718797d30c6" name="a1f1c69172bbf706ac225b718797d30c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f1c69172bbf706ac225b718797d30c6">&#9670;&nbsp;</a></span>obsws_config_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obsws_config_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a connection configuration structure with safe defaults. </p>
<p >Create a default configuration structure with reasonable defaults.</p>
<p >Before calling <a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect()</a>, you create an <a class="el" href="../../dc/de7/structobsws__config__t.html" title="Connection configuration structure.">obsws_config_t</a> structure with the connection parameters. This function initializes that structure with sensible defaults so you only need to change what's different for your use case.</p>
<p >Default values set:</p><ul>
<li>port: 4455 (OBS WebSocket v5 default port)</li>
<li>use_ssl: false (OBS uses ws://, not wss://)</li>
<li>connect_timeout_ms: 5000 (5 seconds to connect)</li>
<li>recv_timeout_ms: 5000 (5 seconds to receive each message)</li>
<li>send_timeout_ms: 5000 (5 seconds to send each message)</li>
<li>ping_interval_ms: 10000 (send ping every 10 seconds)</li>
<li>ping_timeout_ms: 5000 (expect pong within 5 seconds)</li>
<li>auto_reconnect: true (reconnect automatically if connection drops)</li>
<li>reconnect_delay_ms: 1000 (start with 1 second delay)</li>
<li>max_reconnect_delay_ms: 30000 (max wait is 30 seconds)</li>
<li>max_reconnect_attempts: 0 (infinite attempts)</li>
</ul>
<p >After calling this, you typically set:</p><ul>
<li>config.host = "localhost" (where OBS is running)</li>
<li>config.password = "your_password" (if OBS has auth enabled)</li>
<li>config.event_callback = your_callback_func (to receive events)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Pointer to structure to initialize (must not be NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01367">1367</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1367</span>                                               {</div>
<div class="line"><span class="lineno"> 1368</span>    memset(config, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a>));</div>
<div class="line"><span class="lineno"> 1369</span>    </div>
<div class="line"><span class="lineno"> 1370</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a7355cf2fb949f6d4391b6c2c605c9073">port</a> = 4455;</div>
<div class="line"><span class="lineno"> 1371</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a1070992d75f19a3fd4567754d37b9290">use_ssl</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1372</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#ab7ca748ce58419a7c8b6b6dc440d3387">connect_timeout_ms</a> = 5000;</div>
<div class="line"><span class="lineno"> 1373</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a6439a4274026273ba5fb9786c90daa93">recv_timeout_ms</a> = 5000;</div>
<div class="line"><span class="lineno"> 1374</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a5e99af1526aaa66f76b71c3948b5b294">send_timeout_ms</a> = 5000;</div>
<div class="line"><span class="lineno"> 1375</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a74ee702373489ff1ea1289e87d50e469">ping_interval_ms</a> = 10000;</div>
<div class="line"><span class="lineno"> 1376</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a806599d35ea8d3fc9c7140e76adf1c1a">ping_timeout_ms</a> = 5000;</div>
<div class="line"><span class="lineno"> 1377</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a5be1729ffbc28b3e036315f06e80a7a8">auto_reconnect</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1378</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a5ccd3a828a3fcad6d6ebedc0324c4aee">reconnect_delay_ms</a> = 1000;</div>
<div class="line"><span class="lineno"> 1379</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#ae4f46d4b683af271b1ba69e335fb7e3c">max_reconnect_delay_ms</a> = 30000;</div>
<div class="line"><span class="lineno"> 1380</span>    config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a1aff4f0ff9ac25c5d63772eb91d443ac">max_reconnect_attempts</a> = 0; <span class="comment">/* Infinite */</span></div>
<div class="line"><span class="lineno"> 1381</span>}</div>
<div class="ttc" id="astructobsws__config__t_html"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a></div><div class="ttdoc">Connection configuration structure.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00237">library.h:237</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a1070992d75f19a3fd4567754d37b9290"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a1070992d75f19a3fd4567754d37b9290">obsws_config_t::use_ssl</a></div><div class="ttdeci">bool use_ssl</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00242">library.h:242</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a1aff4f0ff9ac25c5d63772eb91d443ac"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a1aff4f0ff9ac25c5d63772eb91d443ac">obsws_config_t::max_reconnect_attempts</a></div><div class="ttdeci">uint32_t max_reconnect_attempts</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00264">library.h:264</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a5be1729ffbc28b3e036315f06e80a7a8"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a5be1729ffbc28b3e036315f06e80a7a8">obsws_config_t::auto_reconnect</a></div><div class="ttdeci">bool auto_reconnect</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00261">library.h:261</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a5e99af1526aaa66f76b71c3948b5b294"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a5e99af1526aaa66f76b71c3948b5b294">obsws_config_t::send_timeout_ms</a></div><div class="ttdeci">uint32_t send_timeout_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00249">library.h:249</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a6439a4274026273ba5fb9786c90daa93"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a6439a4274026273ba5fb9786c90daa93">obsws_config_t::recv_timeout_ms</a></div><div class="ttdeci">uint32_t recv_timeout_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00248">library.h:248</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a7355cf2fb949f6d4391b6c2c605c9073"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a7355cf2fb949f6d4391b6c2c605c9073">obsws_config_t::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00240">library.h:240</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a806599d35ea8d3fc9c7140e76adf1c1a"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a806599d35ea8d3fc9c7140e76adf1c1a">obsws_config_t::ping_timeout_ms</a></div><div class="ttdeci">uint32_t ping_timeout_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00255">library.h:255</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_ab7ca748ce58419a7c8b6b6dc440d3387"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#ab7ca748ce58419a7c8b6b6dc440d3387">obsws_config_t::connect_timeout_ms</a></div><div class="ttdeci">uint32_t connect_timeout_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00247">library.h:247</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_ae4f46d4b683af271b1ba69e335fb7e3c"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#ae4f46d4b683af271b1ba69e335fb7e3c">obsws_config_t::max_reconnect_delay_ms</a></div><div class="ttdeci">uint32_t max_reconnect_delay_ms</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00263">library.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ed7225961f0989acb31ebbd9c099626" name="a7ed7225961f0989acb31ebbd9c099626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed7225961f0989acb31ebbd9c099626">&#9670;&nbsp;</a></span>obsws_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> * obsws_connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establish a connection to OBS. </p>
<p >This is the main entry point for using the library. You provide a configuration structure (initialized with obsws_config_init and then customized), and this function connects to OBS, authenticates if needed, and spawns a background thread to handle incoming messages and events.</p>
<p >The function returns immediately - it doesn't wait for the connection to complete. Instead, it:</p><ol type="1">
<li>Creates a connection structure with the provided config</li>
<li>Allocates buffers for sending and receiving messages</li>
<li>Creates a libwebsockets context and connects to OBS</li>
<li>Spawns a background event_thread to process WebSocket messages</li>
<li>Returns the connection handle</li>
</ol>
<p >Connection states: The connection progresses through states:</p><ul>
<li>DISCONNECTED -&gt; CONNECTING (TCP handshake, WebSocket upgrade)</li>
<li>CONNECTING -&gt; AUTHENTICATING (receive HELLO, send IDENTIFY)</li>
<li>AUTHENTICATING -&gt; CONNECTED (receive IDENTIFIED)</li>
</ul>
<p >You don't have to wait for CONNECTED state before calling obsws_send_request, but requests sent while not connected will return OBSWS_ERROR_NOT_CONNECTED.</p>
<p >Memory ownership: The connection structure is allocated and owned by this function. You must free it by calling <a class="el" href="../../d5/d27/library_8c.html#aa8389ba6731e01a9426bd921180b7195" title="Disconnect from OBS and clean up connection resources.">obsws_disconnect()</a>. Don't free it directly with free() - that will cause memory leaks (threads won't be cleaned up properly).</p>
<p >Error cases:</p><ul>
<li>NULL config or config-&gt;host: Returns NULL</li>
<li>libwebsockets context creation fails: Returns NULL and logs error</li>
<li>Network connection fails: Returns valid pointer but connection stays in ERROR state</li>
<li>Bad password: Returns valid pointer but stays in AUTHENTICATING (never reaches CONNECTED)</li>
</ul>
<p >Note: This function calls <a class="el" href="../../d5/d27/library_8c.html#aff3d6c035330741df84552800c0d0124" title="Initialize the libwsv5 library.">obsws_init()</a> automatically if the library isn't already initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Pointer to initialized <a class="el" href="../../dc/de7/structobsws__config__t.html" title="Connection configuration structure.">obsws_config_t</a> with connection parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new connection handle, or NULL if creation failed</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d27/library_8c.html#aa8389ba6731e01a9426bd921180b7195" title="Disconnect from OBS and clean up connection resources.">obsws_disconnect</a>, <a class="el" href="../../d5/d27/library_8c.html#a61a10e31041532a9da0c1c1993f84a79" title="Get the current connection state.">obsws_get_state</a>, <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01425">1425</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1425</span>                                                                {</div>
<div class="line"><span class="lineno"> 1426</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a>) {</div>
<div class="line"><span class="lineno"> 1427</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#aff3d6c035330741df84552800c0d0124">obsws_init</a>();</div>
<div class="line"><span class="lineno"> 1428</span>    }</div>
<div class="line"><span class="lineno"> 1429</span>    </div>
<div class="line"><span class="lineno"> 1430</span>    <span class="keywordflow">if</span> (!config || !config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a>) {</div>
<div class="line"><span class="lineno"> 1431</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1432</span>    }</div>
<div class="line"><span class="lineno"> 1433</span>    </div>
<div class="line"><span class="lineno"> 1434</span>    <a class="code hl_struct" href="../../d5/d88/structobsws__connection.html">obsws_connection_t</a> *conn = calloc(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d5/d88/structobsws__connection.html">obsws_connection_t</a>));</div>
<div class="line"><span class="lineno"> 1435</span>    <span class="keywordflow">if</span> (!conn) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1436</span>    </div>
<div class="line"><span class="lineno"> 1437</span>    <span class="comment">/* Copy configuration */</span></div>
<div class="line"><span class="lineno"> 1438</span>    memcpy(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>, config, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../dc/de7/structobsws__config__t.html">obsws_config_t</a>));</div>
<div class="line"><span class="lineno"> 1439</span>    <span class="keywordflow">if</span> (config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a>) conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a> = strdup(config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a>);</div>
<div class="line"><span class="lineno"> 1440</span>    <span class="keywordflow">if</span> (config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a>) conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a> = strdup(config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a>);</div>
<div class="line"><span class="lineno"> 1441</span>    </div>
<div class="line"><span class="lineno"> 1442</span>    <span class="comment">/* Initialize mutexes */</span></div>
<div class="line"><span class="lineno"> 1443</span>    pthread_mutex_init(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>, NULL);</div>
<div class="line"><span class="lineno"> 1444</span>    pthread_mutex_init(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">send_mutex</a>, NULL);</div>
<div class="line"><span class="lineno"> 1445</span>    pthread_mutex_init(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>, NULL);</div>
<div class="line"><span class="lineno"> 1446</span>    pthread_mutex_init(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>, NULL);</div>
<div class="line"><span class="lineno"> 1447</span>    pthread_mutex_init(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>, NULL);</div>
<div class="line"><span class="lineno"> 1448</span>    </div>
<div class="line"><span class="lineno"> 1449</span>    <span class="comment">/* Allocate buffers */</span></div>
<div class="line"><span class="lineno"> 1450</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ac3cdc6c4de9ae6aed16d3aac13effe78">recv_buffer_size</a> = <a class="code hl_define" href="../../d5/d27/library_8c.html#a665c5272405e81329a26d2db1a7d5d97">OBSWS_DEFAULT_BUFFER_SIZE</a>;</div>
<div class="line"><span class="lineno"> 1451</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">recv_buffer</a> = malloc(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ac3cdc6c4de9ae6aed16d3aac13effe78">recv_buffer_size</a>);</div>
<div class="line"><span class="lineno"> 1452</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a60f4507eac7295e16ece7c2a97c910d6">send_buffer_size</a> = <a class="code hl_define" href="../../d5/d27/library_8c.html#a665c5272405e81329a26d2db1a7d5d97">OBSWS_DEFAULT_BUFFER_SIZE</a>;</div>
<div class="line"><span class="lineno"> 1453</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a> = malloc(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a60f4507eac7295e16ece7c2a97c910d6">send_buffer_size</a>);</div>
<div class="line"><span class="lineno"> 1454</span>    </div>
<div class="line"><span class="lineno"> 1455</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a> = <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991af973d2b8b0a498d0bbffb40ccab1ef2d">OBSWS_STATE_DISCONNECTED</a>;</div>
<div class="line"><span class="lineno"> 1456</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a32b971d76cdd4c2b166ff19135601776">current_reconnect_delay</a> = config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a5ccd3a828a3fcad6d6ebedc0324c4aee">reconnect_delay_ms</a>;</div>
<div class="line"><span class="lineno"> 1457</span>    </div>
<div class="line"><span class="lineno"> 1458</span>    <span class="comment">/* Create libwebsockets context */</span></div>
<div class="line"><span class="lineno"> 1459</span>    <span class="keyword">struct </span>lws_context_creation_info info;</div>
<div class="line"><span class="lineno"> 1460</span>    memset(&amp;info, 0, <span class="keyword">sizeof</span>(info));</div>
<div class="line"><span class="lineno"> 1461</span>    </div>
<div class="line"><span class="lineno"> 1462</span>    info.port = CONTEXT_PORT_NO_LISTEN;</div>
<div class="line"><span class="lineno"> 1463</span>    info.protocols = <a class="code hl_variable" href="../../d5/d27/library_8c.html#ad34f3c7a416fe0d9311efdc5715410e1">protocols</a>;</div>
<div class="line"><span class="lineno"> 1464</span>    info.gid = -1;</div>
<div class="line"><span class="lineno"> 1465</span>    info.uid = -1;</div>
<div class="line"><span class="lineno"> 1466</span>    info.options = LWS_SERVER_OPTION_DO_SSL_GLOBAL_INIT;</div>
<div class="line"><span class="lineno"> 1467</span>    </div>
<div class="line"><span class="lineno"> 1468</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a> = lws_create_context(&amp;info);</div>
<div class="line"><span class="lineno"> 1469</span>    <span class="keywordflow">if</span> (!conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>) {</div>
<div class="line"><span class="lineno"> 1470</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create libwebsockets context&quot;</span>);</div>
<div class="line"><span class="lineno"> 1471</span>        free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">recv_buffer</a>);</div>
<div class="line"><span class="lineno"> 1472</span>        free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a>);</div>
<div class="line"><span class="lineno"> 1473</span>        free(conn);</div>
<div class="line"><span class="lineno"> 1474</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1475</span>    }</div>
<div class="line"><span class="lineno"> 1476</span>    </div>
<div class="line"><span class="lineno"> 1477</span>    <span class="comment">/* Connect to OBS */</span></div>
<div class="line"><span class="lineno"> 1478</span>    <span class="keyword">struct </span>lws_client_connect_info ccinfo;</div>
<div class="line"><span class="lineno"> 1479</span>    memset(&amp;ccinfo, 0, <span class="keyword">sizeof</span>(ccinfo));</div>
<div class="line"><span class="lineno"> 1480</span>    </div>
<div class="line"><span class="lineno"> 1481</span>    ccinfo.context = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>;</div>
<div class="line"><span class="lineno"> 1482</span>    ccinfo.address = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a>;</div>
<div class="line"><span class="lineno"> 1483</span>    ccinfo.port = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a7355cf2fb949f6d4391b6c2c605c9073">port</a>;</div>
<div class="line"><span class="lineno"> 1484</span>    ccinfo.path = <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 1485</span>    ccinfo.host = ccinfo.address;</div>
<div class="line"><span class="lineno"> 1486</span>    ccinfo.origin = ccinfo.address;</div>
<div class="line"><span class="lineno"> 1487</span>    ccinfo.protocol = <a class="code hl_variable" href="../../d5/d27/library_8c.html#ad34f3c7a416fe0d9311efdc5715410e1">protocols</a>[0].name;</div>
<div class="line"><span class="lineno"> 1488</span>    ccinfo.userdata = conn;</div>
<div class="line"><span class="lineno"> 1489</span>    </div>
<div class="line"><span class="lineno"> 1490</span>    <span class="keywordflow">if</span> (config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a1070992d75f19a3fd4567754d37b9290">use_ssl</a>) {</div>
<div class="line"><span class="lineno"> 1491</span>        ccinfo.ssl_connection = LCCSCF_USE_SSL;</div>
<div class="line"><span class="lineno"> 1492</span>    }</div>
<div class="line"><span class="lineno"> 1493</span>    </div>
<div class="line"><span class="lineno"> 1494</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a> = lws_client_connect_via_info(&amp;ccinfo);</div>
<div class="line"><span class="lineno"> 1495</span>    <span class="keywordflow">if</span> (!conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>) {</div>
<div class="line"><span class="lineno"> 1496</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9a6a2a374e4af0446011df30bfd09e329e">OBSWS_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initiate connection&quot;</span>);</div>
<div class="line"><span class="lineno"> 1497</span>        lws_context_destroy(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>);</div>
<div class="line"><span class="lineno"> 1498</span>        free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">recv_buffer</a>);</div>
<div class="line"><span class="lineno"> 1499</span>        free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a>);</div>
<div class="line"><span class="lineno"> 1500</span>        free(conn);</div>
<div class="line"><span class="lineno"> 1501</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1502</span>    }</div>
<div class="line"><span class="lineno"> 1503</span>    </div>
<div class="line"><span class="lineno"> 1504</span>    <span class="comment">/* Start event thread - protect flags with mutex */</span></div>
<div class="line"><span class="lineno"> 1505</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1506</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afbc2be09cbcbbe17561e400babd084e2">thread_running</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1507</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a6aa5a0ce7b42fc1cd72385181ca43454">should_exit</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1508</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1509</span>    </div>
<div class="line"><span class="lineno"> 1510</span>    pthread_create(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a160a7f93e6caf0da1bc2f4dbe48fbb41">event_thread</a>, NULL, <a class="code hl_function" href="../../d5/d27/library_8c.html#a27739efcea1287611c82ff3e8c88d7b7">event_thread_func</a>, conn);</div>
<div class="line"><span class="lineno"> 1511</span>    </div>
<div class="line"><span class="lineno"> 1512</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;Connecting to OBS at %s:%d&quot;</span>, config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a>, config-&gt;<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a7355cf2fb949f6d4391b6c2c605c9073">port</a>);</div>
<div class="line"><span class="lineno"> 1513</span>    </div>
<div class="line"><span class="lineno"> 1514</span>    <span class="keywordflow">return</span> conn;</div>
<div class="line"><span class="lineno"> 1515</span>}</div>
<div class="ttc" id="alibrary_8c_html_a27739efcea1287611c82ff3e8c88d7b7"><div class="ttname"><a href="../../d5/d27/library_8c.html#a27739efcea1287611c82ff3e8c88d7b7">event_thread_func</a></div><div class="ttdeci">static void * event_thread_func(void *arg)</div><div class="ttdoc">Background thread function that continuously processes WebSocket events.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01131">library.c:1131</a></div></div>
<div class="ttc" id="alibrary_8c_html_a665c5272405e81329a26d2db1a7d5d97"><div class="ttname"><a href="../../d5/d27/library_8c.html#a665c5272405e81329a26d2db1a7d5d97">OBSWS_DEFAULT_BUFFER_SIZE</a></div><div class="ttdeci">#define OBSWS_DEFAULT_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00039">library.c:39</a></div></div>
<div class="ttc" id="alibrary_8c_html_ad34f3c7a416fe0d9311efdc5715410e1"><div class="ttname"><a href="../../d5/d27/library_8c.html#ad34f3c7a416fe0d9311efdc5715410e1">protocols</a></div><div class="ttdeci">static const struct lws_protocols protocols[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01075">library.c:1075</a></div></div>
<div class="ttc" id="alibrary_8c_html_aff3d6c035330741df84552800c0d0124"><div class="ttname"><a href="../../d5/d27/library_8c.html#aff3d6c035330741df84552800c0d0124">obsws_init</a></div><div class="ttdeci">obsws_error_t obsws_init(void)</div><div class="ttdoc">Initialize the libwsv5 library.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01196">library.c:1196</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_af632161e8b6cf2d7c1baf7fc80859d48"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">obsws_config_t::host</a></div><div class="ttdeci">const char * host</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00239">library.h:239</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a160a7f93e6caf0da1bc2f4dbe48fbb41"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a160a7f93e6caf0da1bc2f4dbe48fbb41">obsws_connection::event_thread</a></div><div class="ttdeci">pthread_t event_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00194">library.c:194</a></div></div>
<div class="ttc" id="astructobsws__connection_html_a60f4507eac7295e16ece7c2a97c910d6"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#a60f4507eac7295e16ece7c2a97c910d6">obsws_connection::send_buffer_size</a></div><div class="ttdeci">size_t send_buffer_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00189">library.c:189</a></div></div>
<div class="ttc" id="astructobsws__connection_html_ac3cdc6c4de9ae6aed16d3aac13effe78"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#ac3cdc6c4de9ae6aed16d3aac13effe78">obsws_connection::recv_buffer_size</a></div><div class="ttdeci">size_t recv_buffer_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00185">library.c:185</a></div></div>
<div class="ttc" id="astructobsws__connection_html_afbc2be09cbcbbe17561e400babd084e2"><div class="ttname"><a href="../../d5/d88/structobsws__connection.html#afbc2be09cbcbbe17561e400babd084e2">obsws_connection::thread_running</a></div><div class="ttdeci">bool thread_running</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00196">library.c:196</a></div></div>
</div><!-- fragment --><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a7ed7225961f0989acb31ebbd9c099626_cgraph.svg" width="534" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3682ffd7f6175dbc796f5750172c99bf" name="a3682ffd7f6175dbc796f5750172c99bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3682ffd7f6175dbc796f5750172c99bf">&#9670;&nbsp;</a></span>obsws_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void obsws_debug </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a>&#160;</td>
          <td class="paramname"><em>min_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00302">302</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  302</span>                                                                                                          {</div>
<div class="line"><span class="lineno">  303</span>    <span class="comment">/* Only output if global debug level is at or above the minimum for this message */</span></div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/d27/library_8c.html#abf3a9f2c8c4082f1e6b67daddd8a5931">g_debug_level</a> &lt; min_level) {</div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  306</span>    }</div>
<div class="line"><span class="lineno">  307</span>    </div>
<div class="line"><span class="lineno">  308</span>    <span class="comment">/* Format with a larger buffer for JSON and other verbose output */</span></div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordtype">char</span> message[4096];</div>
<div class="line"><span class="lineno">  310</span>    va_list args;</div>
<div class="line"><span class="lineno">  311</span>    va_start(args, format);</div>
<div class="line"><span class="lineno">  312</span>    vsnprintf(message, <span class="keyword">sizeof</span>(message), format, args);</div>
<div class="line"><span class="lineno">  313</span>    va_end(args);</div>
<div class="line"><span class="lineno">  314</span>    </div>
<div class="line"><span class="lineno">  315</span>    <span class="comment">/* Route through the callback as DEBUG-level logs */</span></div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordflow">if</span> (conn &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a14b921ef2d0ad722bd6020da6a708136">log_callback</a>) {</div>
<div class="line"><span class="lineno">  317</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a14b921ef2d0ad722bd6020da6a708136">log_callback</a>(<a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9aa69cfac4b3acbd5968bfab9ef5759cd2">OBSWS_LOG_DEBUG</a>, message, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af272f38a8f4ca535939766cebacf0b8f">user_data</a>);</div>
<div class="line"><span class="lineno">  318</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  319</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *debug_level_str[] = {<span class="stringliteral">&quot;NONE&quot;</span>, <span class="stringliteral">&quot;LOW&quot;</span>, <span class="stringliteral">&quot;MED&quot;</span>, <span class="stringliteral">&quot;HIGH&quot;</span>};</div>
<div class="line"><span class="lineno">  320</span>        fprintf(stderr, <span class="stringliteral">&quot;[DEBUG-%s] %s\n&quot;</span>, debug_level_str[min_level], message);</div>
<div class="line"><span class="lineno">  321</span>    }</div>
<div class="line"><span class="lineno">  322</span>}</div>
<div class="ttc" id="alibrary_8c_html_abf3a9f2c8c4082f1e6b67daddd8a5931"><div class="ttname"><a href="../../d5/d27/library_8c.html#abf3a9f2c8c4082f1e6b67daddd8a5931">g_debug_level</a></div><div class="ttdeci">static obsws_debug_level_t g_debug_level</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00253">library.c:253</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a14b921ef2d0ad722bd6020da6a708136"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a14b921ef2d0ad722bd6020da6a708136">obsws_config_t::log_callback</a></div><div class="ttdeci">obsws_log_callback_t log_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00269">library.h:269</a></div></div>
</div><!-- fragment --><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a3682ffd7f6175dbc796f5750172c99bf_icgraph.svg" width="779" height="451"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa8389ba6731e01a9426bd921180b7195" name="aa8389ba6731e01a9426bd921180b7195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8389ba6731e01a9426bd921180b7195">&#9670;&nbsp;</a></span>obsws_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obsws_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect from OBS and clean up connection resources. </p>
<p >Disconnect and destroy a connection.</p>
<p >This is the counterpart to <a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect()</a>. It cleanly shuts down the connection, stops the background event thread, and frees all allocated resources.</p>
<p >The function performs these steps:</p><ol type="1">
<li>Signal the event_thread to stop by setting should_exit flag</li>
<li>Wait for the event_thread to actually exit using pthread_join()</li>
<li>Send a normal WebSocket close frame to OBS (if connected)</li>
<li>Destroy the libwebsockets context</li>
<li>Free all pending requests (they won't get responses now, but don't leak memory)</li>
<li>Free buffers, config, authentication data</li>
<li>Destroy all mutexes and condition variables</li>
<li>Free the connection structure</li>
</ol>
<p >After calling this, the connection pointer is invalid. Don't use it again.</p>
<p >Safe to call multiple times: If you call it twice, the second call will be a no-op (because conn will be NULL).</p>
<p >Safe to call even if connection never fully established: If you disconnect while in CONNECTING or AUTHENTICATING state, everything is still cleaned up.</p>
<p >Important: This function blocks until the event_thread exits. If you have a callback that's blocked, this will deadlock. Make sure your callbacks don't block!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection to close (can be NULL - safe to call)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01549">1549</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1549</span>                                                {</div>
<div class="line"><span class="lineno"> 1550</span>    <span class="keywordflow">if</span> (!conn) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1551</span>    </div>
<div class="line"><span class="lineno"> 1552</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;Disconnecting from OBS&quot;</span>);</div>
<div class="line"><span class="lineno"> 1553</span>    </div>
<div class="line"><span class="lineno"> 1554</span>    <span class="comment">/* Stop event thread - protect flag with mutex */</span></div>
<div class="line"><span class="lineno"> 1555</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1556</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a6aa5a0ce7b42fc1cd72385181ca43454">should_exit</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1557</span>    <span class="keywordtype">bool</span> thread_was_running = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afbc2be09cbcbbe17561e400babd084e2">thread_running</a>;</div>
<div class="line"><span class="lineno"> 1558</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1559</span>    </div>
<div class="line"><span class="lineno"> 1560</span>    <span class="keywordflow">if</span> (thread_was_running) {</div>
<div class="line"><span class="lineno"> 1561</span>        pthread_join(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a160a7f93e6caf0da1bc2f4dbe48fbb41">event_thread</a>, NULL);</div>
<div class="line"><span class="lineno"> 1562</span>    }</div>
<div class="line"><span class="lineno"> 1563</span>    </div>
<div class="line"><span class="lineno"> 1564</span>    <span class="comment">/* Close WebSocket - only if connected */</span></div>
<div class="line"><span class="lineno"> 1565</span>    <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a> &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a> == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a>) {</div>
<div class="line"><span class="lineno"> 1566</span>        lws_close_reason(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>, LWS_CLOSE_STATUS_NORMAL, NULL, 0);</div>
<div class="line"><span class="lineno"> 1567</span>    }</div>
<div class="line"><span class="lineno"> 1568</span>    </div>
<div class="line"><span class="lineno"> 1569</span>    <span class="comment">/* Cleanup libwebsockets */</span></div>
<div class="line"><span class="lineno"> 1570</span>    <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>) {</div>
<div class="line"><span class="lineno"> 1571</span>        lws_context_destroy(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a2f876a0ab0ad0e5e012444a806aa3490">lws_context</a>);</div>
<div class="line"><span class="lineno"> 1572</span>    }</div>
<div class="line"><span class="lineno"> 1573</span>    </div>
<div class="line"><span class="lineno"> 1574</span>    <span class="comment">/* Free pending requests */</span></div>
<div class="line"><span class="lineno"> 1575</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno"> 1576</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *req = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">pending_requests</a>;</div>
<div class="line"><span class="lineno"> 1577</span>    <span class="keywordflow">while</span> (req) {</div>
<div class="line"><span class="lineno"> 1578</span>        <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *next = req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a>;</div>
<div class="line"><span class="lineno"> 1579</span>        <span class="keywordflow">if</span> (req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>) {</div>
<div class="line"><span class="lineno"> 1580</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>);</div>
<div class="line"><span class="lineno"> 1581</span>        }</div>
<div class="line"><span class="lineno"> 1582</span>        pthread_mutex_destroy(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno"> 1583</span>        pthread_cond_destroy(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">cond</a>);</div>
<div class="line"><span class="lineno"> 1584</span>        free(req);</div>
<div class="line"><span class="lineno"> 1585</span>        req = next;</div>
<div class="line"><span class="lineno"> 1586</span>    }</div>
<div class="line"><span class="lineno"> 1587</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno"> 1588</span>    </div>
<div class="line"><span class="lineno"> 1589</span>    <span class="comment">/* Free resources */</span></div>
<div class="line"><span class="lineno"> 1590</span>    free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a89f2bbc96729ab308290da8959534d18">recv_buffer</a>);</div>
<div class="line"><span class="lineno"> 1591</span>    free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a>);</div>
<div class="line"><span class="lineno"> 1592</span>    free((<span class="keywordtype">char</span> *)conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af632161e8b6cf2d7c1baf7fc80859d48">host</a>);</div>
<div class="line"><span class="lineno"> 1593</span>    free((<span class="keywordtype">char</span> *)conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a53ed762a113bb2a27b3ffab06a5c02ee">password</a>);</div>
<div class="line"><span class="lineno"> 1594</span>    free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a99dd8596f842d976297c91a7e101b9f4">challenge</a>);</div>
<div class="line"><span class="lineno"> 1595</span>    free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a172b9304975dc52f9c962e0592f20330">salt</a>);</div>
<div class="line"><span class="lineno"> 1596</span>    free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a>);</div>
<div class="line"><span class="lineno"> 1597</span>    </div>
<div class="line"><span class="lineno"> 1598</span>    <span class="comment">/* Destroy mutexes */</span></div>
<div class="line"><span class="lineno"> 1599</span>    pthread_mutex_destroy(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1600</span>    pthread_mutex_destroy(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">send_mutex</a>);</div>
<div class="line"><span class="lineno"> 1601</span>    pthread_mutex_destroy(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno"> 1602</span>    pthread_mutex_destroy(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno"> 1603</span>    pthread_mutex_destroy(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 1604</span>    </div>
<div class="line"><span class="lineno"> 1605</span>    free(conn);</div>
<div class="line"><span class="lineno"> 1606</span>}</div>
<div class="ttc" id="alibrary_8c_html_a53067e61dc0ddcf1134d46b275d7ce6b"><div class="ttname"><a href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a></div><div class="ttdeci">void obsws_response_free(obsws_response_t *response)</div><div class="ttdoc">Free a response object previously allocated by obsws_send_request().</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02195">library.c:2195</a></div></div>
</div><!-- fragment --><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aa8389ba6731e01a9426bd921180b7195_cgraph.svg" width="362" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a39534944f30eaed9a0f2d7de19be0c3e" name="a39534944f30eaed9a0f2d7de19be0c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39534944f30eaed9a0f2d7de19be0c3e">&#9670;&nbsp;</a></span>obsws_error_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * obsws_error_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a>&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert an error code to a human-readable string. </p>
<p >Utility function for error reporting and logging. Returns a brief English description of each error code.</p>
<p ><b>Never returns NULL</b> Unknown error codes return "Unknown error", so it's always safe to use the returned pointer without NULL checks.</p>
<p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> err = <a class="code hl_function" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(...);</div>
<div class="line"><span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>) {</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Error: %s\\n&quot;</span>, <a class="code hl_function" href="../../dd/d08/library_8h.html#a39534944f30eaed9a0f2d7de19be0c3e">obsws_error_string</a>(err));</div>
<div class="line">}</div>
<div class="ttc" id="alibrary_8h_html_a39534944f30eaed9a0f2d7de19be0c3e"><div class="ttname"><a href="../../dd/d08/library_8h.html#a39534944f30eaed9a0f2d7de19be0c3e">obsws_error_string</a></div><div class="ttdeci">const char * obsws_error_string(obsws_error_t error)</div><div class="ttdoc">Convert an error code to a human-readable string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02229">library.c:2229</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a></div><div class="ttdeci">obsws_error_t</div><div class="ttdoc">Error codes returned by library functions.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00051">library.h:51</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a></div><div class="ttdeci">@ OBSWS_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00052">library.h:52</a></div></div>
<div class="ttc" id="alibrary_8h_html_af2fd7f8dd928e03b38a3e2c5b5745417"><div class="ttname"><a href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a></div><div class="ttdeci">obsws_error_t obsws_send_request(obsws_connection_t *conn, const char *request_type, const char *request_data, obsws_response_t **response, uint32_t timeout_ms)</div><div class="ttdoc">Send a synchronous request to OBS and wait for the response.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01776">library.c:1776</a></div></div>
</div><!-- fragment --><p ><b>Strings are constants</b> Returned strings are statically allocated - do not modify or free them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error</td><td>The error code to describe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a static string describing the error</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6" title="Error codes returned by library functions.">obsws_error_t</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02229">2229</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2229</span>                                                    {</div>
<div class="line"><span class="lineno"> 2230</span>    <span class="keywordflow">switch</span> (error) {</div>
<div class="line"><span class="lineno"> 2231</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Success&quot;</span>;</div>
<div class="line"><span class="lineno"> 2232</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Invalid parameter&quot;</span>;</div>
<div class="line"><span class="lineno"> 2233</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa99054291b32e3476d521ea9efeb83a2">OBSWS_ERROR_CONNECTION_FAILED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Connection failed&quot;</span>;</div>
<div class="line"><span class="lineno"> 2234</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a3132520f4e5efcd0e07668b4afcd5c4c">OBSWS_ERROR_AUTH_FAILED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Authentication failed&quot;</span>;</div>
<div class="line"><span class="lineno"> 2235</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a852a5a13d07531a60aedc6e3cc1ae86d">OBSWS_ERROR_TIMEOUT</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Timeout&quot;</span>;</div>
<div class="line"><span class="lineno"> 2236</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6abab3c6691cc119a7b875d967f0fc565f">OBSWS_ERROR_SEND_FAILED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Send failed&quot;</span>;</div>
<div class="line"><span class="lineno"> 2237</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a312613cd84331a653e2c1de24b94c52b">OBSWS_ERROR_RECV_FAILED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Receive failed&quot;</span>;</div>
<div class="line"><span class="lineno"> 2238</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a72ca999664bea413857d7901acf2d598">OBSWS_ERROR_PARSE_FAILED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Parse failed&quot;</span>;</div>
<div class="line"><span class="lineno"> 2239</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6ace2eb9908cf7d65109788a2593582982">OBSWS_ERROR_NOT_CONNECTED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Not connected&quot;</span>;</div>
<div class="line"><span class="lineno"> 2240</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a6b4348384a97af637d6361e38a5de052">OBSWS_ERROR_ALREADY_CONNECTED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Already connected&quot;</span>;</div>
<div class="line"><span class="lineno"> 2241</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a976f03f9cfc1de7d7172732454829e15">OBSWS_ERROR_OUT_OF_MEMORY</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Out of memory&quot;</span>;</div>
<div class="line"><span class="lineno"> 2242</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aea7cb95255efa1d01e6761d676ab599c">OBSWS_ERROR_SSL_FAILED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;SSL failed&quot;</span>;</div>
<div class="line"><span class="lineno"> 2243</span>        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown error&quot;</span>;</div>
<div class="line"><span class="lineno"> 2244</span>    }</div>
<div class="line"><span class="lineno"> 2245</span>}</div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a312613cd84331a653e2c1de24b94c52b"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a312613cd84331a653e2c1de24b94c52b">OBSWS_ERROR_RECV_FAILED</a></div><div class="ttdeci">@ OBSWS_ERROR_RECV_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00060">library.h:60</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a3132520f4e5efcd0e07668b4afcd5c4c"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a3132520f4e5efcd0e07668b4afcd5c4c">OBSWS_ERROR_AUTH_FAILED</a></div><div class="ttdeci">@ OBSWS_ERROR_AUTH_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00064">library.h:64</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a6b4348384a97af637d6361e38a5de052"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a6b4348384a97af637d6361e38a5de052">OBSWS_ERROR_ALREADY_CONNECTED</a></div><div class="ttdeci">@ OBSWS_ERROR_ALREADY_CONNECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00069">library.h:69</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a72ca999664bea413857d7901acf2d598"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a72ca999664bea413857d7901acf2d598">OBSWS_ERROR_PARSE_FAILED</a></div><div class="ttdeci">@ OBSWS_ERROR_PARSE_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00067">library.h:67</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a852a5a13d07531a60aedc6e3cc1ae86d"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a852a5a13d07531a60aedc6e3cc1ae86d">OBSWS_ERROR_TIMEOUT</a></div><div class="ttdeci">@ OBSWS_ERROR_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00072">library.h:72</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a></div><div class="ttdeci">@ OBSWS_ERROR_INVALID_PARAM</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00055">library.h:55</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6a976f03f9cfc1de7d7172732454829e15"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a976f03f9cfc1de7d7172732454829e15">OBSWS_ERROR_OUT_OF_MEMORY</a></div><div class="ttdeci">@ OBSWS_ERROR_OUT_OF_MEMORY</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00075">library.h:75</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6aa99054291b32e3476d521ea9efeb83a2"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa99054291b32e3476d521ea9efeb83a2">OBSWS_ERROR_CONNECTION_FAILED</a></div><div class="ttdeci">@ OBSWS_ERROR_CONNECTION_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00058">library.h:58</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6abab3c6691cc119a7b875d967f0fc565f"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6abab3c6691cc119a7b875d967f0fc565f">OBSWS_ERROR_SEND_FAILED</a></div><div class="ttdeci">@ OBSWS_ERROR_SEND_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00059">library.h:59</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6ace2eb9908cf7d65109788a2593582982"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6ace2eb9908cf7d65109788a2593582982">OBSWS_ERROR_NOT_CONNECTED</a></div><div class="ttdeci">@ OBSWS_ERROR_NOT_CONNECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00068">library.h:68</a></div></div>
<div class="ttc" id="alibrary_8h_html_a4820ea98988736a81d6695a51f74acd6aea7cb95255efa1d01e6761d676ab599c"><div class="ttname"><a href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aea7cb95255efa1d01e6761d676ab599c">OBSWS_ERROR_SSL_FAILED</a></div><div class="ttdeci">@ OBSWS_ERROR_SSL_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00061">library.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a91bd5ceb5878431131513cb4624e935a" name="a91bd5ceb5878431131513cb4624e935a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91bd5ceb5878431131513cb4624e935a">&#9670;&nbsp;</a></span>obsws_get_current_scene()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_get_current_scene </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>scene_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query the currently active scene in OBS. </p>
<p >This function queries OBS for the active scene name and returns it in the provided buffer. It also updates the local scene cache to keep it synchronized.</p>
<p ><b>Cache Synchronization</b> This function always queries the OBS server (doesn't use cached value). When the response arrives, it updates the cache. This ensures the library's cached scene name stays in sync with the actual OBS state.</p>
<p ><b>Buffer Management</b> The caller provides a buffer. If the scene name is longer than buffer_size-1, it will be truncated and null-terminated. Always check the returned buffer length if you need the full name.</p>
<p ><b>Thread-safety</b> The scene_mutex protects the cache update, so this is safe to call from any thread. Multiple concurrent calls are safe but will all query OBS (no deduplication).</p>
<p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> scene[256];</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d08/library_8h.html#a91bd5ceb5878431131513cb4624e935a">obsws_get_current_scene</a>(conn, scene, <span class="keyword">sizeof</span>(scene)) == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Current scene: %s\\n&quot;</span>, scene);</div>
<div class="line">}</div>
<div class="ttc" id="alibrary_8h_html_a91bd5ceb5878431131513cb4624e935a"><div class="ttname"><a href="../../dd/d08/library_8h.html#a91bd5ceb5878431131513cb4624e935a">obsws_get_current_scene</a></div><div class="ttdeci">obsws_error_t obsws_get_current_scene(obsws_connection_t *conn, char *scene_name, size_t buffer_size)</div><div class="ttdoc">Query the currently active scene in OBS.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02022">library.c:2022</a></div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">scene_name</td><td>Buffer to receive the scene name (must not be NULL) </td></tr>
    <tr><td class="paramname">buffer_size</td><td>Size of scene_name buffer (must be &gt; 0)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if scene name retrieved successfully </dd>
<dd>
OBSWS_ERROR_INVALID_PARAM if conn, scene_name is NULL or buffer_size is 0 </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection not ready </dd>
<dd>
OBSWS_ERROR_TIMEOUT if OBS doesn't respond </dd>
<dd>
OBSWS_ERROR_PARSE_FAILED if response can't be parsed</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d27/library_8c.html#a7cb91bbce42b458f267f79b9a7b293bf" title="Switch OBS to a specific scene.">obsws_set_current_scene</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02022">2022</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2022</span>                                                                                                      {</div>
<div class="line"><span class="lineno"> 2023</span>    <span class="keywordflow">if</span> (!conn || !scene_name || buffer_size == 0) {</div>
<div class="line"><span class="lineno"> 2024</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno"> 2025</span>    }</div>
<div class="line"><span class="lineno"> 2026</span>    </div>
<div class="line"><span class="lineno"> 2027</span>    <a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *response = NULL;</div>
<div class="line"><span class="lineno"> 2028</span>    <a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> result = <a class="code hl_function" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;GetCurrentProgramScene&quot;</span>, NULL, &amp;response, 0);</div>
<div class="line"><span class="lineno"> 2029</span>    </div>
<div class="line"><span class="lineno"> 2030</span>    <span class="keywordflow">if</span> (result == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a> &amp;&amp; response &amp;&amp; response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a> &amp;&amp; response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#a696a1179e1d40c6c31136999846d5902">response_data</a>) {</div>
<div class="line"><span class="lineno"> 2031</span>        cJSON *data = cJSON_Parse(response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#a696a1179e1d40c6c31136999846d5902">response_data</a>);</div>
<div class="line"><span class="lineno"> 2032</span>        <span class="keywordflow">if</span> (data) {</div>
<div class="line"><span class="lineno"> 2033</span>            cJSON *name = cJSON_GetObjectItem(data, <span class="stringliteral">&quot;currentProgramSceneName&quot;</span>);</div>
<div class="line"><span class="lineno"> 2034</span>            <span class="keywordflow">if</span> (name &amp;&amp; name-&gt;valuestring) {</div>
<div class="line"><span class="lineno"> 2035</span>                strncpy(scene_name, name-&gt;valuestring, buffer_size - 1);</div>
<div class="line"><span class="lineno"> 2036</span>                scene_name[buffer_size - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 2037</span>                </div>
<div class="line"><span class="lineno"> 2038</span>                <span class="comment">/* Update cache */</span></div>
<div class="line"><span class="lineno"> 2039</span>                pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 2040</span>                free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a>);</div>
<div class="line"><span class="lineno"> 2041</span>                conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a> = strdup(name-&gt;valuestring);</div>
<div class="line"><span class="lineno"> 2042</span>                pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 2043</span>            }</div>
<div class="line"><span class="lineno"> 2044</span>            cJSON_Delete(data);</div>
<div class="line"><span class="lineno"> 2045</span>        }</div>
<div class="line"><span class="lineno"> 2046</span>    }</div>
<div class="line"><span class="lineno"> 2047</span>    </div>
<div class="line"><span class="lineno"> 2048</span>    <span class="keywordflow">if</span> (response) {</div>
<div class="line"><span class="lineno"> 2049</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(response);</div>
<div class="line"><span class="lineno"> 2050</span>    }</div>
<div class="line"><span class="lineno"> 2051</span>    </div>
<div class="line"><span class="lineno"> 2052</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 2053</span>}</div>
<div class="ttc" id="alibrary_8c_html_af2fd7f8dd928e03b38a3e2c5b5745417"><div class="ttname"><a href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a></div><div class="ttdeci">obsws_error_t obsws_send_request(obsws_connection_t *conn, const char *request_type, const char *request_data, obsws_response_t **response, uint32_t timeout_ms)</div><div class="ttdoc">Send a synchronous request to OBS and wait for the response.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01776">library.c:1776</a></div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a91bd5ceb5878431131513cb4624e935a_cgraph.svg" width="646" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a17d68299d8070c22f5cb04e2c4af28a1" name="a17d68299d8070c22f5cb04e2c4af28a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17d68299d8070c22f5cb04e2c4af28a1">&#9670;&nbsp;</a></span>obsws_get_debug_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a> obsws_get_debug_level </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current debug level. </p>
<p >Get the current global debug level.</p>
<p >This is a read-only query - it doesn't change anything, just returns the current global debug level that was set by <a class="el" href="../../dd/d08/library_8h.html#adde8bcb270d34f560ae99047e0524a1d" title="Set the global debug level for the library.">obsws_set_debug_level()</a>.</p>
<p >Useful for conditional logging in your application, e.g.: </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d08/library_8h.html#a17d68299d8070c22f5cb04e2c4af28a1">obsws_get_debug_level</a>() &gt;= <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aa6c8d9d070b4d69beeadf605bc03eee1">OBSWS_DEBUG_MEDIUM</a>) {</div>
<div class="line">    <span class="comment">// do expensive trace operation</span></div>
<div class="line">}</div>
<div class="ttc" id="alibrary_8h_html_a17d68299d8070c22f5cb04e2c4af28a1"><div class="ttname"><a href="../../dd/d08/library_8h.html#a17d68299d8070c22f5cb04e2c4af28a1">obsws_get_debug_level</a></div><div class="ttdeci">obsws_debug_level_t obsws_get_debug_level(void)</div><div class="ttdoc">Get the current global debug level.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01333">library.c:1333</a></div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>The currently active debug level </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#adde8bcb270d34f560ae99047e0524a1d" title="Set the global debug level for the library.">obsws_set_debug_level</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01333">1333</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1333</span>                                                {</div>
<div class="line"><span class="lineno"> 1334</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d5/d27/library_8c.html#abf3a9f2c8c4082f1e6b67daddd8a5931">g_debug_level</a>;</div>
<div class="line"><span class="lineno"> 1335</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a61a10e31041532a9da0c1c1993f84a79" name="a61a10e31041532a9da0c1c1993f84a79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a10e31041532a9da0c1c1993f84a79">&#9670;&nbsp;</a></span>obsws_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a> obsws_get_state </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current connection state. </p>
<p >Get the detailed current connection state.</p>
<p >Returns one of the connection states:</p><ul>
<li>OBSWS_STATE_DISCONNECTED: Not connected, idle</li>
<li>OBSWS_STATE_CONNECTING: TCP connection established, waiting for WebSocket handshake</li>
<li>OBSWS_STATE_AUTHENTICATING: WebSocket established, waiting for auth response</li>
<li>OBSWS_STATE_CONNECTED: Connected and ready for requests</li>
<li>OBSWS_STATE_ERROR: Connection encountered an error</li>
</ul>
<p >State transitions normally follow this flow: DISCONNECTED -&gt; CONNECTING -&gt; AUTHENTICATING -&gt; CONNECTED</p>
<p >But with errors, you can also have: (any state) -&gt; ERROR</p>
<p >You don't usually need to call this - just try to send requests and check the error code. But it's useful for monitoring and debugging.</p>
<p >Thread-safe: This function locks the state_mutex, so it's safe to call from any thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection to check (NULL is safe - returns DISCONNECTED) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current connection state</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#ad9894e72ee8510f4eaf7d42feaf0cf9a" title="Check if connection is currently authenticated and ready to use.">obsws_is_connected</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01663">1663</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1663</span>                                                              {</div>
<div class="line"><span class="lineno"> 1664</span>    <span class="keywordflow">if</span> (!conn) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991af973d2b8b0a498d0bbffb40ccab1ef2d">OBSWS_STATE_DISCONNECTED</a>;</div>
<div class="line"><span class="lineno"> 1665</span>    </div>
<div class="line"><span class="lineno"> 1666</span>    pthread_mutex_lock((pthread_mutex_t *)&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1667</span>    <a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a> state = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a>;</div>
<div class="line"><span class="lineno"> 1668</span>    pthread_mutex_unlock((pthread_mutex_t *)&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1669</span>    </div>
<div class="line"><span class="lineno"> 1670</span>    <span class="keywordflow">return</span> state;</div>
<div class="line"><span class="lineno"> 1671</span>}</div>
<div class="ttc" id="alibrary_8h_html_a2fb4e7d7196f39a5ce0e9c71b2d78991"><div class="ttname"><a href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a></div><div class="ttdeci">obsws_state_t</div><div class="ttdoc">Connection state - represents the current phase of the connection lifecycle.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00098">library.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cce41cb6c70229eaab8b1b3afba57a9" name="a5cce41cb6c70229eaab8b1b3afba57a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cce41cb6c70229eaab8b1b3afba57a9">&#9670;&nbsp;</a></span>obsws_get_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_get_stats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d5c/structobsws__stats__t.html">obsws_stats_t</a> *&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve performance and connectivity statistics. </p>
<p >Get connection statistics and performance metrics.</p>
<p >The library maintains statistics about the connection:</p><ul>
<li>messages_sent / messages_received: Count of WebSocket messages</li>
<li>bytes_sent / bytes_received: Total bytes transmitted/received</li>
<li>connected_since: Timestamp of when we reached CONNECTED state</li>
<li>reconnect_count: How many times we've reconnected (0 if never disconnected)</li>
</ul>
<p >These can be useful for:</p><ul>
<li>Monitoring connection health</li>
<li>Detecting stalled connections (if bytes_received stops increasing)</li>
<li>Debugging and performance profiling</li>
<li>Health dashboards or logging</li>
</ul>
<p >Thread-safe: This function acquires stats_mutex and copies the entire stats structure, so it's safe to call from any thread. The copy operation is atomic from the caller's perspective.</p>
<p >Example usage: </p><div class="fragment"><div class="line"><a class="code hl_struct" href="../../d6/d5c/structobsws__stats__t.html">obsws_stats_t</a> stats;</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a5cce41cb6c70229eaab8b1b3afba57a9">obsws_get_stats</a>(conn, &amp;stats);</div>
<div class="line">printf(<span class="stringliteral">&quot;Received %zu messages, %zu bytes\\n&quot;</span>, </div>
<div class="line">       stats.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#acbd2023849f8049c705c4cbff567119b">messages_received</a>, stats.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#ae29f4f06b24960c6802aefd3f1627b4f">bytes_received</a>);</div>
<div class="ttc" id="alibrary_8h_html_a5cce41cb6c70229eaab8b1b3afba57a9"><div class="ttname"><a href="../../dd/d08/library_8h.html#a5cce41cb6c70229eaab8b1b3afba57a9">obsws_get_stats</a></div><div class="ttdeci">obsws_error_t obsws_get_stats(const obsws_connection_t *conn, obsws_stats_t *stats)</div><div class="ttdoc">Get connection statistics and performance metrics.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01706">library.c:1706</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html">obsws_stats_t</a></div><div class="ttdoc">Connection statistics - useful for monitoring and debugging connection health.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00283">library.h:283</a></div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection to query (NULL returns error) </td></tr>
    <tr><td class="paramname">stats</td><td>Pointer to stats structure to fill (must not be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK on success, OBSWS_ERROR_INVALID_PARAM if conn or stats is NULL</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d6/d5c/structobsws__stats__t.html" title="Connection statistics - useful for monitoring and debugging connection health.">obsws_stats_t</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01706">1706</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1706</span>                                                                                    {</div>
<div class="line"><span class="lineno"> 1707</span>    <span class="keywordflow">if</span> (!conn || !stats) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno"> 1708</span>    </div>
<div class="line"><span class="lineno"> 1709</span>    pthread_mutex_lock((pthread_mutex_t *)&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno"> 1710</span>    memcpy(stats, &amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d6/d5c/structobsws__stats__t.html">obsws_stats_t</a>));</div>
<div class="line"><span class="lineno"> 1711</span>    pthread_mutex_unlock((pthread_mutex_t *)&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno"> 1712</span>    </div>
<div class="line"><span class="lineno"> 1713</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>;</div>
<div class="line"><span class="lineno"> 1714</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aff3d6c035330741df84552800c0d0124" name="aff3d6c035330741df84552800c0d0124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3d6c035330741df84552800c0d0124">&#9670;&nbsp;</a></span>obsws_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the libwsv5 library. </p>
<p >Initialize the OBS WebSocket library.</p>
<p >This function must be called before creating any connections. It:</p><ol type="1">
<li>Initializes OpenSSL (EVP library for hashing)</li>
<li>Seeds the random number generator for UUID generation</li>
<li>Sets the global g_library_initialized flag</li>
</ol>
<p >Thread safety: This function is thread-safe. Multiple threads can call it simultaneously, and only one will actually do the initialization (protected by g_init_mutex). Subsequent calls are no-ops.</p>
<p >Note: <a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect()</a> will call this automatically if you forget, so you don't <em>have</em> to call it explicitly. But doing so allows you to initialize in a controlled way, separate from connection creation.</p>
<p >Cleanup: When you're done with the library, call <a class="el" href="../../dd/d08/library_8h.html#ad3afe1c77e8b8f26a8281186379790a1" title="Cleanup the OBS WebSocket library.">obsws_cleanup()</a> to deallocate resources. This is technically optional on program exit (the OS cleans up anyway), but good practice for testing and library shutdown.</p>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK always (initialization cannot fail in the current design)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#ad3afe1c77e8b8f26a8281186379790a1" title="Cleanup the OBS WebSocket library.">obsws_cleanup</a>, <a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01196">1196</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1196</span>                               {</div>
<div class="line"><span class="lineno"> 1197</span>    pthread_mutex_lock(&amp;<a class="code hl_variable" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a>);</div>
<div class="line"><span class="lineno"> 1198</span>    </div>
<div class="line"><span class="lineno"> 1199</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a>) {</div>
<div class="line"><span class="lineno"> 1200</span>        pthread_mutex_unlock(&amp;<a class="code hl_variable" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a>);</div>
<div class="line"><span class="lineno"> 1201</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>;</div>
<div class="line"><span class="lineno"> 1202</span>    }</div>
<div class="line"><span class="lineno"> 1203</span>    </div>
<div class="line"><span class="lineno"> 1204</span>    <span class="comment">/* Initialize OpenSSL */</span></div>
<div class="line"><span class="lineno"> 1205</span>    OpenSSL_add_all_algorithms();</div>
<div class="line"><span class="lineno"> 1206</span>    </div>
<div class="line"><span class="lineno"> 1207</span>    <span class="comment">/* Seed random number generator */</span></div>
<div class="line"><span class="lineno"> 1208</span>    srand(time(NULL));</div>
<div class="line"><span class="lineno"> 1209</span>    </div>
<div class="line"><span class="lineno"> 1210</span>    <a class="code hl_variable" href="../../d5/d27/library_8c.html#a5c573cf80a65ed908b966420c4a5d7d2">g_library_initialized</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1211</span>    pthread_mutex_unlock(&amp;<a class="code hl_variable" href="../../d5/d27/library_8c.html#ad5f633670e2eea3285c1867570a33cbc">g_init_mutex</a>);</div>
<div class="line"><span class="lineno"> 1212</span>    </div>
<div class="line"><span class="lineno"> 1213</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>;</div>
<div class="line"><span class="lineno"> 1214</span>}</div>
</div><!-- fragment --><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aff3d6c035330741df84552800c0d0124_icgraph.svg" width="271" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad9894e72ee8510f4eaf7d42feaf0cf9a" name="ad9894e72ee8510f4eaf7d42feaf0cf9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9894e72ee8510f4eaf7d42feaf0cf9a">&#9670;&nbsp;</a></span>obsws_is_connected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool obsws_is_connected </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a connection is actively connected to OBS. </p>
<p >Check if connection is currently authenticated and ready to use.</p>
<p >Convenience function that returns true if the connection is in CONNECTED state and false otherwise. Useful for checking before sending requests.</p>
<p >Thread-safe: This function locks the state_mutex before checking, so it's safe to call from any thread.</p>
<p >Return value: The connection must be in OBSWS_STATE_CONNECTED to return true. If it's CONNECTING, AUTHENTICATING, ERROR, or DISCONNECTED, this returns false.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>The connection to check (NULL is safe - returns false) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if connected, false otherwise</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a61a10e31041532a9da0c1c1993f84a79" title="Get the detailed current connection state.">obsws_get_state</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01625">1625</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1625</span>                                                        {</div>
<div class="line"><span class="lineno"> 1626</span>    <span class="keywordflow">if</span> (!conn) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1627</span>    </div>
<div class="line"><span class="lineno"> 1628</span>    <span class="comment">/* Thread-safe state check */</span></div>
<div class="line"><span class="lineno"> 1629</span>    pthread_mutex_lock((pthread_mutex_t *)&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1630</span>    <span class="keywordtype">bool</span> connected = (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a> == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a>);</div>
<div class="line"><span class="lineno"> 1631</span>    pthread_mutex_unlock((pthread_mutex_t *)&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno"> 1632</span>    </div>
<div class="line"><span class="lineno"> 1633</span>    <span class="keywordflow">return</span> connected;</div>
<div class="line"><span class="lineno"> 1634</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d8529feb33753ebb45d896c4c125642" name="a1d8529feb33753ebb45d896c4c125642"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8529feb33753ebb45d896c4c125642">&#9670;&nbsp;</a></span>obsws_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void obsws_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9">obsws_log_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00270">270</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  270</span>                                                                                                  {</div>
<div class="line"><span class="lineno">  271</span>    <span class="comment">/* Early exit if this message is too verbose */</span></div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordflow">if</span> (level &gt; <a class="code hl_variable" href="../../d5/d27/library_8c.html#abaccf3944be55af2f72ebbb713c77706">g_log_level</a>) {</div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  274</span>    }</div>
<div class="line"><span class="lineno">  275</span>    </div>
<div class="line"><span class="lineno">  276</span>    <span class="comment">/* Format the message using printf-style arguments */</span></div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordtype">char</span> message[1024];</div>
<div class="line"><span class="lineno">  278</span>    va_list args;</div>
<div class="line"><span class="lineno">  279</span>    va_start(args, format);</div>
<div class="line"><span class="lineno">  280</span>    vsnprintf(message, <span class="keyword">sizeof</span>(message), format, args);</div>
<div class="line"><span class="lineno">  281</span>    va_end(args);</div>
<div class="line"><span class="lineno">  282</span>    </div>
<div class="line"><span class="lineno">  283</span>    <span class="comment">/* Route to user callback or stderr. The callback lets the user handle logging</span></div>
<div class="line"><span class="lineno">  284</span><span class="comment">       however they want - write to file, send to logging service, etc. */</span></div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">if</span> (conn &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a14b921ef2d0ad722bd6020da6a708136">log_callback</a>) {</div>
<div class="line"><span class="lineno">  286</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a14b921ef2d0ad722bd6020da6a708136">log_callback</a>(level, message, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af272f38a8f4ca535939766cebacf0b8f">user_data</a>);</div>
<div class="line"><span class="lineno">  287</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  288</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *level_str[] = {<span class="stringliteral">&quot;NONE&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>, <span class="stringliteral">&quot;WARN&quot;</span>, <span class="stringliteral">&quot;INFO&quot;</span>, <span class="stringliteral">&quot;DEBUG&quot;</span>};</div>
<div class="line"><span class="lineno">  289</span>        fprintf(stderr, <span class="stringliteral">&quot;[OBSWS-%s] %s\n&quot;</span>, level_str[level], message);</div>
<div class="line"><span class="lineno">  290</span>    }</div>
<div class="line"><span class="lineno">  291</span>}</div>
<div class="ttc" id="alibrary_8c_html_abaccf3944be55af2f72ebbb713c77706"><div class="ttname"><a href="../../d5/d27/library_8c.html#abaccf3944be55af2f72ebbb713c77706">g_log_level</a></div><div class="ttdeci">static obsws_log_level_t g_log_level</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00252">library.c:252</a></div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a1d8529feb33753ebb45d896c4c125642_icgraph.svg" width="995" height="479"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abe53062a781ca1cd537f799c075b3e2e" name="abe53062a781ca1cd537f799c075b3e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe53062a781ca1cd537f799c075b3e2e">&#9670;&nbsp;</a></span>obsws_process_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int obsws_process_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process pending WebSocket events (compatibility function). </p>
<p >Process pending events from the WebSocket connection.</p>
<p >This function is provided for API compatibility with single-threaded applications. However, the libwsv5 library uses a background event_thread by default, so this function is usually not needed - events are processed automatically in the background.</p>
<p ><b>Background Event Processing:</b> By design, all WebSocket messages (events, responses, etc.) are processed by the background event_thread. This thread:</p><ul>
<li>Continuously calls lws_service() to pump WebSocket events</li>
<li>Receives incoming messages from OBS</li>
<li>Routes responses to waiting callers via condition variables</li>
<li>Calls event callbacks for real-time events</li>
<li>Maintains keep-alive pings</li>
</ul>
<p >Applications don't need to call this function - the thread handles everything.</p>
<p ><b>What this function does:</b> Currently, this is mainly for API compatibility. It:</p><ul>
<li>Validates the connection object</li>
<li>If timeout_ms &gt; 0, sleeps for that duration</li>
<li>Returns 0 (success)</li>
</ul>
<p ><b>When to use:</b></p><ul>
<li>Most applications: Don't call this - use background thread</li>
<li>If you disable background thread: Call this in your main loop</li>
</ul>
<p ><b>Example (not typical - background thread is recommended):</b> </p><div class="fragment"><div class="line"><span class="comment">// Not recommended - background thread is better</span></div>
<div class="line"><span class="keywordflow">while</span> (app_running) {</div>
<div class="line">    <a class="code hl_function" href="../../dd/d08/library_8h.html#abe53062a781ca1cd537f799c075b3e2e">obsws_process_events</a>(conn, 100);  <span class="comment">// Check every 100ms</span></div>
<div class="line">}</div>
<div class="ttc" id="alibrary_8h_html_abe53062a781ca1cd537f799c075b3e2e"><div class="ttname"><a href="../../dd/d08/library_8h.html#abe53062a781ca1cd537f799c075b3e2e">obsws_process_events</a></div><div class="ttdeci">int obsws_process_events(obsws_connection_t *conn, uint32_t timeout_ms)</div><div class="ttdoc">Process pending events from the WebSocket connection.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02347">library.c:2347</a></div></div>
</div><!-- fragment --><p >Better approach - let background thread handle it: </p><div class="fragment"><div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626">obsws_connect</a>(conn, <span class="stringliteral">&quot;localhost&quot;</span>, 4455, <span class="stringliteral">&quot;password&quot;</span>);</div>
<div class="line"><span class="comment">// Background thread processes events automatically</span></div>
<div class="line"><span class="keywordflow">while</span> (app_running) {</div>
<div class="line">    <span class="comment">// Your application code - no need to call process_events</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#aa8389ba6731e01a9426bd921180b7195">obsws_disconnect</a>(conn);</div>
<div class="ttc" id="alibrary_8h_html_a7ed7225961f0989acb31ebbd9c099626"><div class="ttname"><a href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626">obsws_connect</a></div><div class="ttdeci">obsws_connection_t * obsws_connect(const obsws_config_t *config)</div><div class="ttdoc">Establish a connection to OBS.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01425">library.c:1425</a></div></div>
<div class="ttc" id="alibrary_8h_html_aa8389ba6731e01a9426bd921180b7195"><div class="ttname"><a href="../../dd/d08/library_8h.html#aa8389ba6731e01a9426bd921180b7195">obsws_disconnect</a></div><div class="ttdeci">void obsws_disconnect(obsws_connection_t *conn)</div><div class="ttdoc">Disconnect and destroy a connection.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01549">library.c:1549</a></div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (can be NULL - returns error) </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>Sleep duration in milliseconds (0 = don't sleep)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd>
<dd>
OBSWS_ERROR_INVALID_PARAM if conn is NULL</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a7ed7225961f0989acb31ebbd9c099626" title="Establish a connection to OBS.">obsws_connect</a>, <a class="el" href="../../dd/d08/library_8h.html#aa8389ba6731e01a9426bd921180b7195" title="Disconnect and destroy a connection.">obsws_disconnect</a>, <a class="el" href="../../d5/d27/library_8c.html#a27739efcea1287611c82ff3e8c88d7b7" title="Background thread function that continuously processes WebSocket events.">event_thread_func</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02347">2347</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2347</span>                                                                        {</div>
<div class="line"><span class="lineno"> 2348</span>    <span class="keywordflow">if</span> (!conn) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno"> 2349</span>    </div>
<div class="line"><span class="lineno"> 2350</span>    <span class="comment">/* Events are processed in the background thread */</span></div>
<div class="line"><span class="lineno"> 2351</span>    <span class="comment">/* This function is provided for API compatibility */</span></div>
<div class="line"><span class="lineno"> 2352</span>    <span class="keywordflow">if</span> (timeout_ms &gt; 0) {</div>
<div class="line"><span class="lineno"> 2353</span>        <span class="keyword">struct </span>timespec ts;</div>
<div class="line"><span class="lineno"> 2354</span>        ts.tv_sec = timeout_ms / 1000;</div>
<div class="line"><span class="lineno"> 2355</span>        ts.tv_nsec = (timeout_ms % 1000) * 1000000;</div>
<div class="line"><span class="lineno"> 2356</span>        nanosleep(&amp;ts, NULL);</div>
<div class="line"><span class="lineno"> 2357</span>    }</div>
<div class="line"><span class="lineno"> 2358</span>    </div>
<div class="line"><span class="lineno"> 2359</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2360</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a53067e61dc0ddcf1134d46b275d7ce6b" name="a53067e61dc0ddcf1134d46b275d7ce6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53067e61dc0ddcf1134d46b275d7ce6b">&#9670;&nbsp;</a></span>obsws_response_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obsws_response_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *&#160;</td>
          <td class="paramname"><em>response</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a response object previously allocated by <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a>. </p>
<p >Free a response structure and all its allocated memory.</p>
<p >This function safely deallocates all memory associated with a response:</p><ul>
<li>The error_message string (if present)</li>
<li>The response_data JSON string (if present) <br  />
</li>
<li>The response structure itself</li>
</ul>
<p ><b>Safe to call with NULL</b> Calling with NULL is safe and does nothing - no crash or error. This allows for simpler cleanup: </p><div class="fragment"><div class="line"><a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *resp = NULL;</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(..., &amp;resp, ...);</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(resp);  <span class="comment">// Safe even if send_request failed</span></div>
<div class="ttc" id="alibrary_8h_html_a53067e61dc0ddcf1134d46b275d7ce6b"><div class="ttname"><a href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a></div><div class="ttdeci">void obsws_response_free(obsws_response_t *response)</div><div class="ttdoc">Free a response structure and all its allocated memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02195">library.c:2195</a></div></div>
</div><!-- fragment --><p ><b>Memory ownership</b></p><ul>
<li><a class="el" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a> allocates the response - you must free it</li>
<li>High-level functions like <a class="el" href="../../dd/d08/library_8h.html#a7cb91bbce42b458f267f79b9a7b293bf" title="Switch OBS to a specific scene.">obsws_set_current_scene()</a> can optionally take response ownership or free internally based on parameters</li>
</ul>
<p ><b>NOT thread-safe</b> Each response should only be accessed/freed by one thread. If multiple threads need the response, use higher-level synchronization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>Response to free. Can be NULL (does nothing if so).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request</a>, <a class="el" href="../../d2/d1f/structobsws__response__t.html" title="Response structure for requests to OBS.">obsws_response_t</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02195">2195</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2195</span>                                                     {</div>
<div class="line"><span class="lineno"> 2196</span>    <span class="keywordflow">if</span> (!response) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 2197</span>    </div>
<div class="line"><span class="lineno"> 2198</span>    free(response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#ab2b3055a84989889d3de28c2ccfd0dac">error_message</a>);</div>
<div class="line"><span class="lineno"> 2199</span>    free(response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#a696a1179e1d40c6c31136999846d5902">response_data</a>);</div>
<div class="line"><span class="lineno"> 2200</span>    free(response);</div>
<div class="line"><span class="lineno"> 2201</span>}</div>
</div><!-- fragment --><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a53067e61dc0ddcf1134d46b275d7ce6b_icgraph.svg" width="411" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af2fd7f8dd928e03b38a3e2c5b5745417" name="af2fd7f8dd928e03b38a3e2c5b5745417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fd7f8dd928e03b38a3e2c5b5745417">&#9670;&nbsp;</a></span>obsws_send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>request_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>request_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a synchronous request to OBS and wait for the response. </p>
<p >This is the core function for all OBS operations. It implements the asynchronous request-response pattern of the OBS WebSocket v5 protocol:</p>
<p ><b>Protocol Flow:</b></p><ol type="1">
<li>Generate a unique UUID for this request (used to match responses)</li>
<li>Create a pending_request_t to track the in-flight operation</li>
<li>Build the request JSON with opcode 6 (REQUEST)</li>
<li>Send the message via lws_write()</li>
<li>Block the caller with pthread_cond_timedwait() until response arrives</li>
<li>Return the response to caller (who owns it and must free with obsws_response_free)</li>
</ol>
<p ><b>Why synchronous from caller's perspective?</b> Although WebSocket messages are async at the protocol level, we provide a synchronous API - the caller sends a request and blocks until the response arrives. This is simpler for application code than callback-based async APIs.</p>
<p >Behind the scenes, the background event_thread continuously processes WebSocket messages. When a REQUEST_RESPONSE (opcode 7) arrives matching a pending request ID, it signals the waiting condition variable, waking up the blocked caller.</p>
<p ><b>Performance implications:</b></p><ul>
<li>Thread-safe: The main app thread can be blocked in <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a> while the background event_thread processes other messages</li>
<li>No polling: Uses condition variables, not CPU-wasting polling loops</li>
<li>Can make multiple simultaneous requests from different threads (up to OBSWS_MAX_PENDING_REQUESTS = 256)</li>
</ul>
<p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *response = NULL;</div>
<div class="line"><a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> err = <a class="code hl_function" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;SetCurrentProgramScene&quot;</span>,</div>
<div class="line">                                       <span class="stringliteral">&quot;{\&quot;sceneName\&quot;: \&quot;Scene1\&quot;}&quot;</span>, </div>
<div class="line">                                       &amp;response, 0);</div>
<div class="line"><span class="keywordflow">if</span> (err == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a> &amp;&amp; response &amp;&amp; response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a>) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Scene switched successfully\\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(response);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">request_type</td><td>OBS request type like "GetCurrentProgramScene", "SetCurrentProgramScene", etc. </td></tr>
    <tr><td class="paramname">request_data</td><td>Optional JSON string with request parameters. NULL for no parameters. Example: "{\"sceneName\": \"Scene1\"}" </td></tr>
    <tr><td class="paramname">response</td><td>Output pointer for the response. Will be allocated by this function. Caller must free with <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free()</a>. Can be NULL if caller doesn't need the response (but response is still consumed from server). </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>Timeout in milliseconds (0 = use config-&gt;recv_timeout_ms, typically 30000ms)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if response received (check response-&gt;success for operation success) </dd>
<dd>
OBSWS_ERROR_INVALID_PARAM if conn, request_type, or response pointer is NULL </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection is not in CONNECTED state </dd>
<dd>
OBSWS_ERROR_OUT_OF_MEMORY if pending request allocation fails </dd>
<dd>
OBSWS_ERROR_SEND_FAILED if message send fails (buffer too small, invalid wsi, etc) </dd>
<dd>
OBSWS_ERROR_TIMEOUT if no response received within timeout_ms</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/d1f/structobsws__response__t.html" title="Response structure for requests to OBS.">obsws_response_t</a>, <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free</a>, <a class="el" href="../../d5/d27/library_8c.html#a39534944f30eaed9a0f2d7de19be0c3e" title="Convert an error code to a human-readable string.">obsws_error_string</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01776">1776</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1777</span>                                                                                                             {</div>
<div class="line"><span class="lineno"> 1778</span>    <span class="keywordflow">if</span> (!conn || !request_type || !response) {</div>
<div class="line"><span class="lineno"> 1779</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno"> 1780</span>    }</div>
<div class="line"><span class="lineno"> 1781</span>    </div>
<div class="line"><span class="lineno"> 1782</span>    <span class="keywordflow">if</span> (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a> != <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a>) {</div>
<div class="line"><span class="lineno"> 1783</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6ace2eb9908cf7d65109788a2593582982">OBSWS_ERROR_NOT_CONNECTED</a>;</div>
<div class="line"><span class="lineno"> 1784</span>    }</div>
<div class="line"><span class="lineno"> 1785</span>    </div>
<div class="line"><span class="lineno"> 1786</span>    <span class="comment">/* Generate request ID */</span></div>
<div class="line"><span class="lineno"> 1787</span>    <span class="keywordtype">char</span> request_id[<a class="code hl_define" href="../../d5/d27/library_8c.html#a25b13264018fd1dc7b1f2bbd93bdc7cc">OBSWS_UUID_LENGTH</a>];</div>
<div class="line"><span class="lineno"> 1788</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#af79be0fed07182761c923170f4211089">generate_uuid</a>(request_id);</div>
<div class="line"><span class="lineno"> 1789</span>    </div>
<div class="line"><span class="lineno"> 1790</span>    <span class="comment">/* Create pending request */</span></div>
<div class="line"><span class="lineno"> 1791</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> *req = <a class="code hl_function" href="../../d5/d27/library_8c.html#aafc3d1ce3debddcb8e3888c9806e044a">create_pending_request</a>(conn, request_id);</div>
<div class="line"><span class="lineno"> 1792</span>    <span class="keywordflow">if</span> (!req) {</div>
<div class="line"><span class="lineno"> 1793</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a976f03f9cfc1de7d7172732454829e15">OBSWS_ERROR_OUT_OF_MEMORY</a>;</div>
<div class="line"><span class="lineno"> 1794</span>    }</div>
<div class="line"><span class="lineno"> 1795</span>    </div>
<div class="line"><span class="lineno"> 1796</span>    <span class="comment">/* Build request JSON */</span></div>
<div class="line"><span class="lineno"> 1797</span>    cJSON *request = cJSON_CreateObject();</div>
<div class="line"><span class="lineno"> 1798</span>    cJSON_AddNumberToObject(request, <span class="stringliteral">&quot;op&quot;</span>, <a class="code hl_define" href="../../d5/d27/library_8c.html#a6c2c324c3b2c49b7febe0b376d6c1045">OBSWS_OPCODE_REQUEST</a>);</div>
<div class="line"><span class="lineno"> 1799</span>    </div>
<div class="line"><span class="lineno"> 1800</span>    cJSON *d = cJSON_CreateObject();</div>
<div class="line"><span class="lineno"> 1801</span>    cJSON_AddStringToObject(d, <span class="stringliteral">&quot;requestType&quot;</span>, request_type);</div>
<div class="line"><span class="lineno"> 1802</span>    cJSON_AddStringToObject(d, <span class="stringliteral">&quot;requestId&quot;</span>, request_id);</div>
<div class="line"><span class="lineno"> 1803</span>    </div>
<div class="line"><span class="lineno"> 1804</span>    <span class="keywordflow">if</span> (request_data) {</div>
<div class="line"><span class="lineno"> 1805</span>        cJSON *data = cJSON_Parse(request_data);</div>
<div class="line"><span class="lineno"> 1806</span>        <span class="keywordflow">if</span> (data) {</div>
<div class="line"><span class="lineno"> 1807</span>            cJSON_AddItemToObject(d, <span class="stringliteral">&quot;requestData&quot;</span>, data);</div>
<div class="line"><span class="lineno"> 1808</span>        }</div>
<div class="line"><span class="lineno"> 1809</span>    }</div>
<div class="line"><span class="lineno"> 1810</span>    </div>
<div class="line"><span class="lineno"> 1811</span>    cJSON_AddItemToObject(request, <span class="stringliteral">&quot;d&quot;</span>, d);</div>
<div class="line"><span class="lineno"> 1812</span>    </div>
<div class="line"><span class="lineno"> 1813</span>    <span class="keywordtype">char</span> *message = cJSON_PrintUnformatted(request);</div>
<div class="line"><span class="lineno"> 1814</span>    cJSON_Delete(request);</div>
<div class="line"><span class="lineno"> 1815</span>    </div>
<div class="line"><span class="lineno"> 1816</span>    <span class="comment">/* DEBUG_HIGH: Show request being sent */</span></div>
<div class="line"><span class="lineno"> 1817</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a3682ffd7f6175dbc796f5750172c99bf">obsws_debug</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668aceb0431d743cdecf0848564f388d51bd">OBSWS_DEBUG_HIGH</a>, <span class="stringliteral">&quot;Sending request (ID: %s): %s&quot;</span>, request_id, message);</div>
<div class="line"><span class="lineno"> 1818</span>    </div>
<div class="line"><span class="lineno"> 1819</span>    <span class="comment">/* Send request */</span></div>
<div class="line"><span class="lineno"> 1820</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">send_mutex</a>);</div>
<div class="line"><span class="lineno"> 1821</span>    <span class="keywordtype">size_t</span> len = strlen(message);</div>
<div class="line"><span class="lineno"> 1822</span>    <a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> result = <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>;</div>
<div class="line"><span class="lineno"> 1823</span>    </div>
<div class="line"><span class="lineno"> 1824</span>    <span class="keywordflow">if</span> (len &lt; conn-&gt;send_buffer_size - LWS_PRE &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>) {</div>
<div class="line"><span class="lineno"> 1825</span>        memcpy(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a> + LWS_PRE, message, len);</div>
<div class="line"><span class="lineno"> 1826</span>        <span class="keywordtype">int</span> written = lws_write(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaf49ac1578fc794ee4b01ccbf9edc35a">wsi</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a14a61d0e27a8cac772ce173dd31d4fb7">send_buffer</a> + LWS_PRE), len, LWS_WRITE_TEXT);</div>
<div class="line"><span class="lineno"> 1827</span>        </div>
<div class="line"><span class="lineno"> 1828</span>        <span class="keywordflow">if</span> (written &lt; 0) {</div>
<div class="line"><span class="lineno"> 1829</span>            result = <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6abab3c6691cc119a7b875d967f0fc565f">OBSWS_ERROR_SEND_FAILED</a>;</div>
<div class="line"><span class="lineno"> 1830</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1831</span>            pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno"> 1832</span>            conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#a8fcaddd7c5934bcf0a44225bc9a23fa5">messages_sent</a>++;</div>
<div class="line"><span class="lineno"> 1833</span>            conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a10b9da03b3a1cb3a6ee0e72387915740">stats</a>.<a class="code hl_variable" href="../../d6/d5c/structobsws__stats__t.html#a79582a623821723ea9bf86930eb32db2">bytes_sent</a> += len;</div>
<div class="line"><span class="lineno"> 1834</span>            pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#ab29e2a357e95b536a2c79b0990614bc5">stats_mutex</a>);</div>
<div class="line"><span class="lineno"> 1835</span>        }</div>
<div class="line"><span class="lineno"> 1836</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1837</span>        result = <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6abab3c6691cc119a7b875d967f0fc565f">OBSWS_ERROR_SEND_FAILED</a>;</div>
<div class="line"><span class="lineno"> 1838</span>    }</div>
<div class="line"><span class="lineno"> 1839</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#afc665d5d6864f038f551e4e7d4aae679">send_mutex</a>);</div>
<div class="line"><span class="lineno"> 1840</span>    </div>
<div class="line"><span class="lineno"> 1841</span>    free(message);</div>
<div class="line"><span class="lineno"> 1842</span>    </div>
<div class="line"><span class="lineno"> 1843</span>    <span class="keywordflow">if</span> (result != <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>) {</div>
<div class="line"><span class="lineno"> 1844</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a700c8a9baa87a3827b399776e811f328">remove_pending_request</a>(conn, req);</div>
<div class="line"><span class="lineno"> 1845</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 1846</span>    }</div>
<div class="line"><span class="lineno"> 1847</span>    </div>
<div class="line"><span class="lineno"> 1848</span>    <span class="comment">/* Wait for response */</span></div>
<div class="line"><span class="lineno"> 1849</span>    <span class="keywordflow">if</span> (timeout_ms == 0) {</div>
<div class="line"><span class="lineno"> 1850</span>        timeout_ms = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a6439a4274026273ba5fb9786c90daa93">recv_timeout_ms</a>;</div>
<div class="line"><span class="lineno"> 1851</span>    }</div>
<div class="line"><span class="lineno"> 1852</span>    </div>
<div class="line"><span class="lineno"> 1853</span>    <span class="keyword">struct </span>timespec ts;</div>
<div class="line"><span class="lineno"> 1854</span>    clock_gettime(CLOCK_REALTIME, &amp;ts);</div>
<div class="line"><span class="lineno"> 1855</span>    ts.tv_sec += timeout_ms / 1000;</div>
<div class="line"><span class="lineno"> 1856</span>    ts.tv_nsec += (timeout_ms % 1000) * 1000000;</div>
<div class="line"><span class="lineno"> 1857</span>    <span class="keywordflow">if</span> (ts.tv_nsec &gt;= 1000000000) {</div>
<div class="line"><span class="lineno"> 1858</span>        ts.tv_sec++;</div>
<div class="line"><span class="lineno"> 1859</span>        ts.tv_nsec -= 1000000000;</div>
<div class="line"><span class="lineno"> 1860</span>    }</div>
<div class="line"><span class="lineno"> 1861</span>    </div>
<div class="line"><span class="lineno"> 1862</span>    pthread_mutex_lock(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno"> 1863</span>    <span class="keywordflow">while</span> (!req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#af74dd3c97a064175b9dcf3dbfe3665cc">completed</a>) {</div>
<div class="line"><span class="lineno"> 1864</span>        <span class="keywordtype">int</span> wait_result = pthread_cond_timedwait(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">cond</a>, &amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>, &amp;ts);</div>
<div class="line"><span class="lineno"> 1865</span>        <span class="keywordflow">if</span> (wait_result == ETIMEDOUT) {</div>
<div class="line"><span class="lineno"> 1866</span>            pthread_mutex_unlock(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno"> 1867</span>            <a class="code hl_function" href="../../d5/d27/library_8c.html#a700c8a9baa87a3827b399776e811f328">remove_pending_request</a>(conn, req);</div>
<div class="line"><span class="lineno"> 1868</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a852a5a13d07531a60aedc6e3cc1ae86d">OBSWS_ERROR_TIMEOUT</a>;</div>
<div class="line"><span class="lineno"> 1869</span>        }</div>
<div class="line"><span class="lineno"> 1870</span>    }</div>
<div class="line"><span class="lineno"> 1871</span>    </div>
<div class="line"><span class="lineno"> 1872</span>    *response = req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a>;</div>
<div class="line"><span class="lineno"> 1873</span>    req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a4b37104673cb81e3f2825c8f6df372ba">response</a> = NULL; <span class="comment">/* Transfer ownership */</span></div>
<div class="line"><span class="lineno"> 1874</span>    pthread_mutex_unlock(&amp;req-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno"> 1875</span>    </div>
<div class="line"><span class="lineno"> 1876</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a700c8a9baa87a3827b399776e811f328">remove_pending_request</a>(conn, req);</div>
<div class="line"><span class="lineno"> 1877</span>    </div>
<div class="line"><span class="lineno"> 1878</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>;</div>
<div class="line"><span class="lineno"> 1879</span>}</div>
<div class="ttc" id="alibrary_8c_html_a6c2c324c3b2c49b7febe0b376d6c1045"><div class="ttname"><a href="../../d5/d27/library_8c.html#a6c2c324c3b2c49b7febe0b376d6c1045">OBSWS_OPCODE_REQUEST</a></div><div class="ttdeci">#define OBSWS_OPCODE_REQUEST</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00073">library.c:73</a></div></div>
<div class="ttc" id="alibrary_8c_html_a700c8a9baa87a3827b399776e811f328"><div class="ttname"><a href="../../d5/d27/library_8c.html#a700c8a9baa87a3827b399776e811f328">remove_pending_request</a></div><div class="ttdeci">static void remove_pending_request(obsws_connection_t *conn, pending_request_t *target)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00549">library.c:549</a></div></div>
<div class="ttc" id="alibrary_8c_html_aafc3d1ce3debddcb8e3888c9806e044a"><div class="ttname"><a href="../../d5/d27/library_8c.html#aafc3d1ce3debddcb8e3888c9806e044a">create_pending_request</a></div><div class="ttdeci">static pending_request_t * create_pending_request(obsws_connection_t *conn, const char *request_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00506">library.c:506</a></div></div>
<div class="ttc" id="alibrary_8c_html_af79be0fed07182761c923170f4211089"><div class="ttname"><a href="../../d5/d27/library_8c.html#af79be0fed07182761c923170f4211089">generate_uuid</a></div><div class="ttdeci">static void generate_uuid(char *uuid_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00344">library.c:344</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html_a79582a623821723ea9bf86930eb32db2"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html#a79582a623821723ea9bf86930eb32db2">obsws_stats_t::bytes_sent</a></div><div class="ttdeci">uint64_t bytes_sent</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00286">library.h:286</a></div></div>
<div class="ttc" id="astructobsws__stats__t_html_a8fcaddd7c5934bcf0a44225bc9a23fa5"><div class="ttname"><a href="../../d6/d5c/structobsws__stats__t.html#a8fcaddd7c5934bcf0a44225bc9a23fa5">obsws_stats_t::messages_sent</a></div><div class="ttdeci">uint64_t messages_sent</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00284">library.h:284</a></div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_af2fd7f8dd928e03b38a3e2c5b5745417_cgraph.svg" width="403" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_af2fd7f8dd928e03b38a3e2c5b5745417_icgraph.svg" width="406" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7cb91bbce42b458f267f79b9a7b293bf" name="a7cb91bbce42b458f267f79b9a7b293bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb91bbce42b458f267f79b9a7b293bf">&#9670;&nbsp;</a></span>obsws_set_current_scene()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_set_current_scene </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>scene_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch OBS to a specific scene. </p>
<p >This is a high-level convenience function for scene switching. It demonstrates several important design patterns in the library:</p>
<p ><b>Optimization: Scene Cache</b> Before sending a request to OBS, this function checks the cached current scene. If the requested scene is already active, it returns immediately without network overhead. The cache is maintained by the event thread when SceneChanged events arrive.</p>
<p ><b>Memory Ownership</b> If the caller provides response pointer, they receive ownership and must call <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free()</a>. If response is NULL, the function frees the response internally. This flexibility allows three usage patterns:</p><ol type="1">
<li>Check response: <code>obsws_set_current_scene(conn, name, &amp;resp); if (resp-&gt;success) ...</code></li>
<li>Ignore response: <code>obsws_set_current_scene(conn, name, NULL);</code> (response is freed internally)</li>
<li>Just check error: <code>if (obsws_send_request(...) != OBSWS_OK) ...</code></li>
</ol>
<p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><span class="comment">// Pattern 1: Check response details</span></div>
<div class="line"><a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *response = NULL;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d08/library_8h.html#a7cb91bbce42b458f267f79b9a7b293bf">obsws_set_current_scene</a>(conn, <span class="stringliteral">&quot;Scene1&quot;</span>, &amp;response) == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a> &amp;&amp;</div>
<div class="line">    response &amp;&amp; response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a>) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Switched successfully\\n&quot;</span>);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Switch failed: %s\\n&quot;</span>, response ? response-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#ab2b3055a84989889d3de28c2ccfd0dac">error_message</a> : <span class="stringliteral">&quot;unknown&quot;</span>);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(response);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Pattern 2: Ignore response (simpler)</span></div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a7cb91bbce42b458f267f79b9a7b293bf">obsws_set_current_scene</a>(conn, <span class="stringliteral">&quot;Scene1&quot;</span>, NULL);</div>
<div class="ttc" id="alibrary_8h_html_a7cb91bbce42b458f267f79b9a7b293bf"><div class="ttname"><a href="../../dd/d08/library_8h.html#a7cb91bbce42b458f267f79b9a7b293bf">obsws_set_current_scene</a></div><div class="ttdeci">obsws_error_t obsws_set_current_scene(obsws_connection_t *conn, const char *scene_name, obsws_response_t **response)</div><div class="ttdoc">Switch OBS to a specific scene.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01935">library.c:1935</a></div></div>
</div><!-- fragment --><p ><b>Thread-safety:</b></p><ul>
<li>Scene cache is protected by scene_mutex</li>
<li>Safe to call from any thread</li>
<li>Multiple calls can happen simultaneously (each uses send_mutex)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">scene_name</td><td>Name of the scene to switch to. Must not be NULL. </td></tr>
    <tr><td class="paramname">response</td><td>Optional output for response details. If provided, caller owns it and must free with <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free()</a>. If NULL, response is freed internally.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if request sent and response received (check response-&gt;success for whether the scene switch actually succeeded in OBS) </dd>
<dd>
OBSWS_ERROR_INVALID_PARAM if conn or scene_name is NULL </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection not ready </dd>
<dd>
OBSWS_ERROR_TIMEOUT if no response from OBS</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d27/library_8c.html#a91bd5ceb5878431131513cb4624e935a" title="Query the currently active scene in OBS.">obsws_get_current_scene</a>, <a class="el" href="../../d2/d1f/structobsws__response__t.html" title="Response structure for requests to OBS.">obsws_response_t</a>, <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01935">1935</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1935</span>                                                                                                                     {</div>
<div class="line"><span class="lineno"> 1936</span>    <span class="keywordflow">if</span> (!conn || !scene_name) {</div>
<div class="line"><span class="lineno"> 1937</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6a8944fe1379e71d22a82399c21107ebf6">OBSWS_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><span class="lineno"> 1938</span>    }</div>
<div class="line"><span class="lineno"> 1939</span>    </div>
<div class="line"><span class="lineno"> 1940</span>    <span class="comment">/* Check cache to avoid redundant switches */</span></div>
<div class="line"><span class="lineno"> 1941</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 1942</span>    <span class="keywordtype">bool</span> already_current = (conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a> &amp;&amp; strcmp(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a>, scene_name) == 0);</div>
<div class="line"><span class="lineno"> 1943</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 1944</span>    </div>
<div class="line"><span class="lineno"> 1945</span>    <span class="keywordflow">if</span> (already_current) {</div>
<div class="line"><span class="lineno"> 1946</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9aa69cfac4b3acbd5968bfab9ef5759cd2">OBSWS_LOG_DEBUG</a>, <span class="stringliteral">&quot;Already on scene: %s&quot;</span>, scene_name);</div>
<div class="line"><span class="lineno"> 1947</span>        <span class="keywordflow">if</span> (response) {</div>
<div class="line"><span class="lineno"> 1948</span>            *response = calloc(1, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a>));</div>
<div class="line"><span class="lineno"> 1949</span>            (*response)-&gt;success = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1950</span>        }</div>
<div class="line"><span class="lineno"> 1951</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>;</div>
<div class="line"><span class="lineno"> 1952</span>    }</div>
<div class="line"><span class="lineno"> 1953</span>    </div>
<div class="line"><span class="lineno"> 1954</span>    cJSON *request_data = cJSON_CreateObject();</div>
<div class="line"><span class="lineno"> 1955</span>    cJSON_AddStringToObject(request_data, <span class="stringliteral">&quot;sceneName&quot;</span>, scene_name);</div>
<div class="line"><span class="lineno"> 1956</span>    </div>
<div class="line"><span class="lineno"> 1957</span>    <span class="keywordtype">char</span> *data_str = cJSON_PrintUnformatted(request_data);</div>
<div class="line"><span class="lineno"> 1958</span>    cJSON_Delete(request_data);</div>
<div class="line"><span class="lineno"> 1959</span>    </div>
<div class="line"><span class="lineno"> 1960</span>    <a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *resp = NULL;</div>
<div class="line"><span class="lineno"> 1961</span>    <a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> result = <a class="code hl_function" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;SetCurrentProgramScene&quot;</span>, data_str, &amp;resp, 0);</div>
<div class="line"><span class="lineno"> 1962</span>    free(data_str);</div>
<div class="line"><span class="lineno"> 1963</span>    </div>
<div class="line"><span class="lineno"> 1964</span>    <span class="keywordflow">if</span> (result == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a> &amp;&amp; resp &amp;&amp; resp-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a>) {</div>
<div class="line"><span class="lineno"> 1965</span>        pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 1966</span>        free(conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a>);</div>
<div class="line"><span class="lineno"> 1967</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a887874891a0026e6ad2a2ee2c3c7390a">current_scene</a> = strdup(scene_name);</div>
<div class="line"><span class="lineno"> 1968</span>        pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a4343875c5de5530580e13fb1b528cf35">scene_mutex</a>);</div>
<div class="line"><span class="lineno"> 1969</span>        </div>
<div class="line"><span class="lineno"> 1970</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;Switched to scene: %s&quot;</span>, scene_name);</div>
<div class="line"><span class="lineno"> 1971</span>    }</div>
<div class="line"><span class="lineno"> 1972</span>    </div>
<div class="line"><span class="lineno"> 1973</span>    <span class="keywordflow">if</span> (response) {</div>
<div class="line"><span class="lineno"> 1974</span>        *response = resp;</div>
<div class="line"><span class="lineno"> 1975</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (resp) {</div>
<div class="line"><span class="lineno"> 1976</span>        <a class="code hl_function" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(resp);</div>
<div class="line"><span class="lineno"> 1977</span>    }</div>
<div class="line"><span class="lineno"> 1978</span>    </div>
<div class="line"><span class="lineno"> 1979</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 1980</span>}</div>
</div><!-- fragment --><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a7cb91bbce42b458f267f79b9a7b293bf_cgraph.svg" width="644" height="215"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="adde8bcb270d34f560ae99047e0524a1d" name="adde8bcb270d34f560ae99047e0524a1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adde8bcb270d34f560ae99047e0524a1d">&#9670;&nbsp;</a></span>obsws_set_debug_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obsws_set_debug_level </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the global debug level. </p>
<p >Set the global debug level for the library.</p>
<p >Debug logging is separate from regular logging. It provides extremely detailed trace information about the WebSocket protocol, message parsing, authentication, etc. This is useful during development and troubleshooting.</p>
<p >Debug levels:</p><ul>
<li>OBSWS_DEBUG_NONE: No debug output (fastest)</li>
<li>OBSWS_DEBUG_LOW: Major state transitions and connection events</li>
<li>OBSWS_DEBUG_MEDIUM: Message types and handlers invoked</li>
<li>OBSWS_DEBUG_HIGH: Full message content and every operation</li>
</ul>
<p >Debug logging is independent of log level. You can have OBSWS_LOG_ERROR set (hide non-error logs) but still see OBSWS_DEBUG_HIGH output.</p>
<p >Performance warning: OBSWS_DEBUG_HIGH produces enormous output and will slow down the library significantly. Only use during debugging!</p>
<p >Thread safety: Same as obsws_set_log_level (modifies global without locking).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The debug verbosity level </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a6720460e577d2afe3c0691a2d6e055e9" title="Set the global log level for the library.">obsws_set_log_level</a>, <a class="el" href="../../dd/d08/library_8h.html#a17d68299d8070c22f5cb04e2c4af28a1" title="Get the current global debug level.">obsws_get_debug_level</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01313">1313</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1313</span>                                                      {</div>
<div class="line"><span class="lineno"> 1314</span>    <a class="code hl_variable" href="../../d5/d27/library_8c.html#abf3a9f2c8c4082f1e6b67daddd8a5931">g_debug_level</a> = level;</div>
<div class="line"><span class="lineno"> 1315</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6720460e577d2afe3c0691a2d6e055e9" name="a6720460e577d2afe3c0691a2d6e055e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6720460e577d2afe3c0691a2d6e055e9">&#9670;&nbsp;</a></span>obsws_set_log_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void obsws_set_log_level </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9">obsws_log_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the global log level threshold. </p>
<p >Set the global log level for the library.</p>
<p >The library logs various messages during operation. This function sets which messages are displayed. All messages at the specified level and higher severity are shown; lower severity messages are hidden.</p>
<p >Levels in increasing severity:</p><ul>
<li>OBSWS_LOG_DEBUG: Low-level diagnostic info (too verbose for production)</li>
<li>OBSWS_LOG_INFO: General informational messages (usual choice)</li>
<li>OBSWS_LOG_WARNING: Potentially problematic situations (degraded but working)</li>
<li>OBSWS_LOG_ERROR: Error conditions that need attention</li>
</ul>
<p >Example: If you call obsws_set_log_level(OBSWS_LOG_WARNING), you'll see only WARNING and ERROR messages, but not INFO or DEBUG messages.</p>
<p >Thread safety: This modifies a global variable without locking, so if you might call this from multiple threads, use synchronization externally.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The minimum severity level to display </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#adde8bcb270d34f560ae99047e0524a1d" title="Set the global debug level for the library.">obsws_set_debug_level</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01285">1285</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1285</span>                                                  {</div>
<div class="line"><span class="lineno"> 1286</span>    <a class="code hl_variable" href="../../d5/d27/library_8c.html#abaccf3944be55af2f72ebbb713c77706">g_log_level</a> = level;</div>
<div class="line"><span class="lineno"> 1287</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8643e2027afb1907122ce4d3bfe65c6e" name="a8643e2027afb1907122ce4d3bfe65c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8643e2027afb1907122ce4d3bfe65c6e">&#9670;&nbsp;</a></span>obsws_start_recording()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_start_recording </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start recording in OBS. </p>
<p >Tells OBS to begin recording the current scene composition to disk. The recording path and format are determined by OBS settings, not by this library.</p>
<p >This is a convenience wrapper around <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a> using the OBS "StartRecord" request type.</p>
<p ><b>Return value interpretation:</b></p><ul>
<li>OBSWS_OK: Request was sent and OBS responded (check response-&gt;success)</li>
<li>Other errors: Network/connection problem</li>
</ul>
<p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><a class="code hl_struct" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> *resp = NULL;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d08/library_8h.html#a8643e2027afb1907122ce4d3bfe65c6e">obsws_start_recording</a>(conn, &amp;resp) == <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a> &amp;&amp; resp &amp;&amp; resp-&gt;<a class="code hl_variable" href="../../d2/d1f/structobsws__response__t.html#abbf2e99faa8fdef1c94bbd174470c821">success</a>) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Recording started\\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b">obsws_response_free</a>(resp);</div>
<div class="ttc" id="alibrary_8h_html_a8643e2027afb1907122ce4d3bfe65c6e"><div class="ttname"><a href="../../dd/d08/library_8h.html#a8643e2027afb1907122ce4d3bfe65c6e">obsws_start_recording</a></div><div class="ttdeci">obsws_error_t obsws_start_recording(obsws_connection_t *conn, obsws_response_t **response)</div><div class="ttdoc">Start recording in OBS.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02086">library.c:2086</a></div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">response</td><td>Optional output for response. Caller owns if provided, must free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if response received (check response-&gt;success for success) </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection not ready </dd>
<dd>
OBSWS_ERROR_TIMEOUT if OBS doesn't respond</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d27/library_8c.html#a30001811f4cf8501e006ca46bcb8b329" title="Stop recording in OBS.">obsws_stop_recording</a>, <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request</a>, <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02086">2086</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2086</span>                                                                                           {</div>
<div class="line"><span class="lineno"> 2087</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;StartRecord&quot;</span>, NULL, response, 0);</div>
<div class="line"><span class="lineno"> 2088</span>}</div>
</div><!-- fragment --><div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a8643e2027afb1907122ce4d3bfe65c6e_cgraph.svg" width="619" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a86a35ee2d7aef7a0569b4111bd663d22" name="a86a35ee2d7aef7a0569b4111bd663d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86a35ee2d7aef7a0569b4111bd663d22">&#9670;&nbsp;</a></span>obsws_start_streaming()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_start_streaming </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start streaming in OBS. </p>
<p >Tells OBS to begin streaming to the configured destination (Twitch, YouTube, etc). The stream settings (URL, key, bitrate, etc) are determined by OBS settings.</p>
<p >This is a convenience wrapper around <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a> using the OBS "StartStream" request type.</p>
<p ><b>Thread-safe:</b> Safe to call from any thread while connected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">response</td><td>Optional output for response. Caller owns if provided, must free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if response received (check response-&gt;success for success) </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection not ready </dd>
<dd>
OBSWS_ERROR_TIMEOUT if OBS doesn't respond</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d27/library_8c.html#a2cfe9b46f435aa7986b5e772b99c464e" title="Stop streaming in OBS.">obsws_stop_streaming</a>, <a class="el" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request</a>, <a class="el" href="../../d5/d27/library_8c.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response object previously allocated by obsws_send_request().">obsws_response_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02139">2139</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2139</span>                                                                                           {</div>
<div class="line"><span class="lineno"> 2140</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;StartStream&quot;</span>, NULL, response, 0);</div>
<div class="line"><span class="lineno"> 2141</span>}</div>
</div><!-- fragment --><div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a86a35ee2d7aef7a0569b4111bd663d22_cgraph.svg" width="624" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a69f8fcc1732533a2ebe573ac65effa04" name="a69f8fcc1732533a2ebe573ac65effa04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69f8fcc1732533a2ebe573ac65effa04">&#9670;&nbsp;</a></span>obsws_state_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * obsws_state_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a connection state to a human-readable string. </p>
<p >Utility function for logging and debugging. Returns a brief English description of each connection state.</p>
<p ><b>State Transitions:</b></p><ul>
<li>DISCONNECTED: Initial state or after disconnect()</li>
<li>CONNECTING: connect() called, establishing TCP connection</li>
<li>AUTHENTICATING: TCP connected, performing challenge-response auth</li>
<li>CONNECTED: Auth succeeded, ready for requests</li>
<li>ERROR: Network error or protocol failure, should reconnect</li>
</ul>
<p ><b>Valid transitions:</b> </p><div class="fragment"><div class="line">DISCONNECTED -&gt; CONNECTING -&gt; AUTHENTICATING -&gt; CONNECTED</div>
<div class="line">CONNECTED -&gt; DISCONNECTED (on <span class="keyword">explicit</span> disconnect)</div>
<div class="line">CONNECTED -&gt; ERROR (on network failure)</div>
<div class="line">ERROR -&gt; CONNECTING (on reconnect attempt)</div>
</div><!-- fragment --><p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a> state = <a class="code hl_function" href="../../dd/d08/library_8h.html#a61a10e31041532a9da0c1c1993f84a79">obsws_get_state</a>(conn);</div>
<div class="line">printf(<span class="stringliteral">&quot;Connection state: %s\\n&quot;</span>, <a class="code hl_function" href="../../dd/d08/library_8h.html#a69f8fcc1732533a2ebe573ac65effa04">obsws_state_string</a>(state));</div>
<div class="ttc" id="alibrary_8h_html_a61a10e31041532a9da0c1c1993f84a79"><div class="ttname"><a href="../../dd/d08/library_8h.html#a61a10e31041532a9da0c1c1993f84a79">obsws_get_state</a></div><div class="ttdeci">obsws_state_t obsws_get_state(const obsws_connection_t *conn)</div><div class="ttdoc">Get the detailed current connection state.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01663">library.c:1663</a></div></div>
<div class="ttc" id="alibrary_8h_html_a69f8fcc1732533a2ebe573ac65effa04"><div class="ttname"><a href="../../dd/d08/library_8h.html#a69f8fcc1732533a2ebe573ac65effa04">obsws_state_string</a></div><div class="ttdeci">const char * obsws_state_string(obsws_state_t state)</div><div class="ttdoc">Convert a connection state to a human-readable string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02282">library.c:2282</a></div></div>
</div><!-- fragment --><p >Never returns NULL - unknown states return "Unknown". Returned strings are static - do not modify or free.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The connection state to describe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a static string describing the state</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d27/library_8c.html#a61a10e31041532a9da0c1c1993f84a79" title="Get the current connection state.">obsws_get_state</a>, <a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991" title="Connection state - represents the current phase of the connection lifecycle.">obsws_state_t</a>, <a class="el" href="../../d5/d27/library_8c.html#ad9894e72ee8510f4eaf7d42feaf0cf9a" title="Check if a connection is actively connected to OBS.">obsws_is_connected</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02282">2282</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2282</span>                                                    {</div>
<div class="line"><span class="lineno"> 2283</span>    <span class="keywordflow">switch</span> (state) {</div>
<div class="line"><span class="lineno"> 2284</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991af973d2b8b0a498d0bbffb40ccab1ef2d">OBSWS_STATE_DISCONNECTED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Disconnected&quot;</span>;</div>
<div class="line"><span class="lineno"> 2285</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991a88276a1a9f595735a2b242f0eab1524a">OBSWS_STATE_CONNECTING</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Connecting&quot;</span>;</div>
<div class="line"><span class="lineno"> 2286</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991ac9c5d9c3aab50d7e6d1d38b1bb7d6d0f">OBSWS_STATE_AUTHENTICATING</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Authenticating&quot;</span>;</div>
<div class="line"><span class="lineno"> 2287</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991adbaae08035175b470fb9f543414672b8">OBSWS_STATE_CONNECTED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Connected&quot;</span>;</div>
<div class="line"><span class="lineno"> 2288</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991ae13bce21841139a7510b1c8b10a694ac">OBSWS_STATE_ERROR</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Error&quot;</span>;</div>
<div class="line"><span class="lineno"> 2289</span>        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div>
<div class="line"><span class="lineno"> 2290</span>    }</div>
<div class="line"><span class="lineno"> 2291</span>}</div>
</div><!-- fragment --><div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a69f8fcc1732533a2ebe573ac65effa04_icgraph.svg" width="1023" height="114"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a30001811f4cf8501e006ca46bcb8b329" name="a30001811f4cf8501e006ca46bcb8b329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30001811f4cf8501e006ca46bcb8b329">&#9670;&nbsp;</a></span>obsws_stop_recording()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_stop_recording </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop recording in OBS. </p>
<p >Stop recording.</p>
<p >Tells OBS to stop the currently active recording. If no recording is in progress, OBS returns success anyway (idempotent operation).</p>
<p >This is a convenience wrapper around <a class="el" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a> using the OBS "StopRecord" request type.</p>
<p ><b>Example usage:</b> </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/d08/library_8h.html#a30001811f4cf8501e006ca46bcb8b329">obsws_stop_recording</a>(conn, NULL) != <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6aa43b9a59f39db094a477cb25a638e5a1">OBSWS_OK</a>) {</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;Failed to stop recording\\n&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="alibrary_8h_html_a30001811f4cf8501e006ca46bcb8b329"><div class="ttname"><a href="../../dd/d08/library_8h.html#a30001811f4cf8501e006ca46bcb8b329">obsws_stop_recording</a></div><div class="ttdeci">obsws_error_t obsws_stop_recording(obsws_connection_t *conn, obsws_response_t **response)</div><div class="ttdoc">Stop recording.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02115">library.c:2115</a></div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">response</td><td>Optional output for response. Caller owns if provided, must free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if response received (check response-&gt;success for success) </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection not ready </dd>
<dd>
OBSWS_ERROR_TIMEOUT if OBS doesn't respond</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a8643e2027afb1907122ce4d3bfe65c6e" title="Start recording in OBS.">obsws_start_recording</a>, <a class="el" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request</a>, <a class="el" href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response structure and all its allocated memory.">obsws_response_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02115">2115</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2115</span>                                                                                          {</div>
<div class="line"><span class="lineno"> 2116</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;StopRecord&quot;</span>, NULL, response, 0);</div>
<div class="line"><span class="lineno"> 2117</span>}</div>
</div><!-- fragment --><div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a30001811f4cf8501e006ca46bcb8b329_cgraph.svg" width="618" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2cfe9b46f435aa7986b5e772b99c464e" name="a2cfe9b46f435aa7986b5e772b99c464e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cfe9b46f435aa7986b5e772b99c464e">&#9670;&nbsp;</a></span>obsws_stop_streaming()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a4820ea98988736a81d6695a51f74acd6">obsws_error_t</a> obsws_stop_streaming </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d1f/structobsws__response__t.html">obsws_response_t</a> **&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop streaming in OBS. </p>
<p >Stop streaming.</p>
<p >Tells OBS to stop the active stream. If not currently streaming, OBS returns success anyway (idempotent operation).</p>
<p >This is a convenience wrapper around <a class="el" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request()</a> using the OBS "StopStream" request type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Connection object (must be in CONNECTED state) </td></tr>
    <tr><td class="paramname">response</td><td>Optional output for response. Caller owns if provided, must free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OBSWS_OK if response received (check response-&gt;success for success) </dd>
<dd>
OBSWS_ERROR_NOT_CONNECTED if connection not ready </dd>
<dd>
OBSWS_ERROR_TIMEOUT if OBS doesn't respond</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d08/library_8h.html#a86a35ee2d7aef7a0569b4111bd663d22" title="Start streaming in OBS.">obsws_start_streaming</a>, <a class="el" href="../../dd/d08/library_8h.html#af2fd7f8dd928e03b38a3e2c5b5745417" title="Send a synchronous request to OBS and wait for the response.">obsws_send_request</a>, <a class="el" href="../../dd/d08/library_8h.html#a53067e61dc0ddcf1134d46b275d7ce6b" title="Free a response structure and all its allocated memory.">obsws_response_free</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l02161">2161</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2161</span>                                                                                          {</div>
<div class="line"><span class="lineno"> 2162</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/d27/library_8c.html#af2fd7f8dd928e03b38a3e2c5b5745417">obsws_send_request</a>(conn, <span class="stringliteral">&quot;StopStream&quot;</span>, NULL, response, 0);</div>
<div class="line"><span class="lineno"> 2163</span>}</div>
</div><!-- fragment --><div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a2cfe9b46f435aa7986b5e772b99c464e_cgraph.svg" width="622" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af3afc203f99395c187faf3fba0477bf9" name="af3afc203f99395c187faf3fba0477bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3afc203f99395c187faf3fba0477bf9">&#9670;&nbsp;</a></span>obsws_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * obsws_version </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the library version string. </p>
<p >Returns a semantic version string like "1.0.0" that identifies which version of libwsv5 is being used. Useful for debugging and logging.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to static version string (don't free) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01259">1259</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1259</span>                                {</div>
<div class="line"><span class="lineno"> 1260</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="../../d5/d27/library_8c.html#ad27c3919151c76f6e69c502c7ece4065">OBSWS_VERSION</a>;</div>
<div class="line"><span class="lineno"> 1261</span>}</div>
<div class="ttc" id="alibrary_8c_html_ad27c3919151c76f6e69c502c7ece4065"><div class="ttname"><a href="../../d5/d27/library_8c.html#ad27c3919151c76f6e69c502c7ece4065">OBSWS_VERSION</a></div><div class="ttdeci">#define OBSWS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l00032">library.c:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a700c8a9baa87a3827b399776e811f328" name="a700c8a9baa87a3827b399776e811f328"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700c8a9baa87a3827b399776e811f328">&#9670;&nbsp;</a></span>remove_pending_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_pending_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d27/library_8c.html#ac1fd81bac0d2473d54e2c9a03e393453">pending_request_t</a> *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00549">549</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  549</span>                                                                                        {</div>
<div class="line"><span class="lineno">  550</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  551</span>    <a class="code hl_struct" href="../../da/d45/structpending__request.html">pending_request_t</a> **req = &amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#acc0664cafa773ffe211ffe993c6ac8af">pending_requests</a>;</div>
<div class="line"><span class="lineno">  552</span>    </div>
<div class="line"><span class="lineno">  553</span>    <span class="comment">/* Find and remove from linked list */</span></div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">while</span> (*req) {</div>
<div class="line"><span class="lineno">  555</span>        <span class="keywordflow">if</span> (*req == target) {</div>
<div class="line"><span class="lineno">  556</span>            *req = target-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a>;</div>
<div class="line"><span class="lineno">  557</span>            pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  558</span>            </div>
<div class="line"><span class="lineno">  559</span>            <span class="comment">/* Clean up request resources */</span></div>
<div class="line"><span class="lineno">  560</span>            pthread_mutex_destroy(&amp;target-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a30b4636ccd06e4f775ee0dcc29ba3a69">mutex</a>);</div>
<div class="line"><span class="lineno">  561</span>            pthread_cond_destroy(&amp;target-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a619500d05293ec1f654ea803139941de">cond</a>);</div>
<div class="line"><span class="lineno">  562</span>            free(target);</div>
<div class="line"><span class="lineno">  563</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  564</span>        }</div>
<div class="line"><span class="lineno">  565</span>        req = &amp;(*req)-&gt;<a class="code hl_variable" href="../../da/d45/structpending__request.html#a49161e43ef29129c11fe643e85338df2">next</a>;</div>
<div class="line"><span class="lineno">  566</span>    }</div>
<div class="line"><span class="lineno">  567</span>    </div>
<div class="line"><span class="lineno">  568</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#a5be49ce76c72f09948fdf9c520eb133c">requests_mutex</a>);</div>
<div class="line"><span class="lineno">  569</span>}</div>
</div><!-- fragment --><div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a700c8a9baa87a3827b399776e811f328_icgraph.svg" width="640" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2f13308e49322d01e479cbe14da7b575" name="a2f13308e49322d01e479cbe14da7b575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f13308e49322d01e479cbe14da7b575">&#9670;&nbsp;</a></span>set_connection_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_connection_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a81ecb6b2403c8155af2e4edb4716c141">obsws_connection_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a>&#160;</td>
          <td class="paramname"><em>new_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00477">477</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  477</span>                                                                                    {</div>
<div class="line"><span class="lineno">  478</span>    <span class="comment">/* Acquire lock, save old state, set new state, release lock */</span></div>
<div class="line"><span class="lineno">  479</span>    pthread_mutex_lock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno">  480</span>    <a class="code hl_enumeration" href="../../dd/d08/library_8h.html#a2fb4e7d7196f39a5ce0e9c71b2d78991">obsws_state_t</a> old_state = conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a>;</div>
<div class="line"><span class="lineno">  481</span>    conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#adad7d0fb4880543b1f5b5e897010d814">state</a> = new_state;</div>
<div class="line"><span class="lineno">  482</span>    pthread_mutex_unlock(&amp;conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aa2752abaf5b201277fae73b42c78c8e6">state_mutex</a>);</div>
<div class="line"><span class="lineno">  483</span>    </div>
<div class="line"><span class="lineno">  484</span>    <span class="comment">/* Call callback only if state actually changed (not a duplicate) */</span></div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">if</span> (old_state != new_state &amp;&amp; conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a580a2daf514e79022b6d488c4933845e">state_callback</a>) {</div>
<div class="line"><span class="lineno">  486</span>        conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#a580a2daf514e79022b6d488c4933845e">state_callback</a>(conn, old_state, new_state, conn-&gt;<a class="code hl_variable" href="../../d5/d88/structobsws__connection.html#aaa5cf000b991e623632977c379314d89">config</a>.<a class="code hl_variable" href="../../dc/de7/structobsws__config__t.html#af272f38a8f4ca535939766cebacf0b8f">user_data</a>);</div>
<div class="line"><span class="lineno">  487</span>    }</div>
<div class="line"><span class="lineno">  488</span>    </div>
<div class="line"><span class="lineno">  489</span>    <span class="comment">/* Log the transition for debugging/monitoring */</span></div>
<div class="line"><span class="lineno">  490</span>    <a class="code hl_function" href="../../d5/d27/library_8c.html#a1d8529feb33753ebb45d896c4c125642">obsws_log</a>(conn, <a class="code hl_enumvalue" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a>, <span class="stringliteral">&quot;State changed: %s -&gt; %s&quot;</span>, </div>
<div class="line"><span class="lineno">  491</span>              <a class="code hl_function" href="../../d5/d27/library_8c.html#a69f8fcc1732533a2ebe573ac65effa04">obsws_state_string</a>(old_state), <a class="code hl_function" href="../../d5/d27/library_8c.html#a69f8fcc1732533a2ebe573ac65effa04">obsws_state_string</a>(new_state));</div>
<div class="line"><span class="lineno">  492</span>}</div>
<div class="ttc" id="alibrary_8c_html_a69f8fcc1732533a2ebe573ac65effa04"><div class="ttname"><a href="../../d5/d27/library_8c.html#a69f8fcc1732533a2ebe573ac65effa04">obsws_state_string</a></div><div class="ttdeci">const char * obsws_state_string(obsws_state_t state)</div><div class="ttdoc">Convert a connection state to a human-readable string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l02282">library.c:2282</a></div></div>
<div class="ttc" id="astructobsws__config__t_html_a580a2daf514e79022b6d488c4933845e"><div class="ttname"><a href="../../dc/de7/structobsws__config__t.html#a580a2daf514e79022b6d488c4933845e">obsws_config_t::state_callback</a></div><div class="ttdeci">obsws_state_callback_t state_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/library_8h_source.html#l00271">library.h:271</a></div></div>
</div><!-- fragment --><div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a2f13308e49322d01e479cbe14da7b575_cgraph.svg" width="366" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-38" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-38-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-38-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-38-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_a2f13308e49322d01e479cbe14da7b575_icgraph.svg" width="828" height="114"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aaaa872a3d93d0ce3d5d4346f4b1c763e" name="aaaa872a3d93d0ce3d5d4346f4b1c763e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaa872a3d93d0ce3d5d4346f4b1c763e">&#9670;&nbsp;</a></span>sha256_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sha256_hash </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00411">411</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>                                                                  {</div>
<div class="line"><span class="lineno">  412</span>    EVP_MD_CTX *ctx = EVP_MD_CTX_new();</div>
<div class="line"><span class="lineno">  413</span>    EVP_DigestInit_ex(ctx, EVP_sha256(), NULL);</div>
<div class="line"><span class="lineno">  414</span>    EVP_DigestUpdate(ctx, input, strlen(input));</div>
<div class="line"><span class="lineno">  415</span>    EVP_DigestFinal_ex(ctx, output, NULL);</div>
<div class="line"><span class="lineno">  416</span>    EVP_MD_CTX_free(ctx);</div>
<div class="line"><span class="lineno">  417</span>}</div>
</div><!-- fragment --><div id="dynsection-39" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-39-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-39-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-39-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d27/library_8c_aaaa872a3d93d0ce3d5d4346f4b1c763e_icgraph.svg" width="976" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="abf3a9f2c8c4082f1e6b67daddd8a5931" name="abf3a9f2c8c4082f1e6b67daddd8a5931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3a9f2c8c4082f1e6b67daddd8a5931">&#9670;&nbsp;</a></span>g_debug_level</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668">obsws_debug_level_t</a> g_debug_level = <a class="el" href="../../dd/d08/library_8h.html#a1997a985daa6bfb4117e885d9bb81668a0f96dd454f8efb9a755ebda2e81919aa">OBSWS_DEBUG_NONE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00253">253</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ad5f633670e2eea3285c1867570a33cbc" name="ad5f633670e2eea3285c1867570a33cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f633670e2eea3285c1867570a33cbc">&#9670;&nbsp;</a></span>g_init_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t g_init_mutex = PTHREAD_MUTEX_INITIALIZER</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00254">254</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="a5c573cf80a65ed908b966420c4a5d7d2" name="a5c573cf80a65ed908b966420c4a5d7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c573cf80a65ed908b966420c4a5d7d2">&#9670;&nbsp;</a></span>g_library_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool g_library_initialized = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00251">251</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="abaccf3944be55af2f72ebbb713c77706" name="abaccf3944be55af2f72ebbb713c77706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaccf3944be55af2f72ebbb713c77706">&#9670;&nbsp;</a></span>g_log_level</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9">obsws_log_level_t</a> g_log_level = <a class="el" href="../../dd/d08/library_8h.html#afbee3b6b991e705309ea19fd5fb0bff9ae48017bf78390a3df8cd87a24782c421">OBSWS_LOG_INFO</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l00252">252</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
<a id="ad34f3c7a416fe0d9311efdc5715410e1" name="ad34f3c7a416fe0d9311efdc5715410e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34f3c7a416fe0d9311efdc5715410e1">&#9670;&nbsp;</a></span>protocols</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct lws_protocols protocols[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {</div>
<div class="line">        <span class="stringliteral">&quot;obs-websocket&quot;</span>,</div>
<div class="line">        <a class="code hl_function" href="../../d5/d27/library_8c.html#ac5c31c457dc3042f85a620d7998ebeee">lws_callback</a>,</div>
<div class="line">        0,</div>
<div class="line">        <a class="code hl_define" href="../../d5/d27/library_8c.html#a665c5272405e81329a26d2db1a7d5d97">OBSWS_DEFAULT_BUFFER_SIZE</a>,</div>
<div class="line">        0, </div>
<div class="line">        NULL, </div>
<div class="line">        0 </div>
<div class="line">    },</div>
<div class="line">    { NULL, NULL, 0, 0, 0, NULL, 0 }</div>
<div class="line">}</div>
<div class="ttc" id="alibrary_8c_html_ac5c31c457dc3042f85a620d7998ebeee"><div class="ttname"><a href="../../d5/d27/library_8c.html#ac5c31c457dc3042f85a620d7998ebeee">lws_callback</a></div><div class="ttdeci">static int lws_callback(struct lws *wsi, enum lws_callback_reasons reason, void *user, void *in, size_t len)</div><div class="ttdoc">libwebsockets callback - routes WebSocket events to our handlers.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d27/library_8c_source.html#l01022">library.c:1022</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d5/d27/library_8c_source.html#l01075">1075</a> of file <a class="el" href="../../d5/d27/library_8c_source.html">library.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d5/d27/library_8c.html">library.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
